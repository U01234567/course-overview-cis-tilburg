<!doctype html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<title>CIS overview</title>

		<style>
		/* =============================================================================
		Guide
		- 0) Theme & color tokens (Light/Dark) — all colors defined here
		- 1) Base & layout (workspace, stage, layer)
		- 2) Hex grid (geometry, items, labels)
		- 3) View modes (tracks/blocks) + legends
		- 4) Controls (mode toggle, chips, checks, buttons)
		- 5) Dock (portrait/landscape), tips (tour/toast), info drawer
		- 6) Intro overlay, motion, and print/export
		============================================================================= */

		/* =========================================================================
		0) THEME & COLOR TOKENS
		- All colors centralized. No hex outside this block.
		- Track fills preserved via .fill-bdm/.fill-cc/.fill-nmd/.fill-extra
		========================================================================= */
		:root {
			/* Core neutrals */
			--white: #ffffff;                            /* pure white */
			--black: #000000;                            /* pure black */

			/* Track palette */
			--track-bdm: #008fc7;                        /* BDM blue */
			--track-cc: #3c7a47;                         /* CC green */
			--track-nmd: #ab833f;                        /* NMD gold */
			--track-extra: #d22f2f;                      /* Extra cherry */

			/* Light theme surfaces & text */
			--app-bg: #c9c9c9;                           /* app canvas */
			--surface: #ffffff;                          /* cards, panels */
			--surface-2: #e3e3e3;                        /* stage panel */
			--fill-base: #ffffff;                        /* hex base fill */
			--title: #003366;                            /* headings/titles */
			--text: #0d0e0e;                             /* body text */
			--text-weak: rgba(13,14,14,.72);             /* subdued text */

			/* Accent */
			--accent: #003366;                           /* brand accent */
			--accent-contrast: #ffffff;                  /* on-accent text */
			--text-on-color: #ffffff;                    /* on solid color */

			/* Glass, borders, lines */
			--glass-bg: rgba(255,255,255,.92);           /* tour/toast bg */
			--glass-border: rgba(0,0,0,.10);             /* tour/toast border */
			--border-default: rgba(0,0,0,.12);           /* generic border */
			--border-strong: rgba(0,0,0,.14);            /* stronger border */
			--inset-line: rgba(0,0,0,.04);               /* inset hairline */

			/* Special chips & buttons */
			--chip-none-bg: #0b1524;                     /* “none” chip bg (light) */
			--chip-none-fg: #ffffff;                     /* “none” chip text */

			/* Shadows */
			--shadow-1: 0 2px 12px rgba(0,0,0,.12);      /* card */
			--shadow-2: 0 10px 24px rgba(0,0,0,.16);     /* heavy */
			--shadow-btn: 0 6px 16px rgba(0,0,0,.12);    /* button */
			--shadow-focus-filter: drop-shadow(0 16px 32px rgba(0,0,0,.22));
			--shadow-print-1: 0 2.4mm 4.2mm rgba(0,0,0,.22);
			--shadow-print-2: 0 .6mm 1.8mm rgba(0,0,0,.12);

			/* Buttons/subtle UI */
			--btn-subtle-bg: rgba(0,0,0,.08);            /* subtle icon btn bg */

			/* Tints */
			--tint-theme: rgba(0, 51, 102, .10);         /* theme tint */
			--tint-course: rgba(0,0,0,.06);              /* course tint */

			/* Mask/gradients */
			--mask-opaque: #000000;                      /* mask solid color */

			/* Geometry & app JS hooks */
			--radius: 12px;
			--gap: .75rem;
			--scale: 1; --tx: 0px; --ty: 0px;

			/* Dock sizing */
			--dock-w: 340px;
			--dock-h: 200px;
			--dock-tab: 28px;

			/* Workspace reserve (JS updates) */
			--dock-reserve-bottom: calc(var(--dock-h) + 16px);
			--dock-reserve-right:  calc(min(36vw, var(--dock-w)) + 16px);

			/* Dock slide shift */
			--dock-shift: 0%;
		}

		/* Dark theme */
		body[data-ui-theme="dark"] {
			--app-bg: #001933;
			--surface: #0b1524;
			--surface-2: #1c2637;
			--fill-base: #0f1722;
			--title: #ab833f;
			--text: #ffffff;
			--text-weak: rgba(255,255,255,.75);

			--accent: #ab833f;
			--accent-contrast: #001933;
			--text-on-color: #ffffff;

			--glass-bg: rgba(11,21,36,.86);
			--glass-border: rgba(255,255,255,.12);
			--border-default: rgba(255,255,255,.12);
			--border-strong: rgba(255,255,255,.12);
			--inset-line: rgba(255,255,255,.06);

			--chip-none-bg: #5b421b;

			--btn-subtle-bg: rgba(255,255,255,.08);

			--tint-theme: rgba(171,131,63,.15);
			--tint-course: rgba(255,255,255,.06);
		}

		/* Track fills (variable-driven) */
		.fill-bdm { fill: var(--track-bdm); }
		.fill-cc { fill: var(--track-cc); }
		.fill-nmd { fill: var(--track-nmd); }
		.fill-extra { fill: var(--track-extra); }
		.fill-base { fill: var(--fill-base); }
		.fill-blue { fill: var(--accent); }

		/* =========================================================================
		1) BASE & LAYOUT
		========================================================================= */
		*,*::before,*::after { box-sizing: border-box; }
		html,body { height: 100%; margin: 0; }
		body {
			background: var(--app-bg);
			color: var(--text);
			font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
			-webkit-text-size-adjust: 100%;
			text-rendering: optimizeLegibility;
			overflow: hidden;
			overscroll-behavior: none;
		}

		.app-title {
			position: absolute; top: 12px; left: 16px; z-index: 10020;
			color: var(--title); font-weight: 800; letter-spacing: .02em;
			background: transparent; padding: .25rem .5rem; border-radius: 8px;
			pointer-events: auto; cursor: pointer;
		}
		.app-title:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

		.workspace {
			position: relative;
			min-height: calc(100vh  - 1rem);
			min-height: calc(100svh - 1rem);
			min-height: calc(100lvh - 1rem);
			min-height: calc(100dvh - 1rem);
			margin: .5rem;
			background: var(--surface);
			border-radius: var(--radius);
			box-shadow: var(--shadow-1);
			display: flex; flex-direction: column;
			padding: var(--gap);
			transition: padding .28s ease;
			will-change: padding;
		}
		@media (orientation: portrait) {
			.workspace { padding-bottom: calc(var(--gap) + var(--dock-reserve-bottom)); }
			body.dock-collapsed .workspace { padding-bottom: calc(var(--gap) + var(--dock-tab) + 10px); }
		}
		@media (orientation: landscape) {
			.workspace { padding-right: calc(var(--gap) + var(--dock-reserve-right)); }
			body.dock-collapsed .workspace { padding-right: calc(var(--gap) + var(--dock-tab) + 10px); }
		}

		.stage {
			position: relative; flex: 1 1 auto; min-height: 0; overflow: hidden;
			user-select: none; cursor: grab; border-radius: 12px;
			background: var(--surface-2);
		}
		.is-dragging .stage { cursor: grabbing; }

		.btn--osiris {
			position: absolute; top: 12px; right: 12px; z-index: 10010;
			background: var(--surface); color: var(--text);
			border: 1px solid var(--border-default);
			box-shadow: var(--shadow-1);
			text-decoration: none;
		}
		.btn--osiris:hover { background: var(--surface-2); }
		.btn--osiris:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

		.layer {
			position: absolute; left: 50%; top: 50%;
			transform: translate3d(-50%,-50%,0) scale(var(--scale)) translate3d(var(--tx), var(--ty), 0);
			transform-origin: center; will-change: transform; touch-action: none;
			transition: transform .28s cubic-bezier(.2,.8,.2,1);
			backface-visibility: hidden;
		}
		body.is-moving .layer, .layer.is-measuring { transition: none !important; }

		/* =========================================================================
		2) HEX GRID
		========================================================================= */
		.hex-grid {
			--flat: 320px; --halfH: 140px; --tri: calc(var(--halfH)*.606); --hex-space: 24px;
			--w: calc(var(--flat) + var(--tri)*2);
			--h: calc(var(--halfH)*2);
			--col-gap: -105px;
			--dx: calc(var(--w)*.75 + var(--col-gap));
			--dy: calc(var(--h) + var(--hex-space));
			position: relative;
			width: calc(var(--w) + var(--dx)*6);
			height: calc(var(--h) + var(--dy)*6);
			contain: paint;
			font-size: 200%;
		}
		@media (max-width: 900px) {
			.hex-grid { --flat: 240px; --halfH: 100px; --hex-space: 19px; --col-gap: -85px; --w: calc(var(--flat) + var(--tri)*2); --h: calc(var(--halfH)*2); --dx: calc(var(--w)*.75 + var(--col-gap)); --dy: calc(var(--h) + var(--hex-space)); font-size: 160%; }
		}
		@media (max-width: 600px) {
			.hex-grid { --flat: 200px; --halfH: 84px; --hex-space: 15px; --col-gap: -75px; --w: calc(var(--flat) + var(--tri)*2); --h: calc(var(--halfH)*2); --dx: calc(var(--w)*.75 + var(--col-gap)); --dy: calc(var(--h) + var(--hex-space)); font-size: 140%; }
		}

		.hex {
			position: absolute; left: 50%; top: 50%;
			width: var(--w); height: var(--h);
			--label-inset: 7%;
			--oddY: 0px;
			--hex-bg: var(--fill-base);
			--dim-o: 0;
			transform: translate(calc(-50% + var(--q)*var(--dx)), calc(-50% + (var(--r) + (var(--q)*.5))*var(--dy) + var(--oddY)));
			display: grid; place-items: center;
			pointer-events: none; user-select: none;
			transition: opacity .16s ease, filter .2s ease;
		}
		.hex.hex--odd { --oddY: calc(var(--halfH) + (var(--hex-space)/2)); }

		.hex::before,
		.hex::after {
			content: ""; position: absolute; top: 0; bottom: 0; left: 50%;
			transform: translateX(-50%); height: 100%; width: auto;
			aspect-ratio: 114.68 / 99.31;
			-webkit-clip-path: polygon(25% 0,75% 0,100% 50%,75% 100%,25% 100%,0 50%);
			clip-path: polygon(25% 0,75% 0,100% 50%,75% 100%,25% 100%,0 50%);
		}
		.hex::before { background: var(--hex-bg); }
		.hex::after { background: var(--hex-dim-fill, var(--fill-base)); opacity: var(--dim-o); transition: opacity .22s ease; z-index: 1; }

		.hex__svg { position: absolute; inset: 0; width: 100%; height: 100%; display: block; z-index: 0; pointer-events: none; }
		.hex__label {
			position: relative; z-index: 2;
			max-width: calc(var(--flat) - 2.2rem);
			padding: 1.0em 2.2em; text-align: center; line-height: 1.12;
			font-weight: 700; font-size: .72em; color: var(--title);
			pointer-events: none; user-select: none;

			-webkit-clip-path: polygon(
				calc(25% + var(--label-inset)) 0%,
				calc(75% - var(--label-inset)) 0%, 
				100% 50%,
				calc(75% - var(--label-inset)) 100%,
				calc(25% + var(--label-inset)) 100%,
				0% 50%
			);
			clip-path: polygon(calc(25% + var(--label-inset)) 0%, calc(75% - var(--label-inset)) 0%, 100% 50%, calc(75% - var(--label-inset)) 100%, calc(25% + var(--label-inset)) 100%, 0% 50%);
			hyphens: auto; -webkit-hyphens: auto; overflow-wrap: anywhere; word-break: normal; text-wrap: balance;
		}

		.hex__hit {
			position: absolute; top: 0; bottom: 0; left: 50%;
			transform: translateX(-50%); height: 100%; width: auto;
			aspect-ratio: 114.68 / 99.31; z-index: 3; pointer-events: auto;
			background: transparent; cursor: grab; --hit-inset: 0%;
			-webkit-clip-path: polygon(calc(25% + var(--hit-inset)) 0%, calc(75% - var(--hit-inset)) 0%, 100% 50%, calc(75% - var(--hit-inset)) 100%, calc(25% + var(--hit-inset)) 100%, 0% 50%);
			clip-path: polygon(calc(25% + var(--hit-inset)) 0%, calc(75% - var(--hit-inset)) 0%, 100% 50%, calc(75% - var(--hit-inset)) 100%, calc(25% + var(--hit-inset)) 100%, 0% 50%);
			font-size: 0; line-height: 0;
		}
		@supports not (clip-path: polygon(0 0)) {
			.hex::before,
			.hex::after,
			.hex__hit {
				-webkit-clip-path: none;
				clip-path: none;
			}
			.hex::before,
			.hex::after {
				left: 0; right: 0; width: 100%;
				transform: none;
			}
			.hex__hit {
				left: 0; right: 0; width: 100%;
				transform: none;
			}
		}
		@supports not (aspect-ratio: 1 / 1) {
			.hex::before,
			.hex::after,
			.hex__hit {
				left: 0; right: 0; width: 100%;
				transform: none;
			}
		}
		.is-dragging .hex__hit { cursor: grabbing; }

		/* Dim & focus */
		.hex--hidden { display: none !important; }
		.hex--dim .hex__hit { pointer-events: none; }
		.hex--dim .hex__label { opacity: 0; visibility: hidden; }
		.hex--dim::before { background: var(--hex-dim-fill, var(--fill-base)); }
		.hex--dim { opacity: .26; --dim-o: 1; }
		body[data-ui-theme="dark"] .hex--dim { opacity: .14; }

		.hex--dim-block .hex__hit { pointer-events: none; }
		.hex--dim-block .hex__label { opacity: 0; visibility: hidden; }
		.hex--dim-block::before { background: var(--hex-dim-fill, var(--fill-base)); }
		.hex--dim-block { opacity: .26; --dim-o: 1; }
		body[data-ui-theme="dark"] .hex--dim-block { opacity: .14; }

		body.is-exporting .hex,
		body.is-exporting .hex::after {
			transition: none !important;
		}

		.hex--subdue { opacity: .45; }
		.hex--focus { filter: var(--shadow-focus-filter); z-index: 5; opacity: 1; }
		.hex--focus::before { box-shadow: 0 0 0 3px var(--title) inset; }

		/* =========================================================================
		3) LEGENDS
		========================================================================= */
		#legendTracks { display: block; }

		/* Label color rule: single-track uses accent-contrast */
		.hex[data-track]:not([data-track*=" "]) .hex__label { color: var(--accent-contrast); }
		body[data-ui-theme="dark"] .hex[data-track*=" "] .hex__label { color: var(--text-on-color); }

		body.is-moving .hex,
		body.is-moving .hex--focus { filter: none !important; }

		/* Legends */
		.title { margin: 0; font-size: 1.05rem; color: var(--title); font-weight: 800; letter-spacing: .01em; }
		.legend-box {
			border: 1px solid var(--border-strong);
			border-radius: 12px;
			background: var(--surface);
			padding: .4rem .5rem;
			display: grid; gap: .4rem;
		}
		.legend-title { font-weight: 800; color: var(--title); font-size: .82rem; margin: 0 0 .4rem 0; }
		.legend-tracks {
			display: grid; grid-auto-flow: column; grid-auto-columns: min-content;
			column-gap: .4rem; row-gap: .4rem; align-items: center;
		}
		.legend-item { display: inline-flex; align-items: center; gap: .28rem; font-size: .82rem; color: var(--text); position: relative; }
		.legend-item .info-btn {
			border: 0; background: none; padding: 0; margin-left: -.22rem; cursor: pointer;
			color: var(--title); font: inherit; line-height: 1; opacity: .9;
		}
		.legend-item .info-btn .icon-info {
			display: inline-grid; place-items: center;
			width: 1.05em; height: 1.05em; border: 1.5px solid currentColor; border-radius: 999rem;
			font-size: .75em; font-weight: 700; line-height: 1; text-transform: none;
		}
		.legend-item .info-btn:focus-visible { outline: 2px solid var(--accent); border-radius: .25rem; }

		.track-tip {
			position: fixed; left: 0; top: 0;
			background: var(--surface); color: var(--text);
			border: 1px solid var(--border-strong);
			border-radius: .35rem; padding: .35rem .55rem; display: none; z-index: 10050;
			box-shadow: var(--shadow-1);
			width: max-content; max-width: clamp(14rem, 60vw, 30rem);
			white-space: normal; overflow-wrap: break-word; word-break: normal; hyphens: auto; pointer-events: none;
		}
		.track-tip.is-open { display: block; }
		#trackInfoBtn { display: none !important; }

		.legend-item .sq { width: 10px; height: 10px; border-radius: .18rem; display: inline-block; }
		.legend-item .bdm { background: var(--track-bdm); }
		.legend-item .cc { background: var(--track-cc); }
		.legend-item .nmd { background: var(--track-nmd); }
		.legend-item .extra { background: var(--track-extra); }
		.legend-item .abbr { font-weight: 800; letter-spacing: .02em; color: var(--title); }
		.legend-theme { font-size: .82rem; color: var(--text-weak); }

		.legend-grid { display: grid; gap: .75rem; grid-template-columns: 1fr; }
		@media (orientation: landscape) { .legend-grid { grid-template-columns: 1fr; } }

		.legend-info { background: none; border: 0; padding: 0 .15rem; cursor: pointer; color: var(--title); }
		.legend-info sup { line-height: 1; }
		.legend-names { display: none; font-size: .92rem; color: var(--text-weak); }
		.legend-names.is-open { display: grid; gap: .25rem; }

		/* =========================================================================
		4) CONTROLS
		========================================================================= */
		/* Mode toggle (segmented) */
		.mode-toggle { display: flex; justify-content: flex-start; }
		.segmented {
			display: inline-flex; gap: 0; border: 1px solid var(--border-strong);
			border-radius: 12px; overflow: hidden; background: var(--surface); padding: 6px !important;
		}
		.segmented label { margin: 0; position: relative; }
		.segmented input { position: absolute; inset: 0; opacity: 0; pointer-events: none; }
		.segmented span { display: inline-block; padding: .35rem .75rem; cursor: pointer; font-size: .9rem; color: var(--text); }
		.segmented input:checked + span { background: var(--accent); color: var(--accent-contrast); border-radius: 6px; }

		/* Collapsibles */
		details.collapsible { border: 0; padding: 0; }
		details.collapsible.pill { border: 1px solid var(--title); border-radius: 14px; background: transparent; }
		details.collapsible.pill > summary {
			list-style: none; cursor: pointer; user-select: none;
			display: flex; align-items: center; justify-content: space-between; gap: .5rem;
			width: 100%; padding: .65rem .9rem; border-radius: 14px; font-weight: 800; color: var(--title);
			background: var(--tint-course);
		}
		.toggle-stack { display: grid; gap: var(--gap); }
		details.collapsible.pill[open] { background: var(--surface); border-color: var(--title); }
		details.collapsible.pill[open] > summary { background: transparent; border-radius: 14px 14px 0 0; }
		details.collapsible.pill .collapsible__body {
			padding: .7rem .8rem .9rem; border-top: 1px solid var(--title);
			border-bottom-left-radius: 14px; border-bottom-right-radius: 14px; background: var(--surface);
		}

		/* Theme radio chips */
		.chip { display: block; position: relative; }
		.chip input { position: absolute; opacity: 0; inset: 0; pointer-events: none; }
		.chip span {
			display: flex; align-items: center; gap: .45rem; width: 100%;
			background: var(--surface); color: var(--text);
			padding: .38rem .55rem; border-radius: .6rem; border: 1px solid var(--border-default); font-size: .85rem;
		}
		.chip span::before {
			content: ""; flex: 0 0 12px; width: 12px; height: 12px; border-radius: 50%; border: 2px solid currentColor;
		}
		.chip input:checked + span { background: var(--accent); color: var(--accent-contrast); border-color: transparent; }
		.chip input:checked + span::before { border-color: var(--accent-contrast); background: radial-gradient(var(--accent-contrast) 0 48%, transparent 49% 100%); }
		.chip--none input:checked + span { background: var(--chip-none-bg); color: var(--chip-none-fg); }

		/* Course checkboxes */
		.check { display: block; position: relative; }
		.check input { position: absolute; opacity: 0; inset: 0; pointer-events: none; }
		.check span {
			display: flex; align-items: center; gap: .45rem; background: var(--surface); color: var(--text);
			padding: .38rem .55rem .38rem 1.65rem;
			border-radius: .55rem; border: 1px solid var(--border-default); font-size: .84rem;
		}
		.check span::before {
			content: ""; position: absolute; left: .55rem; top: 50%; transform: translateY(-50%);
			width: 13px; height: 13px; border-radius: .25rem; border: 2px solid currentColor;
		}
		.check span::after {
			content: ""; position: absolute; left: .82rem; top: 50%; width: 8px; height: 5px;
			border: 2px solid transparent; border-top: 0; border-right: 0; transform: translateY(-55%) rotate(-45deg);
		}
		.check input:checked + span { color: var(--accent); border-color: var(--accent); }
		.check input:checked + span::before { background: currentColor; border-color: currentColor; }
		.check input:checked + span::after { border-color: var(--text-on-color); }
		.check input:focus-visible + span { outline: 2px solid var(--accent); outline-offset: 2px; }

		.group--themes, .group--courses { display: grid; grid-auto-rows: min-content; row-gap: .45rem; overflow: auto; }
		.group--themes { max-height: 8rem; }
		.group--courses { max-height: 12rem; }
		.group--inline {
			display: grid; grid-auto-flow: column; grid-auto-columns: min-content; column-gap: .45rem; align-items: center;
		}

		/* Buttons */
		.btn {
			display: inline-flex; align-items: center; justify-content: center;
			padding: .55rem .85rem; border-radius: 999rem; text-decoration: none; user-select: none; border: 0;
			box-shadow: var(--shadow-btn); background: var(--border-default); color: var(--title);
		}
		.btn--ghost { background: transparent; box-shadow: none; border: 1px solid var(--border-strong); }
		.btn--download { background: var(--accent); color: var(--accent-contrast); }
		.bulk-actions { display: flex; align-items: center; justify-content: flex-end; gap: .5rem; margin-bottom: .35rem; }
		.btn--sm { padding: .4rem .65rem; font-size: .88rem; border-radius: .55rem; }
		#coursesAllBtn { background: var(--accent) !important; color: var(--accent-contrast) !important; border-color: transparent !important; }
		#coursesNoneBtn { background: var(--chip-none-bg) !important; color: var(--chip-none-fg) !important; border-color: transparent !important; }

		/* =========================================================================
		5) DOCK, TIPS, INFO
		========================================================================= */
		/* Dock */
		.dock {
			position: fixed; z-index: 10000;
			background: var(--surface-2);
			border: 1px solid var(--border-default);
			border-radius: 14px; box-shadow: var(--shadow-2);
			overflow: hidden; transition: transform .26s ease, opacity .26s ease; display: flex;
		}
		body.dock-collapsed { --dock-shift: calc(100% - var(--dock-tab)); }

		@media (orientation: portrait) {
			.dock {
				left: 12px;
				right: 12px;
				bottom: 12px;
				left: max(12px, env(safe-area-inset-left, 0px));
				right: max(12px, env(safe-area-inset-right, 0px));
				bottom: max(12px, env(safe-area-inset-bottom, 0px));
				max-height: 60vh;
				max-height: min(60dvh, 60vh);
				flex-direction: column;
				transform: translateY(var(--dock-shift));
			}
		}
		@media (orientation: landscape) {
			.dock {
				right: 12px;
				right: max(12px, env(safe-area-inset-right, 0px));
				top: 50%;
				width: min(34vw, var(--dock-w));
				max-height: 86vh;
				flex-direction: row;
				transform: translateY(-50%) translateX(var(--dock-shift));
			}
		}

		.dock__handle {
			background: var(--accent);
			display: grid; place-items: center;
			user-select: none; touch-action: none;
			flex: 0 0 var(--dock-tab);
		}
		.dock__toggle {
			width: 24px; height: 24px; border-radius: 999rem; border: 0; cursor: pointer;
			background: var(--accent); color: var(--accent-contrast);
			box-shadow: var(--shadow-btn);
			display: inline-flex; align-items: center; justify-content: center;
			font-size: 14px; line-height: 1; -webkit-tap-highlight-color: transparent;
		}

		.dock__content {
			padding: .9rem; display: grid; gap: .9rem;
			overflow: hidden; grid-template-rows: auto 1fr auto; -webkit-overflow-scrolling: touch;
			grid-auto-rows: min-content; flex: 1 1 auto; min-height: 0; min-width: 0;
		}
		.dock__scroll { 
			overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; 
			display: grid; gap: .9rem; grid-auto-rows: min-content; 
			min-height: 0; 
		}
		.dock__row { display: flex; align-items: center; gap: .75rem; }
		.dock__row--spread { justify-content: space-between; }
		.dock__row--actions { justify-content: flex-end; gap: .5rem; }

		/* Tips: tour & toast */
		.tour, .toast {
			position: fixed;
			background: var(--glass-bg);
			border: 1px solid var(--glass-border);
			box-shadow: var(--shadow-2);
			border-radius: 16px;
			backdrop-filter: blur(6px);
			color: var(--text);
			display: none; z-index: 10030;
		}
		.tour { padding: 1rem 1.1rem; }
		.tour.is-open { display: block; }
		.tour__top { display: flex; align-items: center; justify-content: space-between; gap: .75rem; }
		.tour__step { font-weight: 700; font-size: .95rem; opacity: .85; }
		.tour__body { margin-top: .25rem; }
		.tour__actions { display: flex; justify-content: flex-end; gap: .5rem; margin-top: .7rem; flex-wrap: wrap; }

		@media (orientation: portrait) {
			.tour { left: 50%; transform: translateX(-50%); bottom: calc(var(--dock-reserve-bottom) + 12px); width: min(560px, calc(100vw - 24px)); }
		}
		@media (orientation: landscape) {
			.tour { left: 16px; top: 60px; transform: none; width: min(440px, calc(100vw - var(--dock-reserve-right) - 32px)); }
		}

		.toast { padding: .55rem .75rem; border-radius: 12px; left: 50%; transform: translateX(-50%); background: var(--surface); color: var(--text)}
		.toast.is-open { display: block; }
		@media (orientation: portrait) { .toast { bottom: calc(var(--dock-reserve-bottom) + 12px); } }
		@media (orientation: landscape) { .toast { bottom: 16px; } }

		/* Center CTA */
		.btn--center {
			position: fixed; top: 12px; left: 50%; transform: translateX(-50%);
			background: var(--accent); color: var(--accent-contrast); border: 0;
			opacity: 0; pointer-events: none; z-index: 10010;
		}
		.btn--center.is-visible { opacity: 1; pointer-events: auto; }

		/* Info drawer */
		.info {
			position: fixed; left: 12px; right: 12px; bottom: 0;
			height: 33.333vh; background: var(--surface);
			border-top-left-radius: 12px; border-top-right-radius: 12px;
			box-shadow: 0 -6px 16px var(--border-default);
			transform: translateY(120%); transition: transform .22s ease; z-index: 9996;
			padding: 1rem 1rem 1rem calc(1rem + 40px); display: grid; align-content: start; overflow: auto;
		}
		.info.is-open { transform: translateY(0); }
		.info #infoText { margin: 0; }
		@media (orientation: landscape) { .info { height: 28vh; } }
		@media (orientation: portrait) {
			.info { bottom: var(--dock-reserve-bottom); }
			body.dock-collapsed .info { bottom: calc(var(--dock-tab) + 12px); }
		}
		.info__close {
			position: absolute; top: 8px; left: 8px; width: 32px; height: 32px; border-radius: 999rem; border: 0;
			background: var(--btn-subtle-bg); color: var(--title); box-shadow: var(--shadow-btn); cursor: pointer;
		}

		/* =========================================================================
		6) INTRO, MOTION, PRINT/EXPORT
		========================================================================= */
		.intro-logo {
			position: fixed; inset: 0;
			display: grid; place-items: center;
			z-index: 20010;
			pointer-events: none;
			opacity: 1;
			transition: opacity var(--logo-fade-ms, 400ms) ease;
		}
		.intro-logo.is-hidden { opacity: 0; }
		.intro-logo__circle {
			width: 33.33vmin; height: 33.33vmin;
			background: var(--white);
			border-radius: 50%;
			display: grid; place-items: center;
			box-shadow: var(--shadow-2);
			overflow: hidden;
		}
		.intro-logo__circle svg,
		.intro-logo__svg {
			display: block;
			width: 66%; height: auto;
		}
		.intro-logo__stack {
			display: grid;
			justify-items: center;
			row-gap: .9rem;
		}
		.intro-logo__note {
			margin: 0;
			font-size: clamp(.9rem, 2.2vmin, 1.1rem);
			color: var(--accent-contrast);
			text-align: center;
		}
		
		.cis-intro {
			position: fixed; inset: 0; z-index: 20000; pointer-events: none;
			background: radial-gradient(circle at 50% 50%, transparent var(--reveal, 0vmax), var(--accent) calc(var(--reveal, 0vmax) + 1px));
		}
		.cis-intro.cis-intro--mask {
			background: var(--accent);
			-webkit-mask-image: radial-gradient(circle at 50% 50%, transparent var(--reveal, 0vmax), var(--mask-opaque) calc(var(--reveal, 0vmax) + 1px));
			mask-image: radial-gradient(circle at 50% 50%, transparent var(--reveal, 0vmax), var(--mask-opaque) calc(var(--reveal, 0vmax) + 1px));
			-webkit-mask-position: 50% 50%; mask-position: 50% 50%;
			-webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
			-webkit-mask-size: 100% 100%; mask-size: 100% 100%;
		}
		.cis-intro.cis-intro--fade { background: var(--accent); animation: cis-fade 700ms ease-in forwards; }
		@keyframes cis-fade { to { opacity: 0; } }

		@media (prefers-reduced-motion: reduce) {
			.layer, .dock, .info { transition: none !important; }
			.cis-intro { display: none; }
		}
	</style>


	</head>

	<body data-ui-theme="light">
		<!-- =========================================================
			APP SHELL: intro mask
			========================================================= -->
		<div class="cis-intro" id="intro" aria-hidden="true"></div>

		<!-- Tilburg University intro logo -->
		<div class="intro-logo" id="introLogo" aria-hidden="true">
			<div class="intro-logo__stack" role="group" aria-label="Loading indicator">
				<div class="intro-logo__circle" role="img" aria-label="Tilburg University logo">
					<?xml version="1.0" encoding="UTF-8"?>
					<svg id="Tiu-logo" viewBox="0 0 29.3 29.21">
						<g>
							<g>
							<path class="fill-blue" d="M20.56,20.38s.07-.02.09,0c.02.02,0,.04,0,.06-.01.02-.03.03-.04.05,0,.03-.03.05-.05.07-.04.02-.07.05-.1.09-.02.04-.1.09-.12.13-.02.04-.08.05-.11.06-.03.01-.05.02-.09.02-.05,0-.1-.05-.14-.06-.03,0-.1-.02-.19,0-.09.02-.3-.02-.33,0-.04.02-.06.03-.08.02-.02-.02-.06-.02-.1,0-.04.01-.17,0-.2,0-.04,0-.03-.04-.05,0-.02.04-.09.11-.13.17-.04.07-.1.08-.13.14-.02.06-.09.09-.1.1-.02,0-.03,0-.07.05-.04.04-.1.06-.14.1-.04.04-.08.1-.13.13-.05.03-.16.1-.21.15-.06.05-.11.08-.15.12-.04.03-.14.08-.18.1-.04.02-.12.07-.16.09-.04.03-.19.12-.23.14-.04.03-.19.08-.26.14-.06.06-.21.08-.26.11-.06.03-.38.08-.4.09-.03,0-.04,0-.08-.01-.04,0-.06.03-.12.06-.06.03-.08.05-.16.06-.07,0-.2.03-.27.05-.07.01-.06-.01-.08-.01-.02,0-.06.02-.1.03-.05,0-.18.04-.22.04-.04.01-.49.05-.51.05-.03,0-.07-.02-.11.01-.03.02-.06.04-.1.06-.04.01-.14-.02-.18-.02-.04,0-.16,0-.19,0-.06,0-.11-.01-.17-.01-.03,0-.03-.04-.06-.04s-.21-.01-.26-.02c-.05,0-.23-.02-.27-.03-.12-.03-.23-.04-.35-.05-.03,0-.08-.02-.11-.03-.06-.02-.12-.03-.17-.03-.02,0-.18,0-.21-.03-.03-.02-.08-.05-.1-.04-.02,0-.21-.04-.27-.04-.06,0-.35-.11-.39-.11-.04,0-.09-.04-.1-.06-.01-.02-.1-.05-.12-.06-.02,0-.06-.02-.09-.02-.03,0-.13-.06-.18-.07-.04-.01-.03-.07-.05-.1-.02-.02-.12-.07-.15-.09-.03-.01-.14-.03-.14-.03l-.06-.07-.09-.04-.04-.08-.07-.04s-.08-.03-.13-.07c-.04-.04-.1-.07-.11-.07s-.04.01-.11-.02c-.07-.04-.07-.09-.13-.15-.05-.06-.08-.09-.14-.18-.06-.09-.07-.14-.08-.15,0-.01,0-.06-.06-.09-.05-.03-.09-.1-.12-.12-.03-.03,0-.06-.03-.05-.04.01-.05.01-.1.01s-.15,0-.18,0c-.03,0-.03-.01-.07.02-.03.03-.1-.01-.12-.04-.02-.03-.09-.02-.17-.02-.09,0-.12,0-.18.03-.06.02-.07.04-.11.05-.04,0-.11-.04-.17,0-.06.05-.06,0-.1-.05-.04-.05-.08-.08-.16-.15-.09-.07-.09-.09-.16-.1-.07,0-.06-.1-.06-.16.03-.05.1-.01.15-.01s.06,0,.11.02c.05.02.08.02.14.02.06,0,.07.03.08.02.03-.01.05-.03.07-.05.01-.02.06-.03.09-.03.03,0,.13,0,.16-.02.04-.01.07,0,.12-.01.05-.02.14.03.17.04.03.01.04.01.08.03.04.02.08,0,.08,0,0,0,.06.02.09.02.02,0,.11-.01.13,0,.02,0,.02.03.05.02.04,0,.08,0,.14-.02.06-.02.13,0,.18-.02.05-.01.09-.03.15-.05.06-.02.05,0,.05.06,0,.05-.02.03,0,.05.02.03.03.02.03.05,0,.03.01.02.04.05.02.03.04.03.06.08.01.04.05.1.09.16.04.06.1.1.16.17.06.07.04.05.05.11.01.06,0,.04.06.08.06.04.11.1.15.14.04.04.16.16.17.19.02.02.08.04.15.08.07.04.42.26.45.27.04,0,.07.03.1.05.05.03.08.02.15.03.07.01.22.09.28.1.06.01.22.09.26.11.04.02.11,0,.17,0,.05,0,.08.01.12.02.04,0,.06.04.1.05.05,0,.12.01.17.02.05,0,.11.02.14.02.03,0,.03.03.08.04.05.01.06-.02.1,0,.03,0,.19.01.23.03.04.02.15.04.19.04s.1,0,.14,0c.04,0,.26.02.28.03.02.01.06,0,.1,0,.04,0,.08-.02.13-.02.06,0,.35,0,.4.02.05,0,.15-.01.22-.04.06-.03.19-.05.28-.09.08-.04.31-.04.36-.03.04,0,.04,0,.09-.02.05-.03.15-.05.23-.07.07-.02.46-.07.5-.08.04,0,.08-.04.13-.05.05,0,.15-.06.2-.06.05,0,.3-.2.31-.21.03-.04.06-.08.08-.12.02-.05.17-.11.22-.14.06-.03.27-.22.32-.26.04-.04.03.02.07,0,.05,0,.09-.08.11-.12.02-.03.07-.12.1-.15.04-.04.09-.11.15-.17.06-.05.24-.3.27-.34.03-.04.07-.06.1-.06.03.01.02.03.05.03.03,0,.04,0,.07.02.04,0,.05.01.09,0,.04-.02.05.02.07,0,.02-.01.06,0,.09,0,.03,0,.1,0,.17,0,.07,0,.2,0,.26,0,.07,0,.21,0,.25-.01.05-.01.17,0,.22.02.05.01.11,0,.15,0,.04,0,.12-.02.13-.01.02,0,.04.02.04.02,0,0,.04-.02.07-.02.02,0,.11,0,.13,0h0Z"/>
							<path class="fill-blue" d="M14.15,21.15c-.07.01-.17-.02-.2-.03-.03,0-.08,0-.11,0-.04,0-.03-.03-.08-.04-.04,0-.08,0-.12,0-.03,0-.04.02-.08-.02-.04-.04-.09-.03-.14-.02-.05.02-.08,0-.14,0-.06,0-.14.02-.17,0-.02-.03-.03.01-.06-.04-.04-.05-.07-.05-.12-.05-.05,0,0-.02-.05-.03-.05-.01-.06.02-.11-.02-.05-.03-.07-.04-.08-.08-.02-.03,0-.05-.08-.07-.08-.02-.08-.03-.12-.05-.04-.02-.05-.01-.07-.06-.02-.05-.01-.04-.07-.1-.06-.06-.01-.06-.09-.09-.07-.03-.06-.05-.09-.07-.03-.02-.1-.03-.15-.01-.04.02-.05.05-.1.02-.06-.03-.09-.03-.14-.03-.05,0-.04.02-.13,0-.09-.02-.11.02-.14-.03-.03-.05-.09-.01-.09.02.03.04.06.08.1.11.04.03.07.03.09.07.02.04.11.16.16.19.05.02.1.08.15.13.05.05.18.19.22.2.04.01.15.12.21.13.06.01.27.16.31.16.04,0,.09.01.14.02.05,0,.11.08.14.08.04,0,.17.06.23.06.06,0,.16.03.19.04.02,0,.06.05.1.04.03,0,.1.05.15.04.06-.01.12.01.17.01.06,0,.19.04.24.05.04.01.09.04.13.02.04-.02.08,0,.16,0,.08,0,.18,0,.24,0s.09,0,.13,0c.04-.01.08-.03.11-.04.03,0,.02.03.04.04.02,0,.16.04.24.01.08-.03.15-.05.16-.06.02-.01.05-.02.08-.02.03,0,.07,0,.1-.02.04-.02.14-.04.18-.05.03,0,.06-.01.09-.03.02-.01.05-.02.08-.03.03-.01.1-.02.16-.05.06-.03.12-.05.15-.08.04-.03.06-.02.09-.03.03-.01.05-.02.07-.04,0,0,.08.02.11.02.03,0,.03,0,.09-.04.06-.03.08-.05.1-.06.02,0,.09-.07.14-.09.02,0,.04-.02.06-.03l.08-.04s.02-.01.07-.04c.06-.03.08-.02.13-.04.05-.02.09-.03.14-.07.06-.04.14-.05.19-.08.04-.04.07-.07.08-.04.01.03,0,.07.05.05.05-.02.08-.02.12-.07.03-.05.05-.08.06-.11.02-.03.06-.03.08-.05.02-.01.03-.03.04-.05,0-.02.02-.04.05-.07.03-.03.05-.05.06-.09,0-.04,0-.06-.03-.06-.02,0-.04.02-.06.03-.01.01-.01.01-.03,0-.02-.01-.05-.02-.08,0-.04.02-.08.03-.12.03-.05,0-.05.03-.08,0-.03-.03-.07,0-.07,0,0,0-.03,0-.04-.02-.02-.02-.1-.03-.13-.01-.02.01-.09.04-.12.05-.03.02-.16.06-.21.07-.05,0-.11.05-.16.07-.06.02-.17.05-.2.09-.03.04-.03.04-.09.07-.07.03-.12.07-.16.09-.05.03-.02.05-.07.02-.06-.03-.09-.08-.24.01-.14.09-.17.11-.2.13-.02.02-.05.01-.07,0-.01-.02-.04,0-.08,0-.04,0-.04.05-.09.04-.05,0-.08-.02-.14,0-.07.02-.16.05-.21.08-.05.03-.16,0-.19.03-.02.02-.13.05-.15.04-.04-.01-.09-.01-.13,0-.05.02-.15.02-.21.02s-.09,0-.14,0c-.05,0-.04.02-.1-.03-.06-.05-.05-.03-.12-.02M8.57,19.77s.07-.03.1-.02c.03,0,.06,0,.13.01.08,0,.21-.02.24,0,.04.01.04.03.08.05.04.02.05-.03.09-.02.05,0,.09,0,.14,0,.05-.01.06-.02.09-.02.04,0,.12-.03.14,0,.01.03.04.01.07.03.03.02.05.01.07,0,.02-.02.12,0,.16-.01.04,0,.12-.03.16-.01.04.02.04.02.06.04.02.02.06,0,.08,0,.03-.01.05-.01.08,0,.03,0,.08-.02.14-.02.06,0,.24-.02.27,0,.04.03.05.03.11.02.06,0,.27-.03.3-.01.03.01.03.05.09.05.05,0,.44-.05.47-.03.03.02.01.03.06.03s.08,0,.12.01c.04.01.15-.04.22-.07.06-.02.05-.01.07-.03.02-.01.03-.03.03-.07,0-.05.02-.04.03-.08.02-.03.03-.04.04-.08,0-.04.02-.06.03-.1.01-.04.02-.03.07-.08.04-.05-.02-.1-.06-.09-.04.01-.06.02-.11.04-.05.02-.13,0-.18,0-.06,0-.12,0-.18.02-.06.02-.53-.01-.56,0-.03,0-.02.02-.05.04-.03.02-.05,0-.07-.04-.01-.03-.11,0-.17.03-.06.03-.13.01-.17.02-.04,0-.04.02-.04-.02s-.02-.06-.04-.13c-.03-.07,0-.09,0-.14,0-.05,0-.05,0-.11,0-.06-.01-.1-.03-.13-.02-.03-.02-.07,0-.1.01-.03.01-.07.01-.13,0-.06-.03-.05-.04-.08-.01-.03-.02-.06-.03-.08-.02-.02-.02-.07.02-.11.03-.04.03-.12,0-.16-.02-.04-.04-.08-.05-.12-.02-.05-.02-.08,0-.12.03-.04,0-.05.03-.11.02-.06.03-.04.04-.08,0-.03,0-.04.03-.06.03-.02.05-.04.07-.07.02-.04.04-.08.08-.09.03,0,.05-.05.1-.03.05.02.22-.02.25-.02.03,0,.05-.02.07-.03.02,0,.04-.05.09-.05.05,0,.09-.06.1-.08,0-.03.06-.07.13-.14.07-.07.04.03.02.07-.02.04,0,.05,0,.09s-.01.12,0,.15c0,.03,0,.09,0,.14,0,.04-.06.02-.09.02s-.06-.03-.1,0c-.04.02-.05.03-.07.07-.02.04,0,.08,0,.07.04,0,.03.02.02.06,0,.04,0,.08.03.11.03.04.05.01.09,0,.04,0,.05-.01.09,0,.05,0,.02.01.02.05,0,.03-.03.03-.03.06s0,.05.03.08c.03.03.12.05.17.04.04-.01.03-.07.04-.1.01-.03.03-.06.03-.11,0-.05,0-.08,0-.13-.02-.05,0-.16,0-.2,0-.04-.01-.12-.01-.15s0-.08.03-.11c.03-.03,0-.06,0-.09,0-.03.01-.05.01-.08s0-.11,0-.16c0-.05,0-.09.03-.13.03-.04,0-.07,0-.1-.01-.02,0-.05,0-.11,0-.05,0-.11,0-.16,0-.05,0-.12,0-.15,0-.03-.02-.06-.01-.08,0-.02.04-.03.05-.05,0-.02.04-.02.06-.02.04,0,.03-.05.07-.08.04-.03.04-.06.04-.1s.02-.15,0-.2c0-.04-.02-.07-.05-.09-.02-.02-.07-.02-.1-.02-.04,0-.05,0-.07-.03-.02-.03-.03-.03-.06-.01-.02.02-.04,0-.07,0-.02-.01-.02-.01-.06-.03-.04-.02-.09,0-.11.02-.03.01-.02.01-.05.03-.04.02-.08.04-.12.06-.05.02-.09.07-.08.1,0,.03,0,.06-.01.08-.02.02,0,.05,0,.05,0,0,0,.05.02.06.02,0,.03.04.02.07,0,.03,0,.03.02.09.04.06.05.03.07.04.02,0,.04.04.1.06.05.01.07.02.12.01.06,0,.02.03,0,.04-.03.01-.02.02-.03.07,0,.05,0,.03,0,.07.01.04.03.03,0,.07-.02.03,0,.03-.01.08-.01.05,0,.06,0,.08-.01.02-.03,0-.06.01-.03.02-.05.07-.07.08-.02.01-.08.01-.1.05-.02.03-.05.06-.07.09-.02.04-.07.04-.12.04s-.06,0-.09.02c-.04.02-.12.03-.16.06-.05.02-.07,0-.09-.04-.02-.03,0-.06-.03-.1-.03-.05-.05-.03-.08-.03-.03,0-.04,0-.06,0-.02,0-.05-.06-.08-.03-.04.03-.05.02-.13.03-.08,0-.12-.06-.16-.14-.04-.08-.09-.14-.16-.19-.05-.03-.09-.06-.14-.09-.05-.03.01-.09.03-.12.02-.03.05-.06.07-.11.02-.05.03-.09.02-.14,0-.05-.02-.05-.01-.08,0-.03.02-.03.04-.05,0-.01,0-.04-.01-.07,0-.01-.03-.03-.01-.06.02-.04.02-.05,0-.09-.02-.03,0-.04,0-.07.01-.02,0-.09-.02-.1-.01-.01-.05-.02-.06-.04-.02-.02-.04-.04-.07-.05-.03,0-.05,0-.08-.03-.03-.02,0-.04-.03-.06-.03-.03-.05-.05-.08-.05-.04,0-.16.04-.2.04s-.17.06-.22.1c-.05.04-.1.14-.11.21,0,.06-.02.13-.02.19,0,.05.02.06.03.11.02.05.03.05.06.07.03.02.03.04.02.07,0,.03,0,.05-.02.07-.01.03-.04.03-.07.04-.02.02-.04,0-.09.01-.04.02-.05.04-.06.07-.01.03.02.03.03.05.01.02-.04.02-.07.04-.03.02-.09.09-.11.12-.02.03-.05.07-.06.14,0,.07-.03.05-.08.09-.05.04-.03.05-.06.08-.03.03-.04.06-.05.08-.01.02-.02.05-.04.09-.02.03-.03.07-.06.09-.02.02-.02.06-.01.1,0,.04.03.02.04.05s-.01.01-.03,0c-.02,0,0,.04,0,.08,0,.04.02.04.05.07.03.03.02.04.02.07s.03.04.06.09c.03.04.15.19.16.23.01.04,0,.14-.02.19-.01.05-.02.14-.04.21-.01.07-.04.27-.07.33-.03.08-.04.17-.03.26.01.07-.03.28-.05.38,0,.1-.02.08.09.15-.05-.01-.1-.02-.16,0-.06,0-.15-.02-.2,0-.05,0-.12-.07-.16-.04-.04.02-.13.01-.22,0-.08-.02-.2-.04-.2-.04l-.11.06s-.04-.03-.08-.06c-.04-.03-.06.04-.04.12.02.08.21.2.25.38.07-.01.18,0,.22,0,.05,0,.1,0,.14-.01.04-.01.14-.02.16,0,.01.02.06.02.09.03M11.65,16.07s-.06.01-.09,0c-.01-.02-.04-.03-.03-.04.01-.02.03-.02,0-.04-.02-.01-.02-.03,0-.05.03-.05.03-.04.05-.04s.02,0,.05,0c.03,0,.06,0,.09-.02.03,0,.06,0,.08,0,.03.02.02.06.05.05.02,0,.03,0,.04.03,0,.03,0,.04-.02.05-.02.01-.02.01-.06.03-.04.02-.03.02-.07.02-.04,0-.06-.01-.1,0M9.56,15.83s0-.03.02-.05c.02-.03.03-.01.02-.05-.01-.03-.02-.04-.02-.06,0-.03,0-.03,0-.06.01-.03.02-.03.04-.03.03,0,.05.01.08,0,.04,0,.07,0,.11,0,.04-.01.05,0,.06.02.01.03.04.03.04.05,0,.02,0,.04.03.05.02,0,.03.03.04.05,0,.01.02.03,0,.05-.01.01,0,.02,0,.05,0,.03.02.06.01.11,0,.04-.01.06,0,.1,0,.03,0,.02-.04.06-.04.03-.03.07-.09.05-.04,0-.08-.03-.12-.05-.04-.03-.05-.04-.06-.07-.02-.03-.02-.05-.04-.07-.02-.02,0-.02-.02-.04-.02-.02-.02-.02-.06-.04-.01-.03-.02-.03-.02-.06M9.07,17.18s.03-.03.03-.06c0-.04,0-.07.04-.06.04.01.02-.03.01-.04-.03-.06,0-.05.02-.08.03-.05.05-.03.08-.08.02-.05.03-.08.05-.11.01-.03,0-.04.06-.09.05-.06.06-.04.09-.09.03-.05.03-.05.04-.09,0-.04.07-.04.1-.06.03-.02.07,0,.07.05s-.03.04.01.09c.04.05.07.09.12.12.05.03.08.09.12.03.04-.05.06-.05.08-.07.02-.02.03,0,.05.04.02.03,0,.06.02.12.01.06.01.09.03.14.02.06,0,.07.04.11.03.04.04.05.05.08,0,.03.05.01.09.02.03,0,.04.02.09.04.05.01.06-.03.08.02.02.05.03.07,0,.12-.03.06-.07.07-.05.13.01.06.03.1.02.15-.01.04-.03.08-.05.11-.02.06-.03.13-.03.19,0,.03.02.02,0,.08-.02.06,0,.19,0,.21,0,.03,0,.04,0,.09,0,.05-.02.13,0,.2,0,.07.1.25.09.3,0,.04-.02.05-.03.09,0,.04-.03.06-.02.1.01.03,0,.06.02.08.02.03,0,.06,0,.09,0,.04-.04.04,0,.09.04.06.08.11,0,.11s-.16-.01-.18-.02c-.03,0-.13,0-.17,0-.04.01-.05.03-.08.02-.03-.01-.19-.02-.26-.02-.06,0-.13-.03-.17,0-.03.03-.05.06-.09.03-.03-.03-.05-.01-.07,0-.02,0,0,0-.03-.03-.03-.02-.12-.01-.14,0-.03,0-.03-.01-.03-.02,0-.05.02-.09.02-.13-.01-.04-.03-.06-.02-.13,0-.08-.01-.11,0-.15.02-.04.01-.08.01-.15s0-.12.03-.17c.03-.05.04-.03.04-.08,0-.04,0-.08-.01-.12-.01-.03,0-.1,0-.14,0-.04,0-.06.02-.11.02-.05,0-.05.01-.1,0-.05.01-.04.07,0,.06.03.07.06.1.04.03-.01.09,0,.12.01.03.02.09.04.13.03.04,0,.04,0,.08-.02.04-.03.08-.03.04-.07-.03-.03-.06-.07-.07-.12-.01-.05-.04-.06-.06-.13-.02-.07-.03-.1-.09-.11-.06,0-.1,0-.13,0-.03,0-.04-.03-.07-.04-.03-.02-.05-.02-.08-.03-.04-.01-.04-.03-.08-.05-.04-.02-.06-.04-.09-.07-.04-.04-.06-.06-.06-.11,0-.05,0-.09,0-.11,0-.02,0-.02.02-.06M9.78,9.59s.06.04.06.09.02.07.07.06c.05-.01.05.01.09.04.04.02.07.01.12,0,.05,0,.04-.02.06-.06.02-.05.05-.07.08-.12.03-.04.01-.1,0-.12-.01-.03-.02-.04-.02-.09s-.01-.03-.02-.08-.05-.06-.09-.09c-.04-.03-.08-.04-.11-.02-.04.01-.12,0-.16,0t-.07.04s-.02.05-.04.09c-.02.04-.03.04-.04.1,0,.05,0,.02.02.08,0,.06,0,.08.05.08"/>
							<path class="fill-blue" d="M7.9,11.61s.09.13.13.16c.04.03.06.03.08.07.03.04.06.06.12.09.05.03.15.11.19.16.04.05.05.07.08.1.03.03.2.09.25.13.06.04.11.06.17.09.05.03.16.03.19.06.03.03.08.04.12.03.05-.01.04,0,.09,0,.05.01.24.03.3.04.05,0,.14.02.18,0,.03-.02.06,0,.1.04.03.03.11.02.16,0,.05-.01.07.02.13,0,.06-.02.2.01.25,0,.05-.01.06-.04.12-.03.06,0,.19-.08.21-.12.03-.04.06-.03.09-.06.03-.03.11-.03.17-.04.05,0,.15-.04.18-.06.04-.02.11-.06.14-.05.04,0,.22-.08.26-.09.04-.01.14.05.17.08.03.03.03.05.07.07.03.02.08-.02.12.03.05.05.31.14.34.15.03,0,.03,0,.08,0,.05,0,.04,0,.08.05.03.04.06.05.09.08.03.03.09.07.12.1.03.04.07.06.11.09.03.02.05,0,.08.03.02.02.11.13.14.12.03,0,.04,0,.08.03.03.04.12.09.17.11.05.02.07.05.09.09.02.04.07.05.13.14.06.09.3.34.32.39.02.04.05,0,.03.04-.01.03-.03.06-.06.15-.03.08-.04.08-.05.15-.01.07-.01.06-.06.06-.05,0-.09-.07-.15-.09-.06-.02-.1-.07-.16-.11-.05-.04-.07-.07-.15-.06-.08,0-.1-.04-.17-.05-.06,0-.2-.04-.25-.07-.05-.03-.11-.05-.17-.05-.07,0-.12-.03-.15-.05-.04-.02-.12-.08-.16-.1-.05-.02-.09-.06-.15-.06-.06,0-.06-.05-.1-.06-.03,0-.07-.03-.11-.08-.04-.05-.06-.05-.11-.06-.04-.01-.08-.02-.12-.05-.04-.03-.08-.03-.12-.03-.05,0-.05.02-.12.03-.07,0-.18-.07-.26-.04-.08.03-.29-.01-.38.02-.09.03-.18.05-.23.06-.05.01-.11,0-.19.03-.08.03-.19.05-.25.06-.05.02-.06.02-.12.04-.06.01-.31.17-.37.23-.07.06-.16.06-.22.16-.06.09-.12.09-.16.14-.04.05-.09.06-.09.12-.01.06-.1.18-.08.23.02.05-.01.07-.03.14-.02.06-.07.07-.1.13-.07.12-.02.05.05.1.07.05.11.04.14,0,.03-.03.15.03.21.05.06.01.05.05.13.09.08.04.09.01.15,0,.06,0,.12,0,.17.02.05.03.14.03.19.05.05.01.1.05.19.03.09-.02.11.01.18.04.08.03.1,0,.17.01.06,0,.12-.04.17-.02.05.02.11-.01.18,0,.06.01.07.03.13.02.06-.01.1-.05.16-.06.06-.02.29-.09.33-.1.03,0,.07.01.08-.03.01-.04.15-.11.18-.14.03-.03.14-.02.18-.08.04-.06.19-.15.24-.2.04-.05.31-.19.35-.21.04-.02.06-.06.07-.12.01-.07.14.03.2.06.04.03.08.04.13.05.06.01.09,0,.13.04.04.04.17.12.21.15.04.03.1.07.14.12.04.05.17.08.17.08,0,0,.02-.07.04.05.03.12.13.19.2.29.08.1.06.02.05.09,0,.07-.05.11-.04.23,0,.12,0,.13-.01.27-.02.14-.05.16-.03.24.02.08,0,.08-.02.15-.01.08-.02.16-.03.24-.01.12-.03.1-.02.25.01.16,0,.13-.03.23-.03.1-.04.26-.03.36,0,.11,0,.15-.02.23-.02.08-.01.13-.02.21,0,.08,0,.18,0,.27s-.05.46-.02.52c.02.05,0,.11-.04.19-.03.07-.06.09-.06.16,0,.07,0,.07-.05.15-.05.08-.01.06-.02.15,0,.09-.02.07-.08.14-.06.07-.11.15-.12.22,0,.07,0,.06-.05.1-.06.04-.04.09-.08.18-.03.09-.03.08-.06.15-.04.07-.01.1-.05.17-.04.07-.02.1-.01.18,0,.08,0,.06-.03.12-.03.07-.03.03-.02.08.06.02.13-.02.17-.03.05,0,.04-.02.09,0,.05.02.11.02.16.02.05,0,.14,0,.2,0,.07,0,.04-.03.08-.08.05-.05.04-.09.08-.13.05-.04.02-.1.06-.19.05-.09.05-.13.06-.21.01-.08,0-.1.02-.19.02-.08.02-.07.05-.12.03-.05.02-.09.02-.16s0-.12.03-.19c.03-.07.02-.09.03-.16,0-.08-.02-.1,0-.19,0-.09-.01-.08.04-.19.05-.11.06-.04.06-.1.01-.07,0-.08,0-.15,0-.06.02-.05.02-.1s-.03-.08-.04-.15c-.01-.07-.01-.08,0-.1,0-.03,0-.09,0-.17,0-.08-.01-.14,0-.19,0-.05,0-.1,0-.14-.01-.06-.01-.12-.01-.19v-.28c0-.08-.03-.04-.02-.11,0-.07.03-.06.01-.1-.01-.04,0-.08,0-.16,0-.08,0-.1.03-.18.03-.08.03-.2.02-.28-.01-.07-.01-.14,0-.21,0-.08.02-.1.02-.17,0-.07,0-.1.03-.15.02-.05,0-.09.04-.17.03-.08,0-.13,0-.19,0-.07,0-.09.02-.16.03-.06.02-.1.02-.15,0-.05-.02-.09-.05-.11-.03-.02-.05,0-.05-.05s-.03-.08-.06-.12c-.02-.04-.02-.08-.02-.15s-.01-.09-.02-.16c0-.07-.02-.08,0-.14.02-.05,0-.07,0-.13,0-.06.03-.05.04-.11,0-.06.03-.09.05-.15.02-.05.02-.11.03-.14.02-.03.03-.06.06-.12.03-.07.06-.14.03-.17-.02-.03,0-.03-.05-.14-.05-.11-.01-.15-.04-.22-.03-.08-.06-.12-.09-.21-.03-.08-.03-.13-.05-.19-.03-.05-.04-.22-.04-.22,0,0,.04-.02.03-.05-.01-.03-.02-.08-.04-.11-.02-.03-.02-.07-.04-.13-.02-.05.02-.07-.02-.13-.03-.05-.06-.1-.1-.15-.05-.06-.03-.07-.04-.12,0-.05-.04-.08-.09-.12-.04-.04-.08-.12-.11-.15-.03-.03-.05-.04-.06-.11-.02-.07-.05-.09-.11-.14-.06-.05-.11-.13-.15-.18-.05-.04-.06-.05-.09-.13-.03-.07-.05-.11-.08-.16-.03-.05-.06-.12-.07-.16-.01-.04.02-.07.02-.16,0-.06,0-.12.02-.17.01-.05.03-.09.02-.14-.01-.05-.02-.09-.02-.15,0-.06-.01-.11-.04-.13-.03-.02-.04-.05-.06-.09-.01-.04-.04-.07-.07-.13-.02-.05-.05-.09-.09-.13-.03-.04-.03-.07-.07-.16-.04-.09-.01-.1-.04-.16-.03-.06-.04-.13-.09-.16-.05-.02-.11-.11-.18-.14-.06-.03-.07-.03-.1-.03-.03,0-.11-.06-.15-.09-.07-.05-.14-.1-.21-.13-.05-.02-.18-.1-.23-.12-.05-.02-.18-.05-.22-.03-.04.02-.03.02-.06.05-.03.03-.09,0-.14,0s-.3,0-.3,0c0,0-.04,0-.07.04-.03.03-.06,0-.15,0-.09.01-.1.01-.09.07,0,.05,0,.07.05.13.04.06.05.05.05.08s.04.06.07.1c.03.04.03.06.04.14,0,.08,0,.11.01.2.02.09.02.15.07.2.05.05.04.1.1.18.06.07.03.07.03.17,0,.09.02.09.07.15.04.05.06.13.11.19.05.07.08.05.13.11.04.05.02.04.07.1.05.06.05.05.1.08.05.03.11.15.16.22.05.07.08.07.13.12.05.05.11.03.17.06.06.02.14,0,.19.01.05,0,.14.01.19,0,.04,0,.12.01.17,0,.06-.01.09-.02.15-.01.06.01.19.2.21.25.03.04.07.08.12.1.05.02.05.07.05.11,0,.03.03.05.04.09.02.04.07.08.1.13.03.05.28.45.31.49.03.04.04.08.03.12-.01.03.01.05.04.11.03.05.02.08.04.11.02.04.04.07.03.11,0,.04.02.08.02.14s.01.08.03.15c.02.07.04.38.05.54,0,.17-.05.06-.09.03-.05-.02-.15-.13-.2-.15-.05-.02-.2-.15-.24-.18-.04-.03,0-.07-.04-.09-.04-.02-.14-.12-.21-.14-.07-.02-.25-.14-.3-.16-.05-.02-.14-.1-.17-.09-.03,0-.11-.02-.14-.05-.03-.03-.17-.1-.22-.14-.12-.06-.25-.11-.38-.15-.05-.01-.05-.07-.05-.12s-.04-.11-.06-.16c-.02-.04-.02-.05,0-.11.02-.05-.01-.07-.04-.12-.03-.04-.01-.06-.01-.11s-.04-.08-.08-.09c-.05,0-.17-.16-.24-.2-.07-.04-.27-.21-.34-.24-.07-.03-.26-.19-.31-.21-.05-.03-.42-.19-.47-.22-.06-.02-.09-.04-.18-.02-.09.02-.19-.02-.3-.04-.09-.02-.18-.02-.27,0-.09.01-.23-.02-.31-.01-.08.01-.21.04-.24.05-.02.01-.05.03-.08.05-.03.02-.09.03-.13.04-.04.01-.07-.04-.1-.03-.03.02-.14.04-.19.07-.05.02-.08.04-.13.05-.06,0-.11.03-.16.06-.07.04-.07.04-.11.05-.05,0-.09.04-.12.07-.03.03-.07.04-.12.03-.04,0-.07.04-.11.07-.03.04-.1.04-.14.07-.03.03-.19.08-.24.13-.05.05-.01.06,0,.12.02.06.04,0,.09.05.05.04.1.08.14.12.05.03.08.08.11.13.02.05.08.07.12.11.04.03.07.07.12.11M11.95,14.06c-.14.09-.22.18-.25.18s-.1.02-.12.05c-.02.03-.07.08-.12.11-.05.04-.21.14-.28.15-.07,0-.12.03-.16.04-.05.02-.07.04-.13.03-.06,0-.19-.02-.24-.02s-.12-.04-.17-.04c-.05,0-.12-.02-.16-.01-.04,0-.03,0-.09,0s-.07.02-.13,0c-.06-.01-.04-.01-.12-.02-.07-.01-.11,0-.11,0l-.03-.04s-.02-.02-.06-.01c-.04,0-.06.02-.1,0-.04-.02-.07.03-.09,0-.02-.04-.01-.02-.05-.07-.03-.05-.07-.05-.05-.08.02-.03.04-.02.07-.06.03-.04.04-.06.03-.11-.01-.04-.02-.05,0-.07.02-.02.05,0,.08-.04.03-.04.05-.06.04-.09,0-.02.02-.04.04-.06.02-.02.04-.02.06-.07.03-.04.05-.05.09-.1s.03-.05.07-.07c.04-.02.05,0,.09-.04.04-.03.05,0,.1-.03.05-.03.06,0,.11-.04.06-.03.09-.01.13-.04.04-.03.05,0,.14-.04.09-.03.15-.03.24-.04.1,0,.2-.03.25-.04.05-.01.22.03.29.03.08,0,.2.04.28.05.07.01.1.05.16.08.06.03.07.06.1.07.04.01,0,.05-.07.05-.07,0-.1,0-.15.03-.05.03-.12.04-.18.02-.05-.02-.1-.02-.15,0-.07.02-.15.04-.22.04-.05,0-.07,0-.14.02-.06.02-.09.03-.16.06-.07.03-.11.04-.16.05-.05.01-.06.04-.13.08-.07.04-.14.06-.2.1-.06.04-.05.07,0,.07.05,0,.07.02.11,0,.04-.03.17-.03.2-.04.04-.01.07,0,.12-.04.05-.03.09-.01.16-.04.07-.03.13,0,.18-.02.05-.02.04-.02.12-.03.08-.01.08-.03.16-.02.07,0,.11.03.18.02.06,0,.17.02.21.01.04-.01.13.02.18,0,.06-.02.14-.02,0,.07M12.85,9.76s-.04,0-.03.06c0,.05,0,.07-.01.09-.01.02-.02.05-.03.07,0,0,0,.03,0,.07.01.04,0,.06.02.1.02.04.06.12,0,.08-.06-.04-.04-.03-.09-.07-.05-.04-.11-.07-.11-.11,0-.04,0-.07-.03-.1-.04-.03-.04-.02-.09-.08-.04-.07-.11-.13-.15-.17-.05-.05-.1-.1-.15-.14-.04-.02-.05-.04-.1-.06-.05-.02-.09,0-.12-.03-.03-.04-.03-.05-.1-.05s-.02.09.02.11c.04.02.07.06.1.08.03.03.08.08.09.12.01.04,0,.04.06.09.06.04.11.07.14.12.04.05.07.03.09.09.02.05.03.06.06.1.02.05.01.09.05.13.04.04.13.17.05.14-.05,0-.09.01-.18,0-.08,0-.14,0-.18-.03-.05-.04-.16-.08-.2-.12-.04-.03-.17-.09-.19-.12-.02-.03-.1-.09-.13-.12-.04-.04-.05-.04-.08-.1-.02-.04-.05-.09-.09-.13-.03-.04-.06-.06-.07-.13,0-.07.03-.06-.03-.12-.06-.06-.13-.07-.13-.14,0-.07.01-.09-.02-.14-.03-.05-.05-.06-.07-.13-.02-.08-.03-.08-.05-.16-.02-.08-.03-.09-.05-.14-.02-.05-.02-.03-.04-.14-.03-.11-.07-.13.02-.13s.13.01.2.02c.07,0,.23.03.27.06.04.03.07.07.15.08.08.01.16.05.26.07.1.03.09.03.14.06.04.03.08.05.13.06.05,0,.1.04.14.09.04.04.07.08.09.12.03.05.07.09.1.11.03.02.07.07.09.11.02.04.05.12.08.13.04,0,.04.06.07.1.03.04.06.1.08.1.02,0,.02.06,0,.07M7.97,11.18c.01-.07.04-.09.09-.14.05-.05.18-.06.21-.11.04-.04.1-.05.14-.1.04-.05.05-.06.13-.08.07-.02.17-.07.2-.08.03-.02.07-.03.12-.05.05-.02.14,0,.19-.03.06-.03.03.02.09.03.1,0,.2,0,.29-.03.09-.02.29-.03.34-.02.05.01.09.04.14.02.04-.02.1,0,.21.03.1.04.44.18.55.22.11.04.1.08.16.1.06.02.1.05.17.1.06.05,0,.08.05.12.06.05.04.07.11.13.07.07.08.13.09.19.02.06.08.14.01.09-.07-.05-.1-.09-.2-.1-.1,0-.25-.07-.38-.09-.13-.02-.29-.04-.36-.08-.15-.06-.3-.1-.45-.13-.09-.01-.16,0-.22-.02-.07-.01-.08,0-.17,0s-.18.03-.23.04c-.05.01-.13-.04-.15.02-.02.05-.04.1-.09.07-.05-.03-.13-.07-.11,0,.02.06.01.1.01.13,0,.03.07.03.12.02.07-.02.14-.02.21-.02.06.01.16.02.24-.01.08-.03.11,0,.19.02.08.02.12-.03.16.03.04.06.1.08.19.07.09-.02.19.01.26.04.07.03.2.08.28.09.08.01.21.08.28.11.08.03.13.11.19.1.06-.01.06,0,.13.02.07.02.16.06-.01.12-.17.07-.26.09-.3.11-.05.03-.15.08-.19.11-.04.03-.11,0-.2,0-.09,0-.18.02-.27.05-.08.03-.18.04-.26.05-.08.01-.13.03-.19-.01-.06-.04-.3-.13-.41-.13s-.16-.04-.18-.05c-.01-.02-.1-.05-.1-.05,0,0-.08-.02-.1-.03-.02-.01-.12-.05-.12-.05l-.09-.04s-.06-.06-.14-.11c-.07-.05-.06-.07-.12-.1-.06-.03-.08-.08-.14-.11-.05-.03-.12-.03-.11-.07,0-.04-.03-.09-.07-.1-.03,0-.07,0-.09-.04-.03-.03-.03-.07-.03-.1,0-.04-.12-.07-.09-.15M16.31,7.97c.05.02.09.06.11.11.02.05.01.04.06.01.04-.02.05,0,.1,0,.05,0,.07.03.12-.01.06-.04.04-.06.04-.11,0-.05,0-.06.02-.1.02-.04.02-.06.01-.11,0-.05-.04-.06-.07-.1-.02-.03-.05-.05-.09-.06-.04,0-.06-.02-.11-.02-.05,0-.08,0-.13.02-.05.03-.06.04-.09.08-.02.04-.05.07-.05.12,0,.01,0,.03-.01.07,0,.04.04.08.1.1M19.36,9.75c.06.07.1.05.17.05.07,0,.05.02.07-.03.02-.05.03-.03.09-.06.06-.03.05-.04.06-.09,0-.05,0-.08-.01-.13,0-.05-.02-.06-.06-.09-.04-.03-.04-.03-.06-.06-.02-.04-.06-.02-.09-.05-.03-.02-.05-.02-.08,0-.03.02-.05.03-.09.04-.04.02-.05.02-.05.05,0,.03,0,.04-.03.08-.02.04-.03.04-.03.09.01.08.01.04.04.11.03.06.02.02.08.09"/>
							<path class="fill-blue" d="M21.72,10.92c-.03-.06-.02-.1-.09-.1-.07,0-.07,0-.12.02-.05.02-.05-.01-.1-.04-.05-.03-.09-.07-.14-.1-.08-.04-.16-.08-.24-.13-.07-.05-.08-.05-.15-.04-.07.01-.09-.03-.13-.06-.05-.03-.11-.04-.16-.06-.05-.02-.13,0-.17-.03-.04-.03-.05-.03-.13,0-.08.03-.17-.02-.25-.02s-.21.02-.29,0c-.08-.02-.32.02-.39.02-.07,0-.18.04-.26.07-.08.03-.05.03-.11.09-.06.06-.08.02-.14.03-.06.01-.01-.04-.08-.01-.07.02-.09.06-.13.09-.04.04-.09.06-.14.08-.07.02-.17.12-.23.2-.06.08-.05.07-.1.15-.05.08-.06.09-.09.17-.04.07-.05.1-.09.15-.04.05-.05.04-.11.09-.06.05-.03.04-.07.06-.03.02-.07.04-.11.03-.04,0-.05.04-.09.08-.04.05-.03.03-.08.07-.05.04-.05.02-.09.04-.04.01-.03.05-.08.08-.05.03-.07.04-.09.07-.02.03-.03,0-.07,0-.04.01-.07.08-.1.12-.03.04-.05.03-.1.03-.05,0-.04.02-.07.07-.03.05-.03.04-.06.06-.03.03-.04,0-.1.03-.07.03-.08.05-.09.07,0,.02-.05.06-.11.09-.06.03-.11.08-.16.14-.06.05-.24.21-.32.3-.07.09-.09.06-.14.11-.05.06-.1.09-.17.19-.07.1-.07.09-.1.12-.07.07-.06.06-.14.15-.08.08-.05.08-.11.13-.06.05-.04.11-.13-.02-.03-.04-.03-.07-.06-.12-.03-.05-.06-.02-.06-.07s-.03-.08-.07-.15c-.04-.07-.04-.05,0-.1.03-.05.02-.05.08-.11.06-.06.09-.11.12-.17.03-.06.05-.11.09-.19.04-.09.04-.08.04-.15,0-.07,0-.07.04-.08.05-.01.09-.11.16-.16.07-.05.1-.12.13-.2.03-.09.08-.17.13-.24.06-.08.08-.09.14-.13.06-.04.13-.14.18-.19.06-.05.12-.07.16-.05.04.02.04.02.1.02.06,0,.06,0,.08.05.02.04.09,0,.12-.03.03-.03.05-.04.14-.07.09-.03.07.02.11-.02.04-.05.1-.13.19-.18.09-.05.19-.19.24-.28.05-.08.22-.26.26-.32.04-.06.1-.11.17-.18.08-.07.1-.13.16-.26.06-.13.09-.15.11-.24.03-.09.01-.06.05-.14.04-.08.02-.12,0-.17,0-.05,0-.1,0-.16,0-.07.02-.1.05-.16.02-.06.02-.08,0-.11-.02-.03-.03-.07-.02-.11.02-.05-.01-.08-.03-.11-.02-.03,0-.06,0-.12,0-.06-.01-.08-.06-.13-.05-.05-.05-.04-.07-.09-.03-.05-.04-.09-.11-.14-.07-.05-.07,0-.14.06-.07.06-.08.05-.13.05-.05,0-.06.04-.13.07-.08.04-.09.05-.18.13-.09.09-.08.04-.15.08-.07.03-.08.02-.17.09-.1.07-.13.04-.24.13-.12.09-.15.07-.23.16-.07.09-.08.08-.09.16-.02.08,0,.02,0,.06s-.05.05-.08.14c-.04.08-.05.05-.03.13.03.08-.03.04-.1.09-.03.03-.07.03-.08.14-.02.11-.04.07-.06.17-.02.09,0,.05-.01.08-.02.03-.01.03-.02.07-.01.05.02.03-.02.07-.03.05-.05.05-.06.11,0,.06-.02.07-.03.1-.02.03-.03.03-.03.08s.01.07,0,.11c-.01.05-.01.09,0,.14.01.04,0,.08,0,.13s0,.07,0,.07c0,0,0,.03,0,.06.01.03.04.02.05.04,0,.02.01.08,0,.11-.01.03-.04.05-.08.08-.04.04-.09.13-.13.18-.03.05-.06.09-.1.19-.04.1-.08.12-.09.16,0,.04,0,.05-.05.09-.05.04-.05.03-.08.05-.04.02-.03.04-.08.09-.05.05-.06.06-.08.14-.03.07-.06.11-.09.17-.03.05-.04.05-.05.13-.01.07-.04.07-.1.11-.06.04-.05.04-.1.08-.05.05-.02-.06-.02-.13s-.01-.07,0-.13c0-.06-.02-.06-.03-.11-.01-.05.01-.08-.02-.12-.03-.04,0-.05.02-.05.02,0,.03-.04.03-.04v-.07s-.03-.07-.04-.1c0-.04,0-.09.02-.13.02-.04.02-.07,0-.12-.02-.05,0-.05.02-.12.02-.07,0-.11,0-.16,0-.06,0-.08,0-.12.01-.04.02-.09.01-.12-.01-.03,0-.05-.01-.12-.01-.07,0-.09,0-.16.01-.11-.02-.11.01-.19.03-.08,0-.05.03-.2.03-.15,0-.09.06-.13.06-.04.07-.1.14-.19.07-.08.04-.09.08-.12.04-.02.06-.05.11-.11.06-.07.05-.05.09-.08.04-.03.05-.04.06-.09,0-.05.04-.11.06-.17.02-.05.04-.1.07-.14.03-.05.05-.08.04-.13-.01-.05,0-.1.01-.15.01-.06.03-.06.01-.12-.01-.05,0-.07.01-.14.02-.07,0-.08.02-.14,0-.06.03-.07.02-.1,0-.03,0-.08,0-.14,0-.07.02-.09.01-.15-.01-.06,0-.09,0-.15,0-.06-.01-.09-.02-.16,0-.07-.03-.11-.05-.15-.02-.04-.04-.1-.06-.13-.02-.04-.04-.08-.05-.12,0-.03,0-.04-.03-.09-.03-.06-.06-.09-.1-.16-.04-.07-.02-.1-.06-.14-.04-.04-.06-.05-.08-.1-.02-.05-.08-.1-.11-.14-.03-.04-.02-.07-.07-.09-.05-.02-.05-.09-.06-.14,0-.04-.07-.12-.12-.16-.04-.03-.07-.06-.09-.09-.02-.03-.02-.06,0-.11,0-.05-.03-.09-.06-.15-.02-.06-.08,0-.12.02-.04.02-.07.07-.09.1-.02.03,0,.07,0,.12,0,.06-.03.08-.06.11-.02.03-.06.08-.06.08,0,0-.05.07-.08.12-.02.04-.06.08-.1.1-.04.02,0,.03-.06.11-.06.08-.07.11-.12.18-.05.07-.09.14-.12.19-.02.05-.04.14-.06.18-.02.04-.07.09-.07.09l-.04.07v.12s-.07.13-.11.21c-.04.08-.01.05-.01.05,0,0,0,.05-.03.11-.03.06-.02.07-.03.14,0,.06-.01.12,0,.18,0,.06,0,.08-.03.16-.02.08-.01.06,0,.09.02.04.01.03.02.06,0,.03.03.08.03.12,0,.03.03.1.05.13.01.03,0,.06,0,.11,0,.05,0,.06.04.09.05.03,0,.05,0,.11s0,.05,0,.1c0,.05.02.04.06.08.04.04.04.03.04.06s-.01.03,0,.07c.02.05.03.06.06.11.03.05.04.08.06.12.03.04.05,0,.07.04.02.03.06.06.11.1.05.04.07.04.11.04s.07.02.11.01c.04,0,.07-.02.12-.03.04-.01,0-.08-.03-.13-.03-.04-.04-.06-.06-.11-.03-.05-.02-.07-.04-.08s-.04.02-.05,0c-.02-.03-.04-.05-.07-.06-.03-.03-.06-.05-.1-.07-.04-.01-.06-.07-.09-.1-.03-.03-.01-.06-.02-.09,0-.03-.01-.06-.02-.11,0-.05,0-.07-.02-.09-.02-.01-.02-.06-.06-.1-.04-.04-.05-.03-.03-.07.02-.04.02-.07.02-.15,0-.08-.03-.08-.04-.15-.02-.06-.04-.03-.07-.1-.03-.07.01-.08.03-.2.02-.12,0-.05.02-.1.02-.04.04-.09.07-.12.04-.05.03-.07.06-.14.03-.07.04-.12.07-.18.03-.07.03-.05,0-.09-.03-.05.03-.05.08-.06.05-.01.05-.04.06-.1.02-.06.04-.08.08-.15.04-.07.04-.07.06-.13.02-.06.05-.09.11-.13.05-.05.04-.05.05-.08,0-.02,0-.03.03-.07.04-.04.03-.04.07-.09.04-.04.06-.07.12-.14.07-.07.04-.03.05,0,.01.03.01.05.04.11.03.06.03.04.05.07.02.03.04.07.04.1,0,.03.03.08.05.11.02.03.06.09.08.12.02.02.04.03.04.06,0,.02.02.06.04.12.02.06.06.08.08.18.02.1.05.1.09.17.04.07.03.09.04.18.01.09.01.1.03.18.01.08.03.04.03.1,0,.06,0,.1.02.15.01.06,0,.08,0,.17,0,.09.02.08.03.12.01.04.01.14,0,.19-.01.04-.02.04-.03.1-.01.05,0,.11,0,.16.02.05.01.05-.03.09-.05.04-.05.04-.1.09-.04.03-.07.07-.09.11-.03.05-.06.07-.08.09-.02.02-.05.02-.1.08-.05.07-.05-.02-.05-.07,0-.06-.02-.04-.05-.08-.03-.04,0-.02-.04-.04-.03-.03-.02-.04-.05-.08-.03-.04-.02-.04-.03-.09,0-.05-.02-.06-.03-.08-.01-.01-.02-.04,0-.08.03-.05.01-.04.02-.09,0-.05,0-.04-.02-.07,0-.03-.04-.05-.07-.08-.02-.03-.03-.03-.01-.08.02-.05.02-.08.03-.13,0-.03.01-.06.03-.08.02-.02.02-.06,0-.08-.01-.02-.02-.05-.05-.09-.01-.04-.02-.04-.05-.01-.03.03-.04.05-.05.12,0,.06,0,.06-.04.1-.03.04-.03.07-.06.14-.03.06-.02.06-.02.14s0,.06,0,.12c0,.06,0,.06.01.11,0,.05.02.02.03.08,0,.06.02.07.02.12s.02.06.04.14c.02.08.03.1.05.17.02.07.03.17.04.23.01.06.02.07.03.12,0,.05-.01.04-.03.11-.02.06,0,.05,0,.11,0,.05.02.03.02.09s-.02.02-.06.1c-.03.08,0,.05,0,.12s0,.32,0,.36c0,.06.02.16,0,.19-.02.03-.03.27-.03.33,0,.05-.02.17-.01.21,0,.03,0,.07-.01.1-.01.04,0,.04,0,.09,0,.05,0,.23,0,.26,0,.04-.01.04,0,.08,0,.04,0,.04-.02.09-.03.05.01.05.02.11.01.06,0,.08-.02.15-.02.07.03.09.03.14,0,.06.03.08.02.14,0,.06,0,.09-.02.13-.01.05.07.02.08.08,0,.06.02.09.03.15,0,.06.03.06.09.08.06.02.03.01.03.07s0,.06.02.13c.01.07.01.03.03.08.02.05.02.05.03.09.01.04.07.05.11.12.03.07.03.05.07.08.04.03.04.04.07.1.02.07.05.08.09.08.05,0,.07-.02.06.08-.01.11-.02.08-.07.19-.05.11-.04.09-.05.16,0,.07.02.08.08.18.05.1.02.08.01.16-.01.08-.02.07,0,.14.03.06.01.04-.02.13-.03.09-.02.08-.01.15,0,.08.02.05,0,.16-.02.1-.02.1-.05.18-.03.08.01.03.04.08.02.05-.02.07-.03.17-.01.1-.02.09-.03.18,0,.09.02.07,0,.15,0,.09-.02.1-.03.18-.01.07-.02.09,0,.2,0,.11,0,.1-.02.17-.01.07,0,.05.02.1.03.05.03.06,0,.16-.02.09,0,.08-.01.13,0,.06.01.05-.01.14-.02.09.01.09,0,.15,0,.05,0,.05,0,.15.02.1.01.12-.01.19-.02.07,0,.05.01.17.02.12-.02.28-.01.46,0,.18,0,.16,0,.27,0,.11,0,.07,0,.13-.01.06,0,.05.03.09.02.04.02.06,0,.13,0,.07,0,.05-.02.11-.02.06.02.03.04.11.02.07,0,.09.03.17.02.08.02.06.03.1.02.03,0,.04-.02.08-.02.04,0,.04.05.09.05.05.03.04.07.09.04.05.02.03,0,.05-.02.02-.04.02-.02.05.03.03.04.04.07.08.04-.03.07-.02.1-.02.02,0,.06,0,.12.04.05.04.06.01.12.03.06.02.14.06.16.09.03.02.13.02.2.04.07.01.06-.03.02-.11-.03-.07,0-.09,0-.17,0-.07-.03-.08-.07-.15-.05-.06-.04-.07-.04-.11s0-.05-.03-.1c-.03-.05-.03-.08-.07-.13-.04-.05-.04-.1-.09-.17-.05-.07-.04-.07-.05-.14,0-.06,0-.08,0-.18s-.01-.19,0-.26c.03-.06.01-.08-.02-.11-.03-.02-.03-.08-.05-.17-.02-.09-.03-.1-.05-.2-.02-.1-.02-.08-.02-.15,0-.06-.01-.13-.04-.19-.02-.07-.02-.11-.04-.18-.02-.07.01-.08.05-.13.04-.04,0-.07,0-.14,0-.07,0-.12,0-.19,0-.04,0-.09,0-.13,0-.04,0-.09,0-.13,0-.04,0-.09,0-.14,0-.07,0-.06,0-.14.01-.07.01-.1.04-.17.02-.08.01-.09,0-.2-.01-.1.01-.12.03-.15.02-.03.03-.03.02-.11-.01-.08.01-.08,0-.14,0-.05.02-.07.01-.17,0-.09.02-.1.07-.16.05-.06.04-.08.02-.1-.02-.02-.02-.05-.02-.11,0-.06.02-.06,0-.13-.01-.07,0-.07,0-.14s.01-.05.02-.14c.01-.09,0-.1,0-.16,0-.06.01-.09.05-.13.04-.04,0-.07-.03-.15-.03-.07-.03-.1-.06-.19-.03-.09,0-.1-.01-.16,0-.07-.03-.06-.06-.13-.03-.07-.05-.04.01-.1.06-.06.08-.1.12-.17.04-.06.01-.04.02-.08,0-.04.05-.05.1-.09.04-.03.05-.07.07-.14.02-.06.04-.06.1-.1.06-.03.08-.02.16-.02s.12,0,.17.05c.05.04.07.02.12,0,.05-.02.09-.02.14,0,.06.02.07.02.15.02.07,0,.07.03.11,0,.04-.02.17.03.22.05.06.02.04.02.02.09-.02.07.01.09.02.13,0,.05.03.06.02.12,0,.06.05.08.08.1.03.02.07.06.07.12s.06.09.09.14c.03.05.12.11.18.18.06.07.11.09.16.14.05.05.09.06.13.08.05.02.09.08.15.1.06.02.12.04.17.06.06.02.18.06.25.07.06,0,.11.02.14.03.03.01.1.02.13.05.03.03.6.01.67.02.08,0,.2-.02.24,0,.04,0,.15-.03.18-.05.03-.02.18-.07.24-.06.07.01.06-.01.09-.04.03-.03.04,0,.05-.05,0-.05-.02-.08-.08-.12-.07-.04,0-.04-.03-.08-.03-.04-.01-.05-.02-.1,0-.05,0-.07,0-.14,0-.08,0-.07-.05-.1-.04-.04-.05-.05-.08-.09-.03-.05,0-.05,0-.13,0-.07-.04-.08-.09-.13-.05-.05-.05-.07-.11-.13-.07-.06-.16-.14-.2-.16-.04-.02-.03-.09-.1-.12-.07-.02-.21-.12-.25-.15-.04-.02-.22-.08-.28-.12-.06-.04-.28-.03-.34-.04-.06-.01-.28-.05-.37-.03-.09.01-.11,0-.17.02-.07.01-.15,0-.23.04s-.19,0-.29,0c-.1.01-.21,0-.26.01-.06,0-.12,0-.17,0-.04,0-.11-.04-.18-.03-.08.01-.15-.03-.17-.03-.02,0-.08-.01-.11-.01-.02,0,.04-.04-.12-.02-.16.01-.18-.01-.13-.04.05-.03.06-.09.12-.13.06-.04.11-.08.18-.14.06-.06.07-.09.11-.12.04-.03.11-.1.12-.12,0-.02,0-.06.06-.11.05-.05.15-.1.2-.14.05-.04.09-.1.15-.12.04-.01.08-.04.11-.07.05-.04.09-.07.28-.15.19-.08.14-.04.19.03.05.08.09.03.15.08.06.04.12.09.19.11.07.03.13.09.2.12.07.03.17,0,.26,0,.09-.02.1-.02.18-.06.07-.03.09.03.17.03s.14.05.19.04c.05,0,.15.01.23.02.08,0,.12-.02.16-.02.04,0,.2-.01.26-.06.06-.05.04-.04.14-.08.1-.04.11-.07.22-.12.1-.06.22-.06.32-.11.11-.04.11-.09.2-.1.09,0,.11-.08.23-.17.12-.09.35-.32.41-.37.07-.05.12-.07.2-.12.08-.04.09-.07.13-.13.04-.05-.01-.06-.04-.12M16.16,10.53c.03-.07.04-.05.04-.15s0-.09.01-.17c.01-.09-.02-.05.03-.12.04-.08.04-.1.09-.13.05-.03.07-.06.07-.09,0-.03.02-.06.08-.09.06-.03.08,0,.12-.07.04-.07.04-.06.09-.12.05-.07.06-.05.08-.09.01-.04.01.02.07-.03.06-.05.07-.06.11-.1.04-.04.07-.02.15-.12.07-.1.14-.15.22-.19.08-.04.1-.03.16-.1.06-.07.08-.03.15-.08.07-.06.08-.17.11-.09.02.09.03.07.06.14.03.07.04.09.04.13,0,.03-.02.06.01.09.03.04-.02-.02,0,.09.02.11-.03.04.08.17.04.04-.02.14-.04.19-.02.05-.02.11-.04.16-.02.05.02.03,0,.08-.03.06-.03.07-.06.11-.03.04-.05.08-.06.12,0,.04-.07.11-.08.16-.01.05,0,.05-.04.11-.04.06,0,0-.07.05-.07.06-.08.07-.12.14-.04.07-.06.08-.1.13-.04.05-.04.06-.06.09-.02.02-.02.05-.08.1-.05.05-.07,0-.12.06-.05.05-.04.08-.1.1-.06.02-.07.03-.1.07t-.08.06s-.07.03-.09.05c-.02.01-.03.04-.05.01-.03-.02-.04,0-.07-.03-.03-.03-.02-.05,0-.1.02-.05.01-.08.05-.1.04-.02.04-.04.07-.08.03-.05.05-.07.07-.07.02,0,.02-.02.03-.05,0-.04,0-.07.02-.11.01-.02.01,0,.06-.03.05-.02.08-.04.09-.06,0-.02,0-.04,0-.06,0-.03.07-.07.08-.11.01-.03.01-.03.05-.06.04-.03.07-.06.09-.11.02-.05.03-.06.07-.11.04-.05.07-.06.1-.09.03-.03.03-.02.05-.09.01-.06.05-.12-.04-.08-.09.04-.11.08-.16.12-.05.04-.13.11-.17.12-.04.02-.06.03-.11.09-.05.06-.08.08-.14.13-.06.05-.07.08-.1.1-.04.02-.05.04-.08.11-.03.07-.08.16-.13.23-.05.06-.05.1-.07.13-.01.03-.02.06-.09.11-.07.05-.12.12-.17.08,0-.04-.01-.06-.02-.1,0-.05,0-.07.01-.1,0-.03,0-.03,0-.12,0-.09,0-.08-.02-.13-.02-.05-.02-.04,0-.11M17.57,13.6s.07.01.12.01c.05,0,.09,0,.13.01.04.01.06.03.13.06.07.04.1.05.15.06.05.02.09.04.13.07.04.03.07.06.1.11.03.05.09.03.14.05.04.03.09.09.14.13.04.04.08.04.12.08.04.04.08.05.1.07.02.02.07.01.12.02.04.01.07.03.12,0,.05-.03,0-.09-.04-.08-.03,0-.04,0-.06-.06-.02-.06-.03-.05-.08-.06-.05,0-.1-.08-.15-.12-.04-.03-.12-.09-.17-.14-.05-.05-.08-.09-.12-.09-.03,0-.05-.05-.05-.07,0-.03-.06-.06-.11-.07-.05,0-.13-.07-.23-.11-.1-.03-.15-.08-.07-.09.08-.01.15,0,.18.02.04.01.06-.02.12-.03.04,0,.09-.01.12-.04.04-.03.08,0,.1.02.01.02.08,0,.13.01.05,0,.09.02.14.02.06,0,.12,0,.17.03.05.02.09.02.16.05.06.03.11.08.17.1.05.02.01.04,0,.08,0,.03.01.02.06.05.04.03.07.07.09.09.02.02.03.02.03.07s.05.02.07.04c.02.01.03.05.03.05,0,0,.04.03.04.06,0,.03.03.03.06.06.03.04.03.06.06.1.02.04.05.06.07.09.01.03.03.07.03.12s.05.01.02.06c-.03.05-.04.02-.1.03-.06.01-.07,0-.09.03-.02.04-.03.02-.07.04-.03.02-.06.06-.1.05-.04,0-.04-.02-.08,0-.04.03-.03.03-.08.03-.05,0-.1-.02-.17,0-.07.02-.16-.01-.25-.03-.09-.02-.23,0-.31,0-.08,0-.17-.06-.22-.09-.06-.02-.06-.06-.14-.12-.09-.07-.15-.1-.23-.15-.06-.04-.12-.08-.18-.13-.03-.03-.04-.08-.08-.14-.03-.07-.07-.09-.09-.13-.02-.04-.06-.07-.08-.11-.02-.04,0-.08.01-.12M21.06,11.11c-.06.07-.1.11-.16.17-.06.05-.15.13-.19.17-.04.03-.06.08-.07.11-.01.03-.03.01-.1.05-.06.04-.1.05-.15.09-.06.04-.08.06-.13.09-.05.03-.03.04-.12.04-.09,0-.14,0-.22.02-.08.02-.07.03-.15,0-.08-.02-.22,0-.22.06,0,.05-.03.05-.06.04-.04,0-.16-.02-.21-.03-.05-.01-.09,0-.11.02-.03.02-.08.01-.13,0-.05,0-.04,0-.07-.03-.04-.03-.1,0-.15,0-.05,0-.03-.03-.11-.02-.07,0-.13,0-.2-.02-.05-.02-.07-.06-.14-.06-.07,0-.05-.01-.08-.04-.03-.03-.05,0-.08-.03-.03-.04-.05-.07-.03-.11.02-.04.07-.03.13-.06.06-.04.15-.05.19-.09.04-.04.1-.03.13-.08.04-.05.05-.05.05-.05,0,0,0-.01.07,0,.06.01.14.04.2.01.06-.03.12-.01.18,0,.06,0,.17.02.23,0,.06-.01.21.01.27,0,.06,0,.13,0,.19-.03.06-.03.08-.02.13-.04.05-.02.08-.03.14-.05.06-.02.08.02.11-.04.03-.06-.01-.09-.14-.08-.12,0-.18.02-.22-.02-.05-.03-.05,0-.14-.02-.09-.01-.14-.01-.24-.02-.1,0-.17,0-.25-.02-.08-.01-.13-.02-.17,0-.04.02-.08.02-.11.01-.02,0,0-.06-.08-.03-.07.02-.07.03-.12.03-.06,0-.09,0-.12.05-.03.04-.04.08-.08.05-.04-.02-.17.05-.11-.03.03-.03.04-.05.1-.09.06-.04.11-.06.17-.13.06-.07.11-.08.18-.12.08-.04.08-.05.13-.08.06-.04.08-.03.15-.05.07-.03.07,0,.14-.04.07-.04.1-.06.15-.04.05.03.13.03.19.02.07,0,.14,0,.2-.03.07-.04.15-.04.17,0,.02.04.11.03.2,0,.09-.02.17.02.24.05.07.03.21.07.28.1.06.03.12.03.16.05.04.02,0,.03.06.09.06.06.15.08.19.11.04.03,0,.03-.06.1"/>
							<path class="fill-blue" d="M21.36,19.3c-.08.03-.18-.01-.3,0-.12,0-.23,0-.31,0-.06,0-.11,0-.16.02-.05.01-.05-.02-.06-.03-.03-.01-.12-.01-.16,0-.04.01-.07.01-.12.01s-.14,0-.2,0c-.06,0-.08,0-.16,0-.07.02-.15.01-.2.01-.05,0-.07-.02-.11-.01-.04,0-.17,0-.21,0s-.12-.01-.16,0c-.05,0-.06,0-.04-.04.01-.04,0-.02,0-.13,0-.11,0-.07,0-.16,0-.09,0-.08.01-.14.01-.06.01-.06,0-.14-.01-.08.03-.07.07-.08.04-.01.05-.01.09-.02.04,0,.05-.02.08-.02.03,0,.05.03.08,0,.03-.04.04-.05.08-.05s.1-.02.14-.02c.03,0,.07,0,.1-.04.02-.03.06-.04.11-.03.04,0,.06-.04.11-.09.04-.04.03-.06.02-.1-.02-.05-.05-.1-.08-.14-.06-.06-.02-.08-.02-.15s.01-.04,0-.1c-.01-.06-.02-.07-.05-.11-.03-.04.02-.02.02-.05,0-.03,0-.06-.04-.11-.03-.05-.04-.05-.05-.08-.02-.03,0-.02.01-.07,0-.04-.01-.05-.04-.09-.02-.04.02-.03-.02-.07-.04-.04-.02-.05-.02-.08,0-.03,0-.05-.01-.08,0-.03-.03-.09-.06-.11-.03-.01-.04.02-.09.03-.04.02-.08,0-.13.02-.05.01-.03.03-.05.03-.02,0-.04,0-.06.02-.02.02-.05-.01-.07.02-.02.03-.04.02-.08.03-.03,0-.04-.05-.06-.02-.02.03-.05.02-.09.03-.05,0-.04-.04-.05-.09-.01-.04-.02-.08-.04-.13-.02-.05-.06-.06-.08-.11-.03-.04-.06-.09-.11-.14-.05-.05-.03-.06-.07-.09-.04-.03.09-.13.05-.15-.06-.04-.07-.01-.15-.08-.03-.03-.08-.03-.11-.04-.03,0-.04.02-.03-.01.02-.03.03-.07.07-.07.04,0,.08-.07.13-.09.05-.02.07-.05.07-.14,0-.09-.02-.08-.05-.13-.03-.05-.03-.06-.04-.11-.02-.05-.03-.06-.07-.07-.03-.01-.04-.04-.08-.08-.04-.04-.08-.05-.11-.08-.03-.03-.06-.04-.11-.03-.05.01-.03-.02-.07-.03-.04-.01-.1-.02-.11.02-.02.04-.05.04-.1.08-.05.04-.03.04-.05.1-.02.06-.06.05-.1.08-.04.02-.04.02-.06.08-.02.06-.03.04-.05.1-.02.07-.03.07-.02.14,0,.07.02.03.03.09,0,.07.02.08.03.13.01.05.03.06.08.08.05.03-.05.03-.07.05-.03.03-.03.03-.03.07s-.01.04-.04.06t-.06.07s-.05.04-.09.09c-.04.05-.06.04-.09.06-.03.02-.04.05-.05.09,0,.04.01.03,0,.09-.02.06-.05.06-.09.15-.04.09-.05.17-.07.23-.02.06-.03.06-.04.1-.01.05.02.02.04.07.02.04-.02.04-.04.04-.02,0-.04,0-.09.04-.04.03-.09.04-.14.04-.02,0-.07,0-.1.03-.03.02-.06.04-.11.03-.05-.01-.07.02-.1.1-.04.08-.01.07,0,.13,0,.06.05.05.1.06.05,0,.09.03.14.05.05.02.21-.01.25-.01.05,0,.1-.02.13-.05.03-.03.02,0,.06.04.03.04.02-.04.05-.03.04.01.02.02.04.08.02.06,0,.05-.02.1,0,.05-.02.05-.04.09-.01.04-.03.03,0,.09.03.06,0,.02,0,.08,0,.04,0,.06-.03.1-.03.05-.03.07-.03.14,0,.07,0,.05-.01.11,0,.06-.03.08-.06.13-.02.05-.04.03,0,.09.04.05-.01.05-.02.1,0,.04-.01.14,0,.21-.05.02-.06.01-.12.05-.05.03-.1,0-.14,0-.04-.01-.05-.04-.08-.02-.03.01-.05.02-.07.01-.02,0-.08.01-.11.02-.04,0-.03.02-.04.07-.01.05.03.05.04.07.02.02.04.05.07.09.03.04.03.05.06.08.02.03,0,.05,0,.07,0,.02,0,.03.03.05,0,0,.01.01.01.02,0,0,.1-.03.12-.01.02.01.02.03.06,0,.04-.03.05-.02.12-.02.07,0,.09-.01.16-.03.07-.02.25-.01.32-.01s.1,0,.19-.02c.09-.01.18-.02.22-.02.04,0,.04.02.09.03.06.01.07,0,.16,0,.09.01.19.01.29,0,.1-.02.19.02.26,0,.07-.02.03,0,.08.03.05.02.07-.03.14-.03.07,0,.17-.01.23,0,.06.02.15.02.23.02.07,0,.1,0,.16,0,.06,0,.05.02.09.03.05,0,.04-.02.09-.03.04,0,.04,0,.08,0,.04,0,.11-.02.15,0,.04.02.08,0,.14.01.06,0,.17.01.22,0,.06,0,.18.01.26.03.07.02.23.02.3.04.06.01.07,0,.06-.03-.01-.02,0-.04,0-.06.01-.02.03-.02.07-.05.04-.03.04-.04.05-.06,0-.03.02-.05.04-.07.01-.01.05-.04.09-.06.05-.02.04-.02.04-.06,0-.04.02-.06.05-.12.02-.05-.06-.07-.13-.04M17.94,15.91s.04-.02.05-.03c0-.01.04-.05.05-.06,0-.01.02-.03.03-.04.01-.01.02-.03.02-.05,0-.02,0-.04.02-.04.02,0,.03.02.06,0,.03-.01.04-.02.06-.01.02,0,.03,0,.05.03.02.02.02.03.02.05,0,.02,0,.05.03.07.02.03.02.06.05.06.03,0,.03,0,.04.03.01.04,0,.04,0,.07,0,.03,0,.05-.02.06-.02.01-.03.02-.04.05-.01.03-.01.05-.03.07-.01.02-.01.04-.04.03-.03,0-.05,0-.06.02-.01.02-.02.04-.05.02-.03-.02-.05-.04-.07-.06-.02-.02-.05-.04-.07-.05-.02-.01-.05,0-.04-.03,0-.03,0-.04-.02-.06-.03-.02-.01-.03-.03-.05-.01-.01-.02-.02-.02-.04,0-.02,0-.04.01-.05M18.79,19c-.02.06,0,.07-.02.11-.02.04,0,.06-.01.11-.01.05,0,.08-.04.12-.03.05-.03-.03-.08-.01-.05.01-.08.01-.11,0-.03-.02-.02-.04-.07-.03-.05.01-.06,0-.12.03-.06.02-.08-.01-.12,0-.04.01-.09-.02-.16,0-.06.02-.07-.02-.11-.02-.03,0-.02-.04-.08-.03-.06.01-.11-.01-.17,0-.03,0-.06,0-.09,0,.02-.05.04-.17.04-.2,0-.04,0-.05,0-.15.01-.09.01-.09,0-.16-.02-.07,0-.08-.02-.13-.02-.06,0-.09,0-.14.01-.05.03-.04.02-.07,0-.03,0-.05.03-.1.02-.04.03-.09.03-.14,0-.05,0-.05.04-.11.04-.06.02-.09.04-.14.02-.05,0-.06-.05-.11-.04-.04-.05-.09-.08-.12-.03-.03-.02-.06-.02-.06l-.02-.06-.02-.08s-.02-.05-.01-.07c0-.02.03-.03.03-.07,0-.04,0-.07.02-.11.02-.04,0-.05.02-.11.01-.06-.01-.05,0-.11,0-.04,0-.09,0-.13,0-.05,0-.05.05-.06.04-.01.05-.04.1-.07.04-.03.04-.04.09-.06.04-.02.04-.05.09-.07.05-.02.06-.04.12-.04.06,0,.08-.02.15-.02.07,0,.08.04.1.06.02.02.06.05.1.07.04.02.05.06.06.13,0,.07.02.08.03.14.02.06.03.07.04.13,0,.05.02.09.04.14.03.05.03.03,0,.05-.03.01-.06,0-.14.04-.08.03-.08.03-.12.07-.04.04-.07.05-.12.06-.06.01-.03.02-.08.07-.05.04-.08.04-.09.09-.01.06.06.04.08.07.02.04-.01.08-.02.14,0,.06.01.03.03.06.02.03.03.05.03.11,0,.06.01.04.04.07.03.03.03.02.03.07,0,.05.02.04.03.07.01.03,0,.06.03.12.04.07.02.1.03.18,0,.08.02.08.03.16.01.07.03.05.06.1.02.04,0,.05.03.09.03.05.01.08.03.12.02.05.03.02.07,0,.04-.01.07-.04.15-.06.08-.02.05,0,.03.06M19.08,18.43c-.06.02-.08.02-.13.06-.04.03-.04,0-.1.03-.06.03-.08.1-.11.02-.04-.08-.05-.12-.06-.18-.02-.06,0-.07-.05-.1-.05-.03-.05-.06-.05-.09,0-.03-.02-.02-.02-.09,0-.06,0-.04-.04-.1-.05-.06-.05-.05-.06-.11,0-.06.02-.02-.03-.1.04-.02.04-.03.08-.03s.06.02.07-.02c.01-.04,0-.04.04-.05.04,0,.04.03.07,0,.03-.02.05-.02.06-.04.01-.02.03-.05.05-.03.01.02.06.05.06.11,0,.06.02.08.02.12,0,.04.02.07,0,.13,0,.06-.05.07.01.12.06.05.12.11.18.05.06-.05.07-.03.1-.08.02-.04.05-.07.05-.11,0-.04,0-.08,0-.12,0-.03,0-.06-.02-.1-.01-.03-.03-.02-.03-.05,0-.03,0-.04-.04-.06-.04-.03-.03-.03-.03-.08,0-.05-.02-.09,0-.08.02,0,.06.03.1.02.05-.01.06,0,.1-.03.04-.04.07-.03.12-.04.05-.01.04.02.05.06.02.04,0,.04.03.12.03.08.03.08.06.13.03.05-.01.03.02.07.03.04.05.03.05.08,0,.06,0,.06.02.11.02.05.01.06.04.12.03.06.06.08-.01.12-.07.05-.09.06-.14.06-.05,0-.09.02-.13.04-.04.02-.07.03-.11.04-.04,0-.05.02-.11.02-.06,0-.07.02-.13.04"/>
							<path class="fill-nmd" d="M4.2,25.01h3.48v-3.47h-3.48v3.47ZM21.61,25.01h3.48v-3.47h-3.48v3.47ZM4.2,7.66h3.48v-3.47h-3.48v3.47ZM21.61,7.66h3.48v-3.47h-3.48v3.47ZM14.64,0l2.46,2.45-2.46,2.46-2.46-2.46,2.46-2.45ZM14.64,24.3l2.46,2.45-2.46,2.46-2.46-2.46,2.46-2.45ZM2.46,12.16l2.46,2.45-2.46,2.46-2.46-2.46,2.46-2.45ZM26.83,12.16l2.46,2.45-2.46,2.46-2.46-2.46,2.46-2.45Z"/>
							</g>
						</g>
					</svg>
				</div>
				<p class="intro-logo__note"><strong>Loading...</strong> (should not take long)</p>
			</div>
		</div>

		<!-- =========================================================
			SVG SPRITES (icons for hex tiles) — keep IDs unchanged
			========================================================= -->
		<svg width="0" height="0" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true" focusable="false">
			<!-- CC -->
			<symbol id="hex-cc" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-cc" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<path class="fill-base" d="M107.35,45.94l-10.82-18.75-10.59-18.35c-1.55,2.65-3.09,5.31-4.64,7.96l8.29,14.37,8.53,14.77,2.15,3.72-2.14,3.71-8.53,14.77-8.29,14.35-2.51,4.35h-42.93l-2.51-4.35-8.29-14.35-8.53-14.77-2.14-3.71,2.15-3.72,8.53-14.77,8.29-14.36,2.5-4.33h38.33c1.55-2.67,3.11-5.33,4.66-8H31.25l-2.52,4.37-10.59,18.34-10.82,18.75-2.15,3.72,2.14,3.71,10.82,18.75,10.58,18.33,2.54,4.39h52.17l2.54-4.39,10.58-18.33,10.82-18.75,2.14-3.71-2.15-3.72ZM70.98,6.45c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.41-1.27-2.41-2.28s.59-2.24,2.41-2.24ZM66.93,6.45c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24Z"/>
				</g>
			</symbol>

			<!-- BDM -->
			<symbol id="hex-bdm" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-bdm" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<g>
						<path class="fill-base" d="M16.03,59.29c.24-.14.27-.38.17-.56l-.14-.24-.74.43.11.2c.13.23.35.32.6.17Z"/>
						<path class="fill-base" d="M18.29,62.49l-.19-.34-2.03,1.17.19.34c.35.61.83.75,1.57.32.74-.43.79-.92.46-1.49Z"/>
						<path class="fill-base" d="M14.86,59.5l-.14-.24-.81.46.14.24c.14.24.39.39.66.23.27-.16.31-.42.15-.69Z"/>
						<path class="fill-base" d="M107.36,45.94l-10.82-18.75-10.6-18.34-2.52-4.37H31.25l-2.52,4.36-10.59,18.35-10.82,18.75h9.23l8.53-14.77,8.29-14.37,2.5-4.32h42.93l2.5,4.33,8.29,14.36,8.53,14.77,2.15,3.72-2.14,3.71-8.53,14.77-8.29,14.35-2.51,4.35h-42.93l-2.51-4.35-8.29-14.35-8.53-14.77H7.31l10.82,18.75,10.58,18.33,2.54,4.39h52.17l2.54-4.39,10.58-18.33,10.83-18.75,2.14-3.71-2.15-3.72ZM13.44,60.73l-1-1.74,3.72-2.15.94,1.63c.37.64.62,1.49-.18,1.96-.44.25-.87.13-1.11-.12.08.38,0,.89-.51,1.19-.62.36-1.31.16-1.85-.77ZM15.46,64.22l-.92-1.6,3.72-2.15.93,1.61c.67,1.15.64,2.39-.65,3.13-1.28.74-2.4.17-3.06-.99ZM19.49,71.2l-.62-1.07,2.03-1.17-2.5.36-.34-.6,1.56-1.92-2,1.15-.61-1.06,3.72-2.14.72,1.26-1.58,2.09,2.62-.28.72,1.25-3.72,2.15Z"/>
					</g>
				</g>
			</symbol>

			<!-- NMD -->
			<symbol id="hex-nmd" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-nmd" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<g>
						<path class="fill-base" d="M93.26,70.32c-.74-.43-1.19-.23-1.52.35l-.19.34,2.03,1.17.2-.34c.35-.61.24-1.09-.5-1.52Z"/>
						<path class="fill-base" d="M107.36,45.94l-10.82-18.75-10.6-18.34-2.52-4.37H31.26l-2.52,4.37-10.6,18.34-10.82,18.75-2.15,3.72,2.14,3.71,10.83,18.75,10.58,18.33,2.54,4.39h47.65c-1.56-2.67-3.12-5.33-4.67-8h-38.37l-2.51-4.34-8.28-14.36-8.53-14.77-2.14-3.71,2.15-3.72,8.52-14.77,8.29-14.37,2.5-4.32h42.93l2.5,4.33,8.29,14.36,8.53,14.77,2.15,3.72-2.14,3.71-8.53,14.77-8.29,14.35c1.56,2.65,3.1,5.31,4.65,7.96l10.58-18.33,10.83-18.75,2.14-3.71-2.15-3.72ZM89.63,81.03l-3.02.2,2.14,1.24-.61,1.06-3.71-2.15.69-1.19,2.89-.18-2.09-1.21.61-1.06,3.75,2.16-.65,1.12ZM92.59,75.83l-2.03-1.17,1.56,1.99-.34.6-2.44-.39,2,1.15-.61,1.06-3.71-2.15.72-1.26,2.6.32-1.55-2.13.72-1.25,3.72,2.15-.62,1.07ZM94.65,72.26l-.92,1.6-3.71-2.15.93-1.6c.67-1.15,1.75-1.74,3.04-1,1.28.74,1.34,1.99.67,3.15Z"/>
					</g>
				</g>
			</symbol>

			<!-- CC + BDM -->
			<symbol id="hex-cc-bdm" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-base" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<g>
						<g>
							<path class="fill-bdm" d="M31.25,4.48l-2.52,4.36-10.59,18.36-10.83,18.75-2.14,3.71,2.14,3.71,10.83,18.75,10.58,18.33c1.55-2.65,3.09-5.31,4.64-7.96l-8.28-14.34-8.54-14.78-2.14-3.71,2.14-3.71,8.54-14.78,8.29-14.37,2.5-4.32h38.33c1.56-2.67,3.11-5.33,4.67-8H31.25ZM59.67,10.84h-2.01v-4.29h1.88c.74,0,1.61.21,1.61,1.13,0,.51-.33.82-.66.9.37.12.77.44.77,1.04,0,.72-.51,1.22-1.59,1.22ZM63.7,10.84h-1.85v-4.29h1.85c1.33,0,2.39.64,2.39,2.13s-1.05,2.16-2.39,2.16ZM71.77,10.84h-1.23v-2.35l-.94,2.35h-.69l-.88-2.31v2.31h-1.23v-4.29h1.45l1.02,2.41,1.07-2.41h1.44v4.29Z"/>
							<path class="fill-bdm" d="M59.71,7.88c0-.28-.2-.42-.4-.42h-.27v.86h.23c.27,0,.45-.14.45-.44Z"/>
							<path class="fill-bdm" d="M63.62,7.53h-.39v2.34h.39c.71,0,1.07-.34,1.07-1.2s-.4-1.14-1.07-1.14Z"/>
							<path class="fill-bdm" d="M59.31,9h-.27v.93h.27c.27,0,.53-.14.53-.46s-.21-.47-.53-.47Z"/>
						</g>
						<path class="fill-cc" d="M107.37,45.95l-10.83-18.76-10.6-18.34c-1.54,2.66-3.09,5.31-4.64,7.96l8.29,14.36,8.54,14.78,2.14,3.71-2.14,3.71-8.54,14.78-8.28,14.34-2.51,4.35h-38.36c-1.56,2.67-3.11,5.34-4.67,8h47.65l2.53-4.39,10.59-18.32,10.83-18.76,2.14-3.71-2.14-3.71ZM44.72,92.27c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24ZM48.76,92.27c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24Z"/>
					</g>
					</g>
			</symbol>

			<!-- CC + NMD -->
			<symbol id="hex-cc-nmd" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-base" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<g>
						<path class="fill-cc" d="M31.25,4.48l-2.52,4.36-10.59,18.36-10.83,18.75-2.14,3.71,2.14,3.71,10.83,18.75,10.58,18.33c1.55-2.65,3.09-5.31,4.64-7.96l-8.28-14.34-8.54-14.78-2.14-3.71,2.14-3.71,8.54-14.78,8.29-14.37,2.5-4.32h38.33c1.56-2.67,3.11-5.33,4.67-8H31.25ZM66.96,9.91c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24ZM71,9.91c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24Z"/>
					<g>
						<path class="fill-nmd" d="M107.37,45.95l-10.83-18.76-10.6-18.34c-1.54,2.66-3.09,5.31-4.64,7.96l8.29,14.36,8.54,14.78,2.14,3.71-2.14,3.71-8.54,14.78-8.28,14.34-2.51,4.35h-38.36c-1.56,2.67-3.11,5.34-4.67,8h47.65l2.53-4.39,10.59-18.32,10.83-18.76,2.14-3.71-2.14-3.71ZM46.76,93.24h-1.29l-1.68-2.52v2.48h-1.22v-4.29h1.38l1.6,2.42v-2.42h1.22v4.33ZM52.68,93.21h-1.23v-2.35l-.94,2.35h-.69l-.88-2.31v2.31h-1.23v-4.29h1.45l1.02,2.41,1.07-2.41h1.44v4.29ZM55.57,93.21h-1.85v-4.29h1.85c1.33,0,2.39.64,2.39,2.13s-1.05,2.16-2.39,2.16Z"/>
						<path class="fill-nmd" d="M55.49,89.89h-.39v2.34h.39c.71,0,1.07-.34,1.07-1.2s-.4-1.14-1.07-1.14Z"/>
					</g>
					</g>
				</g>
			</symbol>

			<!-- BDM + NMD -->
			<symbol id="hex-bdm-nmd" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-base" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<g>
						<g>
							<path class="fill-bdm" d="M63.62,7.53h-.39v2.34h.39c.71,0,1.07-.34,1.07-1.2s-.4-1.14-1.07-1.14Z"/>
							<path class="fill-bdm" d="M59.31,9h-.27v.93h.27c.27,0,.53-.14.53-.46s-.21-.47-.53-.47Z"/>
							<path class="fill-bdm" d="M59.71,7.88c0-.28-.2-.42-.4-.42h-.27v.86h.23c.27,0,.45-.14.45-.44Z"/>
							<path class="fill-bdm" d="M31.25,4.48l-2.52,4.36-10.59,18.36-10.83,18.75-2.14,3.71,2.14,3.71,10.83,18.75,10.58,18.33c1.55-2.65,3.09-5.31,4.64-7.96l-8.28-14.34-8.54-14.78-2.14-3.71,2.14-3.71,8.54-14.78,8.29-14.37,2.5-4.32h38.33c1.56-2.67,3.11-5.33,4.67-8H31.25ZM59.67,10.84h-2.01v-4.29h1.88c.73,0,1.61.21,1.61,1.13,0,.51-.33.82-.66.9.37.12.77.44.77,1.04,0,.72-.51,1.22-1.59,1.22ZM63.7,10.84h-1.85v-4.29h1.85c1.33,0,2.39.64,2.39,2.13s-1.05,2.16-2.39,2.16ZM71.77,10.84h-1.23v-2.35l-.94,2.35h-.69l-.88-2.31v2.31h-1.23v-4.29h1.45l1.02,2.41,1.07-2.41h1.44v4.29Z"/>
						</g>
						<g>
							<path class="fill-nmd" d="M55.49,89.89h-.39v2.34h.39c.71,0,1.07-.34,1.07-1.2s-.4-1.14-1.07-1.14Z"/>
							<path class="fill-nmd" d="M107.37,45.95l-10.83-18.76-10.6-18.34c-1.54,2.66-3.09,5.31-4.64,7.96l8.29,14.36,8.54,14.78,2.14,3.71-2.14,3.71-8.54,14.78-8.28,14.34-2.51,4.35h-38.36c-1.56,2.67-3.11,5.34-4.67,8h47.65l2.53-4.39,10.59-18.32,10.83-18.76,2.14-3.71-2.14-3.71ZM46.76,93.24h-1.29l-1.68-2.52v2.48h-1.22v-4.29h1.38l1.6,2.42v-2.42h1.22v4.33ZM52.68,93.21h-1.23v-2.35l-.94,2.35h-.69l-.88-2.31v2.31h-1.23v-4.29h1.45l1.02,2.41,1.07-2.41h1.44v4.29ZM55.57,93.21h-1.85v-4.29h1.85c1.33,0,2.39.64,2.39,2.13s-1.05,2.16-2.39,2.16Z"/>
						</g>
					</g>
				</g>
			</symbol>

			<!-- BDM + CC + NMD -->
			<symbol id="hex-all" viewBox="0 0 114.68 99.31">
				<g>
					<polygon class="fill-base" points="86.01 0 28.67 0 0 49.66 28.67 99.31 86.01 99.31 114.68 49.66 86.01 0"/>
					<g>
						<g>
							<path class="fill-nmd" d="M93.21,70.31c-.74-.43-1.19-.23-1.52.35l-.19.34,2.03,1.17.19-.34c.35-.61.24-1.09-.5-1.52Z"/>
							<path class="fill-nmd" d="M107.35,45.95l-10.83-18.75-10.59-18.36c-1.55,2.66-3.09,5.31-4.64,7.96l8.29,14.37,8.54,14.78,2.14,3.71-2.14,3.71-8.54,14.78-8.28,14.34c1.55,2.65,3.1,5.31,4.64,7.96l10.58-18.33,10.83-18.75,2.14-3.71-2.14-3.71ZM89.57,81.02l-3.02.2,2.14,1.24-.61,1.06-3.72-2.15.69-1.19,2.89-.18-2.09-1.21.61-1.06,3.75,2.16-.65,1.12ZM92.53,75.82l-2.03-1.17,1.56,1.99-.34.6-2.44-.39,2,1.15-.62,1.06-3.71-2.15.72-1.26,2.6.32-1.56-2.13.72-1.25,3.71,2.15-.62,1.07ZM94.59,72.25l-.92,1.6-3.71-2.15.93-1.6c.67-1.15,1.75-1.74,3.04-1,1.28.74,1.34,1.99.67,3.15Z"/>
						</g>
						<path class="fill-cc" d="M31.24,4.48l-2.52,4.37-10.59,18.35-10.83,18.75h9.23l8.54-14.78,8.29-14.36,2.5-4.33h38.33c1.55-2.67,3.11-5.33,4.67-8H31.24ZM66.95,9.91c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24ZM70.99,9.91c.36,0,.58-.02.95-.22l.29.96c-.44.2-.74.31-1.42.31-1.85,0-2.4-1.27-2.4-2.28s.59-2.24,2.4-2.24c.63,0,1.02.16,1.5.47l-.49.94c-.34-.29-.49-.36-.97-.36-.58,0-1.03.51-1.03,1.17s.46,1.24,1.16,1.24Z"/>
						<g>
							<path class="fill-bdm" d="M14.86,59.49l-.14-.24-.81.46.14.24c.14.24.39.39.66.23.27-.16.31-.42.15-.69Z"/>
							<path class="fill-bdm" d="M16.03,59.28c.24-.14.27-.38.17-.56l-.14-.24-.74.43.11.2c.13.23.35.32.6.17Z"/>
							<path class="fill-bdm" d="M18.29,62.49l-.19-.34-2.03,1.17.19.34c.35.61.83.75,1.57.32.74-.43.79-.92.46-1.49Z"/>
							<path class="fill-bdm" d="M74.22,86.84h-38.36l-2.51-4.35-8.28-14.34-8.54-14.78H7.3l10.83,18.75,10.58,18.33,2.53,4.39h47.65c-1.55-2.66-3.11-5.33-4.67-8ZM13.44,60.72l-1-1.74,3.72-2.15.94,1.63c.37.64.62,1.49-.18,1.96-.44.25-.87.13-1.11-.12.08.38,0,.89-.51,1.19-.62.36-1.31.16-1.85-.77ZM15.46,64.21l-.92-1.6,3.72-2.15.93,1.61c.67,1.15.64,2.39-.65,3.13-1.28.74-2.4.17-3.06-.99ZM19.49,71.2l-.62-1.07,2.03-1.17-2.5.36-.34-.6,1.56-1.92-2,1.15-.61-1.06,3.72-2.14.72,1.26-1.58,2.09,2.62-.28.72,1.25-3.72,2.15Z"/>
						</g>
					</g>
				</g>
			</symbol>
		</svg>

		<!-- =========================================================
			WORKSPACE (main stage + hex grid)
			========================================================= -->
		<main class="workspace" role="main" aria-label="CIS workspace">
            <section class="stage" id="stage" aria-label="Interactive hex map">
                <span class="app-title" role="button" tabindex="0"
                    aria-label="Reset view and show all courses">CIS Overview</span>

				<a class="btn btn--sm btn--ghost btn--osiris"
					id="osirisOverviewBtn"
					href="#!"
					target="_blank" rel="noopener"
					aria-label="Open Osiris exam program" title="Open Osiris">Open Osiris</a>

                <div class="layer" id="layer">
                    <div class="hex-grid" id="hexGrid"></div>
                </div>
            </section>
		</main>

		<!-- =========================================================
			DOCK (controls, legend, filters)
			========================================================= -->
		<aside class="dock" id="dock" aria-label="Controls and legend">
            <!-- Dock handle -->
            <div class="dock__handle" id="dockHandle" aria-label="Menu handle">
                <button type="button" class="dock__toggle" id="dockToggleBtn" aria-label="Hide menu" title="Hide menu">▼</button>
            </div>

            <!-- Dock content -->
            <div class="dock__content">
                <!-- Header row -->
                <div class="dock__row dock__row--spread">
                    <h1 class="title">Controls</h1>
                    <button type="button" class="btn" id="themeToggleBtn" aria-label="Switch theme">Dark theme</button>
                </div>
				<div class="dock__scroll" id="dockScroll" role="region" aria-label="Legend and filters">

					<!-- Legends -->
					<div class="legend-grid" id="legend" aria-label="Legend and filter summary">
						
						<!-- Tracks legend -->
						<div class="legend-box" id="legendTracks" aria-label="Track colors">
							<div class="legend-title">
								Tracks
								<button type="button" class="legend-info" id="trackInfoBtn"
									aria-controls="legendTrackNames" aria-expanded="false"
									title="Show full track names"><span class="icon-info" aria-hidden="true">i</span></button>
							</div>
							<div class="legend-tracks">
								<div class="legend-item">
									<span class="sq bdm" aria-hidden="true"></span>
									<span class="abbr">BDM</span>
								</div>
								<div class="legend-item">
									<span class="sq cc" aria-hidden="true"></span>
									<span class="abbr">CC</span>
								</div>
								<div class="legend-item">
									<span class="sq nmd" aria-hidden="true"></span>
									<span class="abbr">NMD</span>
								</div>
							</div>
							<div class="legend-names" id="legendTrackNames" hidden>
								<div><strong>BDM</strong> — Business Communication &amp; Digital Media</div>
								<div><strong>CC</strong> — Communication &amp; Cognition</div>
								<div><strong>NMD</strong> — New Media Design</div>
							</div>
						</div>

						<!-- Theme summary -->
						<div class="legend-box" id="legendThemeBox" aria-label="Theme summary">
							<div class="legend-title">Theme</div>
							<div class="legend-theme"><span id="legendTheme">—</span></div>
						</div>
					</div>

					<!-- Filters -->
					<form class="controls controls--minimal" id="themeForm" aria-label="Course theme and visibility">
						<div class="toggle-stack">

							<!-- Block visibility -->
							<details class="collapsible pill" id="blockDetails">
								<summary>Show blocks</summary>
								<div class="collapsible__body">
									<fieldset aria-label="Show blocks">
										<legend class="sr-only">Blocks</legend>
										<div class="group group--inline" id="blockFilterGroup">
											<label class="chip"><input type="checkbox" name="blocks" value="1" checked><span>1</span></label>
											<label class="chip"><input type="checkbox" name="blocks" value="2" checked><span>2</span></label>
											<label class="chip"><input type="checkbox" name="blocks" value="3" checked><span>3</span></label>
											<label class="chip"><input type="checkbox" name="blocks" value="4" checked><span>4</span></label>
										</div>
									</fieldset>
								</div>
							</details>

							<!-- Theme chooser -->
							<details class="collapsible pill" id="themeDetails">
								<summary>Select a theme</summary>
								<div class="collapsible__body">
									<fieldset aria-label="Course theme filter">
										<legend>Themes</legend>
										<div class="group group--themes" id="themeGroup"></div>
									</fieldset>
								</div>
							</details>

							<!-- Course visibility -->
							<details class="collapsible pill" id="courseDetails">
								<summary>Select courses <span id="courseCount">(0 / 0)</span></summary>
								<div class="collapsible__body">
									<div class="bulk-actions" role="toolbar" aria-label="Bulk selection">
										<button type="button" class="btn btn--ghost btn--sm" id="coursesAllBtn">Select all</button>
										<button type="button" class="btn btn--ghost btn--sm" id="coursesNoneBtn">Deselect all</button>
									</div>
									<fieldset aria-label="Select courses">
										<legend>Courses</legend>
										<div class="group group--courses" id="courseGroup"></div>
									</fieldset>
								</div>
							</details>
						</div>
					</form>
				</div>

                <!-- Actions -->
                <div class="dock__row dock__row--actions">
					<a class="btn btn--ghost"href="#!" aria-label="Reset overview" id="resetBtn">Reset</a>
                    <a class="btn btn--download" href="#!" aria-label="Download" id="downloadBtn">Download as PNG</a>
                </div>
            </div>
		</aside>

		<!-- =========================================================
			TIPS / TOAST / CENTER CTA
			========================================================= -->
		<aside class="tour" id="tour" aria-live="polite" aria-label="How to use this app">
            <div class="tour__top">
                <div class="tour__step" id="tourStep">1/3</div>
                <button type="button" class="btn btn--ghost" id="tourHideBtn" aria-label="Don't show these tips again">Hide forever</button>
            </div>
            <div class="tour__body" id="tourText"></div>
            <div class="tour__actions">
                <button type="button" class="btn" id="tourPrevBtn">Back</button>
                <button type="button" class="btn btn--ghost" id="tourNextBtn">Next</button>
                <button type="button" class="btn btn--ghost" id="tourCloseBtn">Close</button>
            </div>
		</aside>

		<div class="toast" id="toast" role="status" aria-live="polite"></div>
		<button type="button" class="btn btn--center" id="centerBtn" aria-label="Center grid">Center</button>

		<!-- =========================================================
			INFO DRAWER
			========================================================= -->
		<div class="info" id="infoPanel" aria-label="More information" aria-live="polite">
            <button type="button" class="info__close" id="infoCloseBtn" aria-label="Close details">×</button>
            <div id="infoText" class="info__body">Select a course to see details here.</div>
        </div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.13/html-to-image.min.js" integrity="sha512-iZ2ORl595Wx6miw+GuadDet4WQbdSWS3JLMoNfY8cRGoEFy6oT3G9IbcrBeL6AfkgpA51ETt/faX6yLV+/gFJg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>
		/* =============================================================================
			0) Config
		============================================================================= */
		const Config = {
			minScaleFactor: 0.25,
			maxScaleFactor: 6,

			fitPaddingSmall: 8,
			fitPaddingLarge: 30,
			fitPaddingMax: 80,

			trackLabels: {
				BDM: 'Business Communication & Digital Media',
				CC: 'Communication & Cognition',
				NMD: 'New Media Design'
			},

			lightenDuringMotion: true,

			dockTransitionMs: 280,
			menuHexDelayMs: 200,
			layerTransitionMs: 280,
			introMinDelayMs: 400,

			/* Dock swipe threshold (px) */
			dockSwipePx: 56
		};

		const HEX_SYMBOL_BY_TRACKS = {
			'BDM': 'hex-bdm',
			'CC': 'hex-cc',
			'NMD': 'hex-nmd',
			'BDM CC': 'hex-cc-bdm',
			'CC NMD': 'hex-cc-nmd',
			'BDM NMD': 'hex-bdm-nmd',
			'BDM CC NMD': 'hex-all'
		};

		/* =============================================================================
			Utility helpers
		============================================================================= */
		const Util = {
			clamp(v, min, max) {
				return Math.min(max, Math.max(min, v));
			},

			wait(ms) {
				return new Promise((resolve) => setTimeout(resolve, ms));
			},

			nextFrame(frames = 1) {
				return new Promise((resolve) => {
					function step(n) {
						if (n <= 0) return resolve();
						requestAnimationFrame(() => step(n - 1));
					}
					step(frames);
				});
			},

			escapeHtml(s) {
				return String(s ?? '')
					.replace(/&/g, '&amp;')
					.replace(/</g, '&lt;')
					.replace(/>/g, '&gt;')
					.replace(/"/g, '&quot;')
					.replace(/'/g, '&#39;');
			},

			escapeAttr(s) {
				return Util.escapeHtml(s);
			}, 

			toast(msg, ttl = 6500) {
				const t = document.getElementById('toast');
				if (!t) return;
				try { t._timer && clearTimeout(t._timer); } catch (_) {}
				t.textContent = String(msg || '');
				t.classList.add('is-open');
				try { t._timer = setTimeout(() => t.classList.remove('is-open'), ttl); } catch (_) {}
			},
			
			parseJson(raw, label, fallback) {
				try {
					return JSON.parse(raw);
				} catch (e) {
					let where = '';
					const m = /position\s+(\d+)/i.exec(String(e?.message || ''));
					if (m) {
						const pos = Math.max(0, Number(m[1]) || 0);
						const pre = String(raw || '').slice(0, pos);
						const line = pre.split('\n').length;
						const lastNL = pre.lastIndexOf('\n');
						const col = (lastNL >= 0) ? (pos - lastNL) : (pos + 1);
						where = ` (line ${line}, col ${col})`;
					}
					const msg = `[${label}] Invalid JSON${where}. Check for trailing commas or comments.`;
					console.warn(msg, e);
					Util.toast(msg, 9000);
					return fallback;
				}
			},

			isLandscape() {
				return window.matchMedia('(orientation: landscape)').matches;
			},

			isTouchPrimary() {
				return window.matchMedia('(pointer: coarse)').matches || ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
			}
		};

		/* =============================================================================
			1) App root
		============================================================================= */
		const App = {
			state: {
				scale: 1,
				tx: 0,
				ty: 0,
				min: Config.minScaleFactor,
				max: Config.maxScaleFactor,
				baseScale: 1,
				baseTx: 0,
				baseTy: 0,
				infoBiasTy: 0,

				selection: {
					theme: null,
					hiddenIds: new Set(),
					blocksActive: new Set(['1','2','3','4'])
				},

				focusedId: null,

				dim: { w: 0, h: 0, isSmall: false },
				gridBounds: { width: 0, height: 0 },

				isDragging: false,
				isPinching: false,

				menu: {
					isCollapsed: false,
					userCollapsed: false,
					autoCollapsed: false
				},

				lockInput: false,
				rafId: null
			},

			el: {
				stage: null,
				layer: null,
				workspace: null,
				grid: null,

				themeForm: null,
				centerBtn: null,
				downloadBtn: null,
				resetBtn: null,
				legendTheme: null,

				infoPanel: null,
				infoText: null,
				infoCloseBtn: null,

				themeToggleBtn: null,

				dock: null,
				dockHandle: null,
				dockToggleBtn: null,

				themeGroup: null,
				courseGroup: null,

				themeDetails: null,
				courseDetails: null,

				blockFilterGroup: null,

				tour: null,
				tourStep: null,
				tourText: null,
				tourPrevBtn: null,
				tourNextBtn: null,
				tourCloseBtn: null,
				tourHideBtn: null,

				toast: null
			},

			cache: {
				hexEls: [],
				hexById: new Map(),
				courseById: new Map(),

				/* Layout extents (computed once on load) */
				layoutExtent: null
			}
		};

		/* =============================================================================
			2) Layout (positioning; run once on load)
			- If overviewData contains a structure for N courses, use it.
			- Otherwise fall back to auto layout.
			- Always assign positions from top-left to bottom-right (stable order).
		============================================================================= */
		App.Layout = (function () {
			/* ----- Overview (client-provided structures) ---------------------------- */
			let _overviewCache = null;
			function loadOverview() {
				if (_overviewCache) return _overviewCache;
				try {
					const raw = document.getElementById('overviewData')?.textContent || '{}';
					_overviewCache = Util.parseJson(raw, 'overviewData', {}) || {};
				} catch (e) {
					console.warn('[overviewData] Failed to parse; falling back to auto layout.', e);
					_overviewCache = {};
				}
				return _overviewCache;
			}

			/**
			 * Parse a compact pattern string like: "3-4-{5}-4-3" or "3-2-3-[4]-3-2-3"
			 * Rules for clients (also documented next to #overviewData):
			 * - Use hyphens (-) between columns, left to right.
			 * - Use {x} when the middle column must be ODD (visually offset down by 0.5 row).
			 * - Use [x] when the middle column must be EVEN (no visual offset).
			 * - Optional alignment skips per column:
			 *     '^t'  => skip the TOP-most hex (keep alignment as if height was x)
			 *     '^b'  => skip the BOTTOM-most hex
			 *   Example: "5^b" means a 5-high column but hide the bottom slot (shows 4).
			 */
			function parseOverviewPattern(pattern) {
				if (!pattern || typeof pattern !== 'string') return null;
				const rawTokens = pattern.split('-').map(s => s.trim()).filter(Boolean);
				if (!rawTokens.length) return null;

				// Detect middle token + parity from brackets
				let midIdx = Math.floor(rawTokens.length / 2);
				let middleOdd = null; // true => odd, false => even; null => infer from N later
				function stripBrackets(tok) {
					if (/^\{.+\}$/.test(tok)) { middleOdd = true;  return tok.slice(1, -1).trim(); }
					if (/^\[.+\]$/.test(tok)) { middleOdd = false; return tok.slice(1, -1).trim(); }
					return tok;
				}
				const tokens = rawTokens.map(stripBrackets);

				// Columns: height + optional skip
				const cols = tokens.map(t => {
					const m = /^(\d+)(\^(t|b))?$/.exec(t);
					if (!m) return { h: 0, skip: null };
					const h = parseInt(m[1], 10) || 0;
					const skip = m[3] === 't' ? 'first' : (m[3] === 'b' ? 'last' : null);
					return { h, skip };
				});

				return { columns: cols, middleOdd, colCount: cols.length };
			}

			function generatePositionsFromParsed(N, parsed) {
				if (!parsed || !Array.isArray(parsed.columns) || !parsed.columns.length) return null;
				const columns = parsed.columns;
				const cols = columns.length;
				const D = Math.floor((cols - 1) / 2);
				// Parity: if client specified via []/{}, use that; else default to (N % 2 === 1)
				const middleOdd = (parsed.middleOdd != null) ? !!parsed.middleOdd : ((N % 2) === 1);

				const positions = [];
				for (let qi = 0; qi < cols; qi++) {
					const q = qi - D;
					const oddCol = ((Math.abs(q) + (middleOdd ? 1 : 0)) % 2) === 1;
					const h = Math.max(0, columns[qi].h|0);
					const skip = columns[qi].skip || null;
					const yStart = -((h - 1) / 2);

					for (let i = 0; i < h; i++) {
						if (skip === 'first' && i === 0) continue;
						if (skip === 'last'  && i === h - 1) continue;
						const yK = yStart + i;
						const r  = yK - (q * 0.5) - (oddCol ? 0.5 : 0);
						positions.push({ q, r, odd: oddCol, xKey: q, yKey: yK });
					}
				}

				// Compute extents
				let minQ = Infinity, maxQ = -Infinity, minY = Infinity, maxY = -Infinity;
				for (const p of positions) {
					minQ = Math.min(minQ, p.q);
					maxQ = Math.max(maxQ, p.q);
					minY = Math.min(minY, p.yKey);
					maxY = Math.max(maxY, p.yKey);
				}
				return { positions, extent: { minQ, maxQ, minY, maxY } };
			}

			function baseSum(H, D) {
				// strict slope: H-|q|, q in [-D..D]
				return (2 * D + 1) * H - (D * (D + 1));
			}

			function maxSum(H, D) {
				// plateau at H for all columns
				return (2 * D + 1) * H;
			}

			function scoreCandidate(N, H, D) {
				const root = Math.sqrt(N + 2);
				const preferD = Math.max(0, H - 2); // prefer truncated diamond edges>=2 when possible
				const w = 2 * D + 1;

				let score = 0;
				score += Math.pow(H - root, 2) * 12;
				score += Math.pow(D - preferD, 2) * 2.5;
				score += w * 0.08;
				score += H * 0.04;
				return score;
			}

			function pickShape(N) {
				const parity = N % 2;

				let best = null;

				for (let H = 2; H <= Math.max(2, N); H++) {
					if ((H % 2) !== parity) continue;

					const Dmax = Math.max(0, H - 1);
					const Dstart = Math.max(0, H - 2);

					// Try more diamond-like first, then reduce width
					for (let D = Dstart; D >= 0; D--) {
						const b = baseSum(H, D);
						const m = maxSum(H, D);

						if (b <= N && N <= m) {
							const s = scoreCandidate(N, H, D);
							if (!best || s < best.score) best = { H, D, score: s };
							break;
						}
					}

					// Also consider the full diamond (edges=1) if it helps
					const Dfull = Dmax;
					const bFull = baseSum(H, Dfull);
					const mFull = maxSum(H, Dfull);
					if (bFull <= N && N <= mFull) {
						const sFull = scoreCandidate(N, H, Dfull);
						if (!best || sFull < best.score) best = { H, D: Dfull, score: sFull };
					}
				}

				if (!best) return { H: N || 2, D: 0 };
				return { H: best.H, D: best.D };
			}

			function canInc(heights, i, incTo) {
				// Ensure Lipschitz (adjacent diff <= 1)
				const L = i - 1;
				const R = i + 1;
				if (L >= 0 && (incTo - heights[L] > 1)) return false;
				if (R < heights.length && (incTo - heights[R] > 1)) return false;
				return true;
			}

			function buildHeights(N) {
				const { H, D } = pickShape(N);

				const cols = 2 * D + 1;
				const mid = D;

				// Base strict slope: H - |q|
				const heights = new Array(cols).fill(0).map((_, idx) => {
					const dist = Math.abs(idx - mid);
					return H - dist;
				});

				let sum = heights.reduce((a, b) => a + b, 0);
				let extra = N - sum;

				// Fill extra by raising symmetric column pairs from center outward.
				// Since symmetry keeps parity correct, extra should be even.
				let safety = 0;
				while (extra > 0 && safety++ < 20000) {
					let changed = false;

					for (let dist = 1; dist <= D; dist++) {
						const i = mid - dist;
						const j = mid + dist;

						if (extra < 2) break;

						if (heights[i] >= H || heights[j] >= H) continue;

						const nextI = heights[i] + 1;
						const nextJ = heights[j] + 1;

						if (!canInc(heights, i, nextI)) continue;
						if (!canInc(heights, j, nextJ)) continue;

						heights[i] = nextI;
						heights[j] = nextJ;

						extra -= 2;
						changed = true;
						break; // restart from nearest-to-center each time for nicer plateaus
					}

					if (!changed) break;
				}

				// Final hard clamp: ensure exact sum (fallback in edge cases)
				sum = heights.reduce((a, b) => a + b, 0);
				if (sum !== N) {
					// As a last resort (very small N), rebuild as a single column.
					return { H: N || 1, D: 0, heights: [N || 1] };
				}

				return { H, D, heights };
			}

			function yKey(q, r) {
				// Mirrors the CSS vertical placement:
				// y = (r + q*0.5)*dy + oddY; and oddY == 0.5*dy for odd q.
				const odd = (Math.abs(q) % 2) === 1;
				return r + (q * 0.5) + (odd ? 0.5 : 0);
			}

			function generatePositions(N, opts = {}) {
				// If caller doesn’t supply, default to: odd N → odd middle; even N → even middle.
				const middleOdd = (opts.middleOdd != null) ? !!opts.middleOdd : ((N % 2) === 1);
				const shape = buildHeights(N);
				const { D, heights } = shape;

				const positions = [];

				// IMPORTANT:
				// Use the middle column as the baseline in "screen-space" (yKey), then derive r.
				// This avoids over/under correcting columns caused by centering each column in r,
				// while CSS applies a q-dependent vertical skew (q*0.5) plus odd-column offset.
				//
				// We build each column centered in yKey, then compute r so that:
				//   yKey(q, r) === desiredYKey
				// => r = desiredYKey - q*0.5 - (odd ? 0.5 : 0)
				for (let qi = 0; qi < heights.length; qi++) {
					const q = qi - D;
					const h = heights[qi];
					// Respect requested middle parity: if middleOdd=true, q=0 (and all even |q|) are the "odd"/offset columns.
					const odd = ((Math.abs(q) + (middleOdd ? 1 : 0)) % 2) === 1;
					
					// Center the column in yKey (screen-space) so the overall silhouette is a true diamond.
					const yStart = -((h - 1) / 2);
					const yOddTerm = odd ? 0.5 : 0;

					for (let i = 0; i < h; i++) {
						const yK = yStart + i; // screen-space row key
						const r = yK - (q * 0.5) - yOddTerm; // derive r so CSS lands on yK

						positions.push({
							q,
							r,
							odd,
							xKey: q,
							yKey: yK
						});
					}
				}

				// Top-left → bottom-right ordering
				positions.sort((a, b) => {
					if (a.yKey !== b.yKey) return a.yKey - b.yKey;
					if (a.xKey !== b.xKey) return a.xKey - b.xKey;
					return a.r - b.r;
				});

				const used = positions.slice(0, N);

				// Compute extents for fitting (in q and yKey “grid units”)
				let minQ = Infinity, maxQ = -Infinity, minY = Infinity, maxY = -Infinity;
				for (const p of used) {
					minQ = Math.min(minQ, p.q);
					maxQ = Math.max(maxQ, p.q);
					minY = Math.min(minY, p.yKey);
					maxY = Math.max(maxY, p.yKey);
				}

				return {
					positions: used,
					extent: { minQ, maxQ, minY, maxY }
				};
			}

			function fmt(n) {
				return Number.isInteger(n) ? String(n) : String(n);
			}

			function applyToCourses(courses) {
				const N = courses.length;
				// Default: auto layout with parity that matches total N (odd ↔ odd middle)
				const defaultMiddleOdd = ((N % 2) === 1);
				const auto = generatePositions(N, { middleOdd: defaultMiddleOdd });
				let positions = auto.positions;
				let extent = auto.extent;

				// Try overview pattern first
				const ov = loadOverview();
				const raw = ov?.[String(N)];
				let parsed = null;
				if (typeof raw === 'string') parsed = parseOverviewPattern(raw);
				else if (raw && typeof raw === 'object' && typeof raw.pattern === 'string') parsed = parseOverviewPattern(raw.pattern);

				if (parsed) {
					const manual = generatePositionsFromParsed(N, parsed);
					if (manual && Array.isArray(manual.positions) && manual.positions.length) {
						// If manual produces fewer positions than N, pad with auto so we ALWAYS place N courses.
						if (manual.positions.length >= N) {
							positions = manual.positions.slice(0, N);
							extent = manual.extent;
						} else {
							const need = N - manual.positions.length;
							const usedKeys = new Set(manual.positions.map(p => `${p.q}:${p.r}`));
							// IMPORTANT: make padding honor the same middle parity the client asked for.
							const padParity = (parsed.middleOdd != null) ? !!parsed.middleOdd : defaultMiddleOdd;
							const autoPad = generatePositions(N, { middleOdd: padParity });
							const pad = [];
							for (const p of autoPad.positions) {
								const k = `${p.q}:${p.r}`;
								if (!usedKeys.has(k)) {
									pad.push(p);
									if (pad.length === need) break;
								}
							}
							positions = manual.positions.concat(pad);
							// recompute extents over the combined set
							let minQ = Infinity, maxQ = -Infinity, minY = Infinity, maxY = -Infinity;
							for (const p of positions) {
								minQ = Math.min(minQ, p.q);
								maxQ = Math.max(maxQ, p.q);
								minY = Math.min(minY, p.yKey ?? (p.r + (p.q * 0.5) + ((Math.abs(p.q) % 2) ? 0.5 : 0)));
								maxY = Math.max(maxY, p.yKey ?? (p.r + (p.q * 0.5) + ((Math.abs(p.q) % 2) ? 0.5 : 0)));
							}
							extent = { minQ, maxQ, minY, maxY };
						}
					}
				}

				for (let i = 0; i < courses.length; i++) {
					const c = courses[i];
					const p = positions[i];

					c._pos = { q: p.q, r: p.r, odd: p.odd };
					c.style = `--q:${fmt(p.q)};--r:${fmt(p.r)}`;
				}

				return extent;
			}

			return { applyToCourses };
		})();

		/* =============================================================================
			3) Domain (Courses)
		============================================================================= */
		App.Domain = (function () {
			let _all = [];

			function makeGeneratedId(i) {
				// Stable per load, deterministic by order in coursesData
				return `C${String(i + 1).padStart(3, '0')}`;
			}

			function load() {
				const raw = document.getElementById('coursesData')?.textContent || '[]';
				const list = Util.parseJson(raw, 'coursesData', []);

				const normalized = [];

				for (let i = 0; i < (Array.isArray(list) ? list.length : 0); i++) {
					const src = list[i];
					const it = { ...(src && typeof src === 'object' ? src : {}) };

					it.tracks = Array.isArray(it.tracks) ? it.tracks : [];
					it.themes = Array.isArray(it.themes) ? it.themes : [];
					it.block = Array.isArray(it.block) ? it.block : [];

					it.id = makeGeneratedId(i);

					it.title = String(it.title || '').trim();
					it.code = String(it.code ?? '').trim();
					it.description = String(it.description ?? '');

					it.style = '';

					if (!it.title) it.title = `Course ${i + 1}`;

					it._dataset = {
						tracksAttr: it.tracks.map(s => String(s).toUpperCase().trim()).filter(Boolean).join(' '),
						themesAttr: it.themes.map(s => String(s).trim()).filter(Boolean).join(' ')
					};

					it._label = it.title;

					normalized.push(it);
				}

				// Apply auto layout ONCE (no runtime recomputation)
				const extent = App.Layout.applyToCourses(normalized);

				_all = normalized;
				App.cache.courseById = new Map(_all.map(c => [c.id, c]));
				App.cache.layoutExtent = extent;
			}

			function all() {
				return _all;
			}

			return { load, all };
		})();

		/* =============================================================================
			3b) OSIRIS (deep links)
			--------------------------------------------------------------------
			- Reads configData.start_AY to build the Osiris exam program URL
		============================================================================= */
		App.Osiris = (function (app) {
            const _cache = new Map();
            let _startAY = '2025';
			let _configCache = null;

            function loadConfig() {
                if (_configCache) return _configCache;
                try {
                    const raw = document.getElementById('configData')?.textContent || '{}';
                    const cfg = Util.parseJson(raw, 'configData', {}) || {};
                    _startAY = String(cfg.start_AY).trim();
                    _configCache = { startAY: _startAY };
                } catch (e) {
                    console.warn('[configData] Failed to parse; falling back to default.', e);
                    _startAY = '';
                    _configCache = { startAY: _startAY };
                }
                return _configCache;
            }

            function startAY() {
                return _startAY;
            }

            function examProgramUrl() {
                // NOTE: Tilburg CIS program example: opleiding=36500, examenprogramma=2Q319-2025
                return `https://uvt.osiris-student.nl/onderwijscatalogus/extern/examenprogramma/36500/2Q319-${encodeURIComponent(startAY())}?taal=en`;
            }

            function applyOverviewLink() {
                if (!app.el?.osirisOverviewBtn) return;
                app.el.osirisOverviewBtn.href = examProgramUrl();
            }

            return {
                loadConfig,
                startAY,
                examProgramUrl,
                applyOverviewLink
            };
        })(App);

		/* =============================================================================
            4) Filters (Blocks) — state-driven, composes with other filters
        ============================================================================= */
         App.Filters = (function (app) {
             const ALL_BLOCKS = new Set(['1','2','3','4']);

             function getBlockInputs() {
                 return Array.from(document.querySelectorAll('#blockFilterGroup input[name="blocks"]'));
             }

             function readBlocksFromUI() {
                 const active = new Set();
                 for (const el of getBlockInputs()) {
                     if (el.checked) active.add(String(el.value));
                 }
                 return active;
             }

             function setAllBlockChips(checked) {
                 for (const el of getBlockInputs()) el.checked = !!checked;
             }

             function resetBlocksToAll(silent = false) {
                 setAllBlockChips(true);
                 app.state.selection.blocksActive = new Set(ALL_BLOCKS);
                 applyBlockDimming();
                 if (!silent) Util.toast('Blocks re-activated.');
             }

             function initBlockFilterUI() {
                 // Initialize default state if missing
                 if (!app.state.selection.blocksActive) {
                     app.state.selection.blocksActive = new Set(ALL_BLOCKS);
                 }
                 // Wire chip changes
                 getBlockInputs().forEach((el) => {
                     el.addEventListener('change', () => {
                         app.state.selection.blocksActive = readBlocksFromUI();
                         applyBlockDimming();
                     });
                 });
                 // Ensure initial application (safe if hexes are not rendered yet)
                 applyBlockDimming();
             }

             function courseMatchesActiveBlocks(course, active) {
                 // If a course has no block info, treat it as always visible.
                 const blocks = Array.isArray(course?.block) ? course.block : [];
                 if (blocks.length === 0) return true;
                 for (const b of blocks) {
                     if (active.has(String(b))) return true;
                 }
                 return false;
             }

             function applyBlockDimming() {
                 const active = app.state.selection.blocksActive || ALL_BLOCKS;
                 // Iterate rendered hexes; do not interfere with other dim reasons.
                 for (const [id, hexEl] of app.cache.hexById || []) {
                     const course = app.cache.courseById.get(id);
                     const ok = courseMatchesActiveBlocks(course, active);
                     hexEl.classList.toggle('hex--dim-block', !ok);
                 }
             }

             return {
                 initBlockFilterUI,
                 applyAll: applyBlockDimming,
                 resetBlocksToAll
             };
         })(App);

		/* =============================================================================
			5) Themes (deduplicated)
		============================================================================= */
		App.Themes = (function () {
			let _all = [];

			function load() {
				const raw = document.getElementById('themesData')?.textContent || '[]';
				const parsed = Util.parseJson(raw, 'themesData', []);

				const byId = new Map();

				for (const t of Array.isArray(parsed) ? parsed : []) {
					let id = '';
					let label = '';
					let order = Infinity;

					if (typeof t === 'string') {
						id = t.trim();
						label = id;
					} else if (t && typeof t === 'object') {
						id = String(t.id || t.label || '').trim();
						label = String(t.label || id).trim();
						order = Number.isFinite(t.order) ? t.order : Infinity;
					}

					if (!id) continue;

					if (!byId.has(id)) {
						byId.set(id, { id, label, order });
					} else {
						const prev = byId.get(id);
						const bestOrder = Math.min(prev.order, order);
						byId.set(id, { id, label: prev.label || label, order: bestOrder });
					}
				}

				_all = [...byId.values()].sort((a, b) => (a.order - b.order) || a.label.localeCompare(b.label, undefined, { sensitivity: 'base' }));
			}

			function all() {
				return _all;
			}

			return { load, all };
		})();

		/* =============================================================================
			6) Actions (single source of truth for resets)
			- Avoids near-duplicate reset flows and keeps UI + state in sync.
		============================================================================= */
		App.Actions = (function (app) {
			function resetAll({ silent = false, recenter = true } = {}) {
				// 1) State resets
				app.state.selection.theme = null;
				app.state.selection.hiddenIds = new Set();
				App.Filters.resetBlocksToAll(true); // silent toast; we'll show one consolidated toast below
				
				// 2) Theme UI reset
				const themeInputs = document.querySelectorAll('#themeGroup input');
				themeInputs.forEach((el) => { el.checked = false; });
				if (app.el.legendTheme) app.el.legendTheme.textContent = '—';

				// Ensure 'No theme / show all' is selected when theme is null
				const noneThemeInput = document.getElementById('theme-none') || themeInputs[0];
				if (noneThemeInput) {
					noneThemeInput.checked = true;
				}
				
				// 3) Course UI reset
				const courseInputs = document.querySelectorAll('#courseGroup input[type="checkbox"]');
				courseInputs.forEach((el) => { el.checked = true; });
				const total = App.Domain.all().length;
				const countEl = document.getElementById('courseCount');
				if (countEl) countEl.textContent = `(${total} / ${total})`;
				
				// 4) Clear any dimming/hidden flags on tiles (theme/blocks/courses)
				if (app.cache?.hexById) {
					for (const [, hexEl] of app.cache.hexById) {
						hexEl.classList.remove('hex--dim', 'hex--dim-block', 'hex--hidden', 'hex--focus');
					}
				}
				App.Interaction.applyFilter();
				
				// 5) Recentering as part of "reset view"
				if (recenter && app.el.centerBtn) app.el.centerBtn.click();
				
				if (!silent) Util.toast('Reset: blocks, themes, and courses restored.');
			}
			
			return { resetAll };
		})(App);

		/* =============================================================================
			7) UI
		============================================================================= */
		App.UI = (function (app) {
			let _transformPending = false;
			let _dockTransitionTimer = null;

			function bind() {
				app.el.stage = document.getElementById('stage');
				app.el.layer = document.getElementById('layer');
				app.el.workspace = document.querySelector('.workspace');
				app.el.grid = document.getElementById('hexGrid');
				app.el.appTitle = document.querySelector('.app-title');
				app.el.blockFilterGroup = document.getElementById('blockFilterGroup');
				app.el.osirisOverviewBtn = document.getElementById('osirisOverviewBtn');

				app.el.themeForm = document.getElementById('themeForm');
				app.el.centerBtn = document.getElementById('centerBtn');
				app.el.resetBtn = document.getElementById('resetBtn');
				app.el.downloadBtn = document.getElementById('downloadBtn');

				app.el.legendTheme = document.getElementById('legendTheme');

				app.el.infoPanel = document.getElementById('infoPanel');
				app.el.infoText = document.getElementById('infoText');
				app.el.infoCloseBtn = document.getElementById('infoCloseBtn');

				app.el.themeToggleBtn = document.getElementById('themeToggleBtn');

				app.el.dock = document.getElementById('dock');
				app.el.dockHandle = document.getElementById('dockHandle');
				app.el.dockToggleBtn = document.getElementById('dockToggleBtn');

				app.el.themeGroup = document.getElementById('themeGroup');
				app.el.courseGroup = document.getElementById('courseGroup');

				app.el.themeDetails = document.getElementById('themeDetails');
				app.el.courseDetails = document.getElementById('courseDetails');

				app.el.tour = document.getElementById('tour');
				app.el.tourStep = document.getElementById('tourStep');
				app.el.tourText = document.getElementById('tourText');
				app.el.tourPrevBtn = document.getElementById('tourPrevBtn');
				app.el.tourNextBtn = document.getElementById('tourNextBtn');
				app.el.tourCloseBtn = document.getElementById('tourCloseBtn');
				app.el.tourHideBtn = document.getElementById('tourHideBtn');

				app.el.toast = document.getElementById('toast');

				attachTrackTooltips();
				attachBlockTooltips();
				bindThemeToggle();
				bindDockControls();
				bindInfoClose();
				App.Filters.initBlockFilterUI();

				window.addEventListener('resize', () => {
					updateDockToggleUI();
					updateWorkspaceReserve();
				}, { passive: true });

				[app.el.themeDetails, app.el.courseDetails].forEach((d) => {
					if (!d) return;
					d.addEventListener('toggle', () => updateWorkspaceReserve(), { passive: true });
				});

				updateDockToggleUI();
				updateWorkspaceReserve();
				wireDockSwipe();

				const handleResetClick = (source) => {
					const confirmed = confirm(
						'Reset your overview?\n\n' +
						'This will:\n' +
						'• Select all courses and blocks again\n' +
						'• Deactivate any active themes\n' +
						'• Restore the default view\n\n' +
						'Are you sure?'
					);
					if (confirmed) {
						App.Actions.resetAll();
					}
				};

				if (app.el.resetBtn) {
					app.el.resetBtn.addEventListener('click', (e) => {
						e.preventDefault();
						handleResetClick('resetBtn click');
					});
				}
				if (app.el.appTitle) {
					app.el.appTitle.addEventListener('click', (e) => {
						e.preventDefault();
						handleResetClick('appTitle click');
					});
				}
			}

			function initCollapsiblesInitialState() {
				[app.el.themeDetails, app.el.courseDetails].forEach((d) => {
					if (!d) return;
					d.open = false;
					d.setAttribute('data-init', '1');
				});
			}

			function attachTrackTooltips() {
				const labelBy = Config.trackLabels || {};
				const scroller = document.querySelector('.dock__content');

				document.querySelectorAll('#legendTracks .legend-item').forEach((item) => {
					const abbrEl = item.querySelector('.abbr');
					if (!abbrEl) return;

					const abbr = (abbrEl.textContent || '').trim();
					const full = labelBy[abbr];
					if (!full) return;

					const btn = document.createElement('button');
					btn.type = 'button';
					btn.className = 'info-btn';
					btn.setAttribute('aria-label', `Show full name for ${abbr}`);
					btn.innerHTML = '<span class="icon-info" aria-hidden="true">i</span>';

					const tip = document.createElement('div');
					tip.className = 'track-tip';
					tip.textContent = `${full}`;
					tip.setAttribute('role', 'tooltip');
					tip.id = `track-tip-${abbr.toLowerCase()}`;
					btn.setAttribute('aria-describedby', tip.id);

					abbrEl.setAttribute('title', full);

					item.appendChild(btn);
					document.body.appendChild(tip);

					let isOpen = false;

					const adjust = () => {
						if (!isOpen) return;

						const pad = 8;
						const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
						const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

						const a = btn.getBoundingClientRect();
						let left = a.left;
						let top = a.bottom + 6;

						tip.style.left = `${Math.round(left)}px`;
						tip.style.top = `${Math.round(top)}px`;

						let r = tip.getBoundingClientRect();

						if (r.right > vw - pad) left -= (r.right - (vw - pad));
						if (left < pad) left = pad;

						if (r.bottom > vh - pad) top = a.top - r.height - 6;
						if (top < pad) top = pad;

						tip.style.left = `${Math.round(left)}px`;
						tip.style.top = `${Math.round(top)}px`;
					};

					const show = () => {
						if (isOpen) return;
						tip.classList.add('is-open');
						isOpen = true;
						requestAnimationFrame(adjust);
					};

					const hide = () => {
						if (!isOpen) return;
						tip.classList.remove('is-open');
						isOpen = false;
					};

					const toggle = () => (isOpen ? hide() : show());

					btn.addEventListener('mouseenter', show);
					btn.addEventListener('mouseleave', hide);
					btn.addEventListener('focus', show);
					btn.addEventListener('blur', hide);
					btn.addEventListener('click', toggle);

					item.addEventListener('mouseenter', show);
					item.addEventListener('mouseleave', hide);

					window.addEventListener('resize', () => { if (isOpen) adjust(); }, { passive: true });
					scroller?.addEventListener('scroll', hide, { passive: true });
				});
			}

			/* tooltips for Blocks legend (months) */
			function attachBlockTooltips() {
				const scroller = document.querySelector('.dock__content');
				document.querySelectorAll('#legendBlocks .legend-item').forEach((item, idx) => {
					const abbrEl = item.querySelector('.abbr');
					const btn = item.querySelector('.info-btn');
					if (!abbrEl || !btn) return;

					const label = (abbrEl.textContent || '').trim();       // "1" | "2" | "3" | "4"
					const months = (btn.getAttribute('title') || '').trim(); // "Sept - Oct" etc.

					const tip = document.createElement('div');
					tip.className = 'track-tip';
					tip.textContent = `${months}`;
					tip.setAttribute('role', 'tooltip');
					const tipId = `block-tip-${label}`;
					tip.id = tipId;
					btn.setAttribute('aria-describedby', tipId);

					item.appendChild(btn);
					document.body.appendChild(tip);

					let isOpen = false;
					const adjust = () => {
						if (!isOpen) return;
						const pad = 8;
						const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
						const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
						const a = btn.getBoundingClientRect();
						let left = a.left;
						let top = a.bottom + 6;
						tip.style.left = `${Math.round(left)}px`;
						tip.style.top = `${Math.round(top)}px`;
						let r = tip.getBoundingClientRect();
						if (r.right > vw - pad) left -= (r.right - (vw - pad));
						if (left < pad) left = pad;
						if (r.bottom > vh - pad) top = a.top - r.height - 6;
						if (top < pad) top = pad;
						tip.style.left = `${Math.round(left)}px`;
						tip.style.top = `${Math.round(top)}px`;
					};
					const show = () => { if (!isOpen) { tip.classList.add('is-open'); isOpen = true; requestAnimationFrame(adjust); } };
					const hide = () => { if (isOpen) { tip.classList.remove('is-open'); isOpen = false; } };
					const toggle = () => (isOpen ? hide() : show());

					btn.addEventListener('mouseenter', show);
					btn.addEventListener('mouseleave', hide);
					btn.addEventListener('focus', show);
					btn.addEventListener('blur', hide);
					btn.addEventListener('click', toggle);
					item.addEventListener('mouseenter', show);
					item.addEventListener('mouseleave', hide);
					window.addEventListener('resize', () => { if (isOpen) adjust(); }, { passive: true });
					scroller?.addEventListener('scroll', hide, { passive: true });
				});
			}

			function bindThemeToggle() {
				const setText = () => {
					const cur = document.body.getAttribute('data-ui-theme') || 'light';
					const next = (cur === 'dark') ? 'Light theme' : 'Dark theme';
					app.el.themeToggleBtn.textContent = next;
					app.el.themeToggleBtn.setAttribute('aria-label', `Switch to ${next}`);
				};

				app.el.themeToggleBtn.addEventListener('click', () => {
					const cur = document.body.getAttribute('data-ui-theme') || 'light';
					document.body.setAttribute('data-ui-theme', (cur === 'dark') ? 'light' : 'dark');
					setText();
					App.Filters.resetBlocksToAll(true);
					App.Filters.applyAll();
				});

				setText();
			}

			function bindDockControls() {
				app.el.dockToggleBtn.addEventListener('click', async () => {
					if (isDockCollapsed()) {
						if (app.state.focusedId) await App.Flow.deactivate('revealMenu');
						revealDock('user');
					} else {
						collapseDock('user');
					}
				});

				app.el.dockHandle.addEventListener('click', async (e) => {
					if (e.target.closest('#dockToggleBtn')) return;
					if (App._suppressHandleClickOnce) { App._suppressHandleClickOnce = false; return; }

					if (isDockCollapsed()) {
						if (app.state.focusedId) await App.Flow.deactivate('handleRevealMenu');
						revealDock('user');
					} else {
						collapseDock('user');
					}
				});
			}

			function bindInfoClose() {
				app.el.infoCloseBtn.addEventListener('click', () => {
					App.Flow.deactivate('infoClose');
				});
			}

			/* ----- Rendering ---------------------------------------------------------- */
			function renderThemeFilters(themes) {
				const group = app.el.themeGroup;
				if (!group) return;

				group.innerHTML = '';

				const mkId = (s) => 'theme-' + String(s).toLowerCase().replace(/[^\w-]+/g, '—');

				function addChip(value, label, id, extraClass = '') {
					const wrap = document.createElement('label');
					wrap.className = `chip${extraClass ? ' ' + extraClass : ''}`;

					const input = document.createElement('input');
					input.type = 'radio';
					input.name = 'theme';
					input.id = id;
					input.value = value;

					// For empty string (No theme), treat as null for comparison
					const normalizedValue = (value === '') ? null : value;
					const selected = normalizedValue === app.state.selection.theme;
					if (selected) input.checked = true;

					const span = document.createElement('span');
					span.textContent = label;

					wrap.append(input, span);
					group.appendChild(wrap);
				}

				addChip('', 'No theme / show all', 'theme-none', 'chip--none');

				const CUSTOM_THEME_ID = 'theme-custom';
				addChip('Custom', 'Custom / start blank', CUSTOM_THEME_ID);
				for (const t of themes) addChip(t.id, t.label, mkId(t.id));

				sizeThemeList();

				/* ----- Custom behaviour wiring (idempotent) ------------------------ */
				if (!group._customHooked) {
					group.addEventListener('change', (e) => {
						const el = e.target;
						if (!el || el.name !== 'theme') return;
						if (!el.checked) return;
						// If "Custom (start blank)" is chosen explicitly, deselect all courses
						if (el.id === CUSTOM_THEME_ID) {
							e.stopImmediatePropagation();
							// Set theme first so downstream handlers see the correct state
							app.state.selection.theme = 'Custom';
							if (app.el.legendTheme) app.el.legendTheme.textContent = 'Custom';
							const boxes = app.el.courseGroup?.querySelectorAll('input[type="checkbox"]') || [];
							for (const b of boxes) {
								if (b.checked) {
									b.checked = false;
									b.dispatchEvent(new Event('change', { bubbles: true }));
								}
							}
						}
					});
					group._customHooked = true;
				}
				
				// If user tweaks courses after picking any theme (or none), flip the chip to "custom"
				if (app.el.courseGroup && !app.el.courseGroup._customHooked) {
					app.el.courseGroup.addEventListener('change', (e) => {
						if (!(e.target && e.target.type === 'checkbox')) return;
						if (e && e.isTrusted === false) return;
						const customRadio = document.getElementById(CUSTOM_THEME_ID);
						if (customRadio && !customRadio.checked) {
							// Do NOT dispatch a change here — avoid re-deselecting via the handler above
							customRadio.checked = true;
							app.state.selection.theme = 'Custom';
							if (app.el.legendTheme) app.el.legendTheme.textContent = 'Custom';
						}
					});
					app.el.courseGroup._customHooked = true;
				}
			}

			function renderCourseSelector(items) {
				const group = app.el.courseGroup;
				if (!group) return;

				group.innerHTML = '';

				const byTitle = [...items].sort((a, b) =>
					a.title.localeCompare(b.title, undefined, { sensitivity: 'base', numeric: true })
				);

				for (const v of byTitle) {
					const id = 'course-' + v.id;

					const wrap = document.createElement('label');
					wrap.className = 'check';
					wrap.setAttribute('data-id', v.id);

					const input = document.createElement('input');
					input.type = 'checkbox';
					input.id = id;
					input.name = id;
					input.checked = !app.state.selection.hiddenIds.has(v.id);

					const span = document.createElement('span');
					span.textContent = v.title;

					wrap.append(input, span);
					group.appendChild(wrap);
				}

				sizeCourseList();
			}

			function renderHexGrid(items) {
				const frag = document.createDocumentFragment();
				const hexById = new Map();
				const hexEls = [];

				for (const v of items) {
					const hex = document.createElement('div');
					hex.className = 'hex';
					hex.setAttribute('style', v.style || '');

					// odd-column helper class for correct vertical offset at any q
					if (v._pos?.odd) hex.classList.add('hex--odd');

					hex.setAttribute('data-id', v.id);
					hex.setAttribute('data-track', v._dataset.tracksAttr);
					hex.setAttribute('data-theme', v._dataset.themesAttr);
					hex._themeSet = new Set((v._dataset.themesAttr || '').trim().split(/\s+/).filter(Boolean));
					const b = Array.isArray(v.block) && v.block.length ? String(v.block[0]) : '';
					hex.setAttribute('data-block', b);

					const key = (Array.isArray(v.tracks) ? v.tracks : [])
						.map(s => String(s).toUpperCase())
						.sort()
						.join(' ');
					const symbolId = HEX_SYMBOL_BY_TRACKS[key] || 'hex-all';

					const svgNS = 'http://www.w3.org/2000/svg';
					const svg = document.createElementNS(svgNS, 'svg');
					svg.setAttribute('class', 'hex__svg');
					svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
					svg.setAttribute('width', '100%');
					svg.setAttribute('height', '100%');

					const use = document.createElementNS(svgNS, 'use');
					use.setAttribute('href', `#${symbolId}`);
					// Legacy Safari / embedded WebViews still require xlink:href.
					use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', `#${symbolId}`);
					svg.appendChild(use);

					const label = document.createElement('span');
					label.className = 'hex__label';
					label.textContent = v._label;

					const hit = document.createElement('div');
					hit.className = 'hex__hit';
					hit.setAttribute('tabindex', '0');
					hit.setAttribute('role', 'button');
					hit.setAttribute('aria-label', `Show details for ${v.title}`);

					hex._hit = hit;
					hex.append(svg, label, hit);

					frag.appendChild(hex);
					hexById.set(v.id, hex);
					hexEls.push(hex);
				}

				app.el.grid.innerHTML = '';
				app.el.grid.appendChild(frag);

				app.cache.hexById = hexById;
				app.cache.hexEls = hexEls;
			}

			/* ----- Transform ---------------------------------------------------------- */
			function applyTransform() {
				if (_transformPending) return;
				_transformPending = true;

				cancelAnimationFrame(app.state.rafId);
				app.state.rafId = requestAnimationFrame(() => {
					app.el.layer.style.setProperty('--scale', String(app.state.scale));
					app.el.layer.style.setProperty('--tx', `${app.state.tx}px`);
					app.el.layer.style.setProperty('--ty', `${app.state.ty}px`);
					_transformPending = false;
					updateCenterCTA();
				});
			}

			/* ----- Legend / Info ------------------------------------------------------ */
			function updateLegend(selection) {
				if (!app.el.legendTheme) return;
				const customRadio = document.getElementById('theme-custom');
				if (customRadio && customRadio.checked) {
					app.el.legendTheme.textContent = 'Custom';
					return;
				}
				app.el.legendTheme.textContent = selection.theme || '—';
			}

			function showInfo(item) {
				const title = Util.escapeHtml(item.title);
				const code = Util.escapeHtml(item.code || '—');
				const tracks = Util.escapeHtml((item.tracks || []).join(', ') || '—');
				const blocks = Util.escapeHtml((item.block || []).join(', ') || '—');
				const osirisUrl = `https://uvt.osiris-student.nl/onderwijscatalogus/extern/cursus?cursuscode=${encodeURIComponent(code)}&collegejaar=${encodeURIComponent(App.Osiris.startAY())}?taal=en`;
				const osirisLink = `<a href="${Util.escapeAttr(osirisUrl)}" target="_blank" rel="noopener">Osiris</a>`;
				const description = Util.escapeHtml(item.description || '—');

				const html = `
					<strong>${title} (${code})</strong>
					<hr>
					<strong>Track(s):</strong> ${tracks}<br>
					<strong>Block:</strong> ${blocks}<br>
                    <strong>Description:</strong> (read more in ${osirisLink})<br><br>
					${description}
				`;

				app.el.infoText.innerHTML = html;
				/* Ensure the info panel starts at the top whenever new content is shown */
				app.el.infoPanel.scrollTop = 0;
				/* Also enforce after paint in case transforms/DOM updates interfere */
				requestAnimationFrame(() => {
					app.el.infoPanel.scrollTop = 0;
				});
				app.el.infoPanel.classList.add('is-open');
			}

			function hideInfo() {
				app.el.infoPanel.classList.remove('is-open');
				/* Reset scroll so the next open starts at the top */
				app.el.infoPanel.scrollTop = 0;
			}

			function updateCenterCTA() {
				const epsS = 0.001, epsT = 1;
				const offScale = Math.abs(app.state.scale - app.state.baseScale) > epsS;
				const offTx = Math.abs(app.state.tx - app.state.baseTx) > epsT;
				const offTy = Math.abs(app.state.ty - app.state.baseTy) > epsT;

				const show = !!(app.state.focusedId || offScale || offTx || offTy || app.state.isDragging || app.state.isPinching);
				app.el.centerBtn.classList.toggle('is-visible', show);
			}

			/* ----- Dock helpers ------------------------------------------------------- */
			function isDockCollapsed() {
				return document.body.classList.contains('dock-collapsed');
			}

			function syncMenuStateFlags() {
				app.state.menu.isCollapsed = isDockCollapsed();
			}

			function afterDockTransition(cb) {
				if (_dockTransitionTimer) {
					clearTimeout(_dockTransitionTimer);
					_dockTransitionTimer = null;
				}

				let called = false;
				const done = () => {
					if (called) return;
					called = true;

					syncMenuStateFlags();
					updateDockToggleUI();
					updateWorkspaceReserve();
					if (typeof cb === 'function') cb();
				};

				const onEnd = (ev) => {
					if (ev.target !== app.el.dock) return;
					app.el.dock.removeEventListener('transitionend', onEnd);
					done();
				};

				app.el.dock.addEventListener('transitionend', onEnd, { once: true });
				_dockTransitionTimer = setTimeout(done, Config.dockTransitionMs + 60);
			}

			function collapseDock(source = 'user') {
				document.body.classList.add('dock-collapsed');
				app.el.dock.setAttribute('aria-hidden', 'true');

				if (source === 'user') {
					app.state.menu.userCollapsed = true;
					app.state.menu.autoCollapsed = false;
				} else if (source === 'auto') {
					app.state.menu.autoCollapsed = true;
				}

				syncMenuStateFlags();
				updateDockToggleUI();
				updateWorkspaceReserve();
				afterDockTransition();
			}

			function revealDock(source = 'user', cb) {
				document.body.classList.remove('dock-collapsed');
				app.el.dock.removeAttribute('aria-hidden');

				if (source === 'user') {
					app.state.menu.userCollapsed = false;
					app.state.menu.autoCollapsed = false;
				} else if (source === 'auto') {
					app.state.menu.autoCollapsed = false;
				}

				syncMenuStateFlags();
				updateDockToggleUI();
				updateWorkspaceReserve();
				afterDockTransition(cb);
			}

			function updateDockToggleUI() {
				const collapsed = isDockCollapsed();
				const landscape = Util.isLandscape();

				let glyph = '▼';
				if (!landscape && collapsed) glyph = '▲';
				if (landscape && !collapsed) glyph = '▶';
				if (landscape && collapsed) glyph = '◀';

				app.el.dockToggleBtn.textContent = glyph;
				app.el.dockToggleBtn.title = collapsed ? 'Show menu' : 'Hide menu';
				app.el.dockToggleBtn.setAttribute('aria-label', collapsed ? 'Show menu' : 'Hide menu');
			}

			function updateWorkspaceReserve() {
				if (!app.el.dock) return;

				const collapsed = isDockCollapsed();
				const landscape = Util.isLandscape();

				const tab = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--dock-tab')) || 28;
				const extra = 18;

				if (!landscape) {
					const h = collapsed ? (tab + 12) : app.el.dock.getBoundingClientRect().height;
					document.documentElement.style.setProperty('--dock-reserve-bottom', `${Math.max(tab + 12, Math.round(h + extra))}px`);
					document.documentElement.style.setProperty('--dock-reserve-right', '0px');
				} else {
					const w = collapsed ? (tab + 12) : app.el.dock.getBoundingClientRect().width;
					document.documentElement.style.setProperty('--dock-reserve-right', `${Math.max(tab + 12, Math.round(w + extra))}px`);
					document.documentElement.style.setProperty('--dock-reserve-bottom', '0px');
				}
			}

			function wireDockSwipe() {
				const handle = app.el.dockHandle;
				if (!handle) return;

				let active = false;
				let startX = 0, startY = 0;
				let lastX = 0, lastY = 0;
				let pointerId = null;

				function onDown(e) {
					if (app.state.lockInput) return;
					if (e.pointerType !== 'touch') return;

					active = true;
					pointerId = e.pointerId;
					startX = lastX = e.clientX;
					startY = lastY = e.clientY;

					try { handle.setPointerCapture(pointerId); } catch (_) {}
				}

				function onMove(e) {
					if (!active) return;
					if (e.pointerId !== pointerId) return;

					lastX = e.clientX;
					lastY = e.clientY;

					e.preventDefault();
				}

				async function onUp(e) {
					if (!active) return;
					if (e.pointerId !== pointerId) return;

					active = false;
					try { handle.releasePointerCapture(pointerId); } catch (_) {}

					const dx = lastX - startX;
					const dy = lastY - startY;
					const collapsed = isDockCollapsed();
					const landscape = Util.isLandscape();

					const threshold = Config.dockSwipePx;
					const straightEnough = (a, b) => Math.abs(b) <= Math.max(14, Math.abs(a) * 0.55);

					let swiped = false;

					if (!landscape) {
						if (!collapsed && dy > threshold && straightEnough(dy, dx)) {
							collapseDock('user'); swiped = true;
						}
						if (collapsed && dy < -threshold && straightEnough(dy, dx)) {
							if (app.state.focusedId) await App.Flow.deactivate('swipeRevealMenu');
							revealDock('user'); swiped = true;
						}
					} else {
						if (!collapsed && dx > threshold && straightEnough(dx, dy)) {
							collapseDock('user'); swiped = true;
						}
						if (collapsed && dx < -threshold && straightEnough(dx, dy)) {
							if (app.state.focusedId) await App.Flow.deactivate('swipeRevealMenu');
							revealDock('user'); swiped = true;
						}
					}

					if (swiped) App._suppressHandleClickOnce = true;
				}

				handle.addEventListener('pointerdown', onDown);
				handle.addEventListener('pointermove', onMove, { passive: false });
				handle.addEventListener('pointerup', onUp);
				handle.addEventListener('pointercancel', onUp);
			}

			/* ----- List sizing -------------------------------------------------------- */
			function sizeThemeList() {
				const group = app.el.themeGroup;
				if (!group) return;

				requestAnimationFrame(() => {
					const first = group.querySelector('.chip');
					if (!first) return;

					const r = first.getBoundingClientRect();
					const cs = getComputedStyle(group);
					const gap = parseFloat(cs.rowGap || cs.gap || '8');

					const target = (r.height * 3.8) + (gap * 2.0);
					group.style.maxHeight = `${target}px`;
					group.style.paddingBottom = `${gap * 0.25}px`;
					updateWorkspaceReserve();
				});
			}

			function sizeCourseList() {
				const group = app.el.courseGroup;
				if (!group) return;

				requestAnimationFrame(() => {
					const first = group.querySelector('.check');
					if (!first) return;

					const r = first.getBoundingClientRect();
					const cs = getComputedStyle(group);
					const gap = parseFloat(cs.rowGap || cs.gap || '8');

					const target = (r.height * 4.5) + (gap * 3.5);
					group.style.maxHeight = `${target}px`;
					group.style.paddingBottom = `${gap * 0.25}px`;
					updateWorkspaceReserve();
				});
			}

			/* ----- Intro -------------------------------------------------------------- */
			async function playIntro() {
				const intro = document.getElementById('intro');
				if (!intro) return;
				if (App._introStarted) return;
				App._introStarted = true;
				
				// 1) Wait the minimum delay first
				await Util.wait(Config.introMinDelayMs);
				// 2) Then wait for full load (images, fonts, etc.)
				if (document.readyState !== 'complete') {
					await Promise.race([
						new Promise((resolve) => window.addEventListener('load', resolve, { once: true })),
						Util.wait(2000)
					]);
				}
				
				const logo = document.getElementById('introLogo');
				if (logo) {
					logo.classList.add('is-hidden');
				}
				
				let killed = false;
				let safetyTimer = null;
				const kill = () => {
					if (killed) return;
					killed = true;
					if (safetyTimer) clearTimeout(safetyTimer);
					try { intro.remove(); } catch (_) {}
				};
				
				// Option A — mask reveal with JS-driven radius (prevents “growing square”)
				const supportsMask =
					(typeof CSS !== 'undefined' && (
						CSS.supports('mask-image', 'radial-gradient(circle at 50% 50%, black 1px, transparent 0)') ||
						CSS.supports('-webkit-mask-image', 'radial-gradient(circle, #000, transparent)')
					));
					
				if (supportsMask) {
					intro.classList.add('cis-intro--mask');
					// fall through to JS radius animation below
				}
				
				// JS-driven var() animation (used for both mask + gradient fallback)
				// Keeps original "hole reveal" aesthetic using the same radial-gradient.
				const DURATION = 1100;
				const START_DELAY = 120;
				const start = performance.now() + START_DELAY;
				const end = start + DURATION;
				// Safety kill: if masking/RAF behaves unexpectedly on an engine, never leave the overlay up.
				safetyTimer = setTimeout(kill, DURATION + START_DELAY + 300);
				// EaseInOutQuad
				const ease = (t) => (t < 0.5) ? (2 * t * t) : (1 - Math.pow(-2 * t + 2, 2) / 2);
				
				function frame(now) {
					if (killed) return;
					if (now < start) { requestAnimationFrame(frame); return; }
					const p = Math.min(1, (now - start) / (end - start));
					const r = 140 * ease(p); // vmax radius
					intro.style.setProperty('--reveal', r + 'vmax');
					if (p < 1) {
						requestAnimationFrame(frame);
					} else {
						kill();
					}
				}
				requestAnimationFrame(frame);
			}

			return {
				bind,
				initCollapsiblesInitialState,

				renderThemeFilters,
				renderCourseSelector,
				renderHexGrid,

				applyTransform,

				updateLegend,
				showInfo,
				hideInfo,
				updateCenterCTA,

				isDockCollapsed,
				collapseDock,
				revealDock,
				updateWorkspaceReserve,

				sizeThemeList,
				sizeCourseList,

				playIntro
			};
		})(App);

		/* =============================================================================
			8) Interaction (pan/zoom/tap, filters, resize)
		============================================================================= */
		App.Interaction = (function (app) {
			const pointers = new Map();
			let startX = 0, startY = 0, startTX = 0, startTY = 0;
			let lastDist = 0;
			let motionTimer = 0;

			let isTap = false;
			let downTarget = null;
			let downX = 0, downY = 0;

			function centerOfStage() {
				const r = app.el.stage.getBoundingClientRect();
				return { x: r.left + r.width / 2, y: r.top + r.height / 2, rect: r };
			}

			function gridIntrinsicSize() {
				// Prefer layout extents computed on load (stable), converted to px by reading
				// the *primitive* CSS vars (px numbers) and computing derived values in JS.
				// Reason: derived vars like --w/--dx are calc(...) and parseFloat("calc(...)") => NaN.
				const extent = app.cache.layoutExtent;
				const g = app.el.grid;
				
				if (extent && g) {
					const cs = getComputedStyle(g);

					const pxVar = (name, fallback) => {
						const raw = (cs.getPropertyValue(name) || '').trim();
						const n = parseFloat(raw);
						return Number.isFinite(n) ? n : fallback;
					};

					// Primitive vars are declared as px values (parseFloat is safe here)
					const flat = pxVar('--flat', 320);
					const halfH = pxVar('--halfH', 140);
					const hexSpace = pxVar('--hex-space', 24);
					const colGap = pxVar('--col-gap', -105);

					// Mirror CSS geometry:
					// --tri: halfH * 0.606
					// --w: flat + tri*2
					// --h: halfH*2
					// --dx: w*0.75 + colGap
					// --dy: h + hexSpace
					const tri = halfH * 0.606;
					const w = flat + (tri * 2);
					const h = halfH * 2;
					const dx = (w * 0.75) + colGap;
					const dy = h + hexSpace;

					const colSpan = Math.max(0, extent.maxQ - extent.minQ);
					const rowSpan = Math.max(0, extent.maxY - extent.minY);

					return {
						width: Math.max(1, w + dx * colSpan),
						height: Math.max(1, h + dy * rowSpan)
					};
				}
				
				// Fallback (should not be needed in normal runs)
				const w = Math.max(1, g?.offsetWidth || g?.scrollWidth || 1);
				const h = Math.max(1, g?.offsetHeight || g?.scrollHeight || 1);
				return { width: w, height: h };
			}

			function setDims() {
				const w = window.innerWidth;
				const h = window.innerHeight;

				app.state.dim.w = w;
				app.state.dim.h = h;
				app.state.dim.isSmall = w < 600;

				const vw = w / 100;
				const vh = h / 100;
				const s = Math.max(.72, Math.min(1, Math.min(vw * 100, vh * 100) / 900));
				document.documentElement.style.setProperty('--ui-scale', s.toFixed(3));
			}

			function measureBaseFitOnly() {
				setDims();

				const stageRect = app.el.stage.getBoundingClientRect();
				const gridBounds = gridIntrinsicSize();

				const isSmall = app.state.dim.isSmall;
				const pad = Math.max(
					isSmall ? Config.fitPaddingSmall : Config.fitPaddingLarge,
					Math.min(
						isSmall ? 30 : Config.fitPaddingMax,
						Math.round(Math.max(app.state.dim.w, app.state.dim.h) * (isSmall ? 0.01 : 0.02))
					)
				);

				const availW = Math.max(stageRect.width - pad * 2, 1);
				const availH = Math.max(stageRect.height - pad * 2, 1);

				const baseScale = Math.min(availW / gridBounds.width, availH / gridBounds.height) || 1;
				const min = Math.max(0.1, baseScale * 0.25);
				const max = baseScale * 6;

				return { baseScale, min, max, gridBounds };
			}

			function fitAll() {
				const m = measureBaseFitOnly();

				app.state.gridBounds = m.gridBounds;
				app.state.baseScale = m.baseScale;
				app.state.min = m.min;
				app.state.max = m.max;

				app.state.scale = m.baseScale;
				app.state.tx = app.state.baseTx = 0;
				app.state.ty = app.state.baseTy = 0;

				const stageRect = app.el.stage.getBoundingClientRect();
				app.state.infoBiasTy = -Math.min(400, stageRect.height * 0.2);

				App.UI.applyTransform();
			}

			function adoptNewBasePreservingView() {
				const { baseScale: newBase, min: newMin, max: newMax, gridBounds } = measureBaseFitOnly();

				const oldBase = app.state.baseScale || 1;
				const s0 = app.state.scale || 1;
				const tx0 = app.state.tx || 0;
				const ty0 = app.state.ty || 0;

				app.state.baseScale = newBase;
				app.state.min = newMin;
				app.state.max = newMax;
				app.state.gridBounds = gridBounds;

				const s1Wanted = s0 * (newBase / oldBase);
				const s1 = Util.clamp(s1Wanted, app.state.min, app.state.max);
				const r = s0 / s1;

				app.state.scale = s1;
				app.state.tx = tx0 * r;
				app.state.ty = ty0 * r;

				App.UI.applyTransform();
			}

			function applyFilter() {
				const theme = app.state.selection.theme;
				const focusedId = app.state.focusedId;
				const hidden = app.state.selection.hiddenIds;

				app.el.grid.querySelectorAll('.hex').forEach((el) => {
					const id = el.getAttribute('data-id');
					const themesAttr = (el.getAttribute('data-theme') || '').trim();
					const themes = themesAttr ? themesAttr.split(/\s+/) : [];

					const deselectedByCourse = hidden.has(id);
					const activeThemeFilter = !!theme && theme !== 'Custom';
					const mismatchTheme = activeThemeFilter && !themes.includes(theme);
					const shouldDim = deselectedByCourse || mismatchTheme;
					
					/* Never fully remove hexes for deselection; just dim them */
					el.classList.remove('hex--hidden');
					el.classList.toggle('hex--dim', shouldDim);

					if (focusedId) {
						el.classList.toggle('hex--subdue',
							!shouldDim && id !== focusedId);
					} else {
						el.classList.remove('hex--subdue');
					}

					if (id === focusedId) {
						el.classList.remove('hex--dim', 'hex--subdue');
					}
				});

				App.UI.updateLegend(app.state.selection);
				try { updateCourseCount(); } catch(_) {}
			}

			function bumpMoving() {
				if (Config.lightenDuringMotion) document.body.classList.add('is-moving');
				clearTimeout(motionTimer);
				motionTimer = setTimeout(() => document.body.classList.remove('is-moving'), 120);
			}

			function focusById(id) {
				const layer = app.el.layer;
				let measuring = false;
				try {
					layer.classList.add('is-measuring'); // CSS already disables transitions for .is-measuring
					measuring = true;
					const el = app.cache.hexById.get(id);
					if (!el) return;

					const prev = app.el.grid.querySelector('.hex--focus');
					if (prev && prev !== el) prev.classList.remove('hex--focus');

					el.classList.add('hex--focus');
					app.state.focusedId = id;

					const center = centerOfStage();
					const stageRect = center.rect;
					const rect = el.getBoundingClientRect();

					const target = 0.7 * Math.min(stageRect.width, stageRect.height);
					const s0 = app.state.scale;
					const sWanted = target / Math.max(rect.width, rect.height);
					const s1 = Util.clamp(s0 * sWanted, app.state.min, app.state.max);

					const hexCx = rect.left + rect.width / 2;
					const hexCy = rect.top + rect.height / 2;

					const Dx = center.x;
					const Dy = stageRect.top + stageRect.height / 3;

					const T1x = (Dx - center.x) / s1 - (hexCx - center.x) / s0 + app.state.tx;
					const T1y = (Dy - center.y) / s1 - (hexCy - center.y) / s0 + app.state.ty;

					app.state.scale = s1;
					app.state.tx = T1x;
					app.state.ty = T1y;

					App.UI.applyTransform();

					const item = App.cache.courseById.get(id);
					if (item) App.UI.showInfo(item);

					applyFilter();
					App.UI.updateCenterCTA();

					App.Tips?.tipOnFocus?.();

				} finally {
					if (measuring) layer.classList.remove('is-measuring');
				}
				
			}

			function clearFocus() {
				if (app.state.focusedId) {
					const prev = app.cache.hexById.get(app.state.focusedId);
					prev?.classList.remove('hex--focus');
				}
				app.state.focusedId = null;
				App.UI.hideInfo();
				applyFilter();
				App.UI.updateCenterCTA();
			}

			function recenter(opts = {}) {
				const { withInfoBias = false } = opts;

				app.state.scale = app.state.baseScale;
				app.state.tx = app.state.baseTx;
				app.state.ty = withInfoBias ? app.state.infoBiasTy : app.state.baseTy;

				App.UI.applyTransform();
				App.UI.updateCenterCTA();
			}

			function onWheel(e) {
				if (app.state.lockInput) return;

				e.preventDefault();

				const k = e.ctrlKey ? 0.04 : 0.10;
				const f = e.deltaY > 0 ? (1 - k) : (1 + k);

				const center = centerOfStage();
				const s0 = app.state.scale;
				const s1 = Util.clamp(s0 * f, app.state.min, app.state.max);
				const ratio = s1 / s0;

				const cx = e.clientX, cy = e.clientY;

				app.state.tx = (1 - ratio) * (cx - center.x) + ratio * app.state.tx;
				app.state.ty = (1 - ratio) * (cy - center.y) + ratio * app.state.ty;
				app.state.scale = s1;

				App.UI.applyTransform();
				App.UI.updateCenterCTA();

				bumpMoving();
			}

			function dist(a, b) {
				const dx = a.x - b.x;
				const dy = a.y - b.y;
				return Math.hypot(dx, dy);
			}

			function midpoint(a, b) {
				return { x: (a.x + b.x) / 2, y: (a.y + b.y) / 2 };
			}

			function onPointerDown(e) {
				if (app.state.lockInput) return;
				if (e.button !== 0) return;

				pointers.set(e.pointerId, { x: e.clientX, y: e.clientY });

				downTarget = e.target || null;
				downX = e.clientX;
				downY = e.clientY;
				isTap = true;

				try { e.target.setPointerCapture(e.pointerId); } catch (_) {}

				if (pointers.size === 1) {
					app.state.isDragging = false;
					startX = e.clientX;
					startY = e.clientY;
					startTX = app.state.tx;
					startTY = app.state.ty;
				} else if (pointers.size === 2) {
					app.state.isPinching = true;
					isTap = false;

					const [a, b] = [...pointers.values()];
					lastDist = dist(a, b);
					bumpMoving();
				}
			}

			function onPointerMove(e) {
				if (!pointers.has(e.pointerId)) return;
				if (app.state.lockInput) return;

				pointers.set(e.pointerId, { x: e.clientX, y: e.clientY });

				if (app.state.isPinching && pointers.size >= 2) {
					const [a, b] = [...pointers.values()];
					const d = dist(a, b);

					if (d > 0 && lastDist > 0) {
						const m = midpoint(a, b);
						const center = centerOfStage();

						const s0 = app.state.scale;
						const s1 = Util.clamp(s0 * (d / lastDist), app.state.min, app.state.max);
						const r = s1 / s0;

						app.state.tx = (1 - r) * (m.x - center.x) + r * app.state.tx;
						app.state.ty = (1 - r) * (m.y - center.y) + r * app.state.ty;
						app.state.scale = s1;

						App.UI.applyTransform();
						lastDist = d;

						bumpMoving();
					}
				} else if (pointers.size === 1) {
					const dx = e.clientX - startX;
					const dy = e.clientY - startY;
					const moved = Math.hypot(dx, dy) > 4;

					if (moved) isTap = false;

					if (!app.state.isDragging && moved) {
						app.state.isDragging = true;
						document.body.classList.add('is-dragging');
						if (Config.lightenDuringMotion) document.body.classList.add('is-moving');
					}

					if (app.state.isDragging) {
						app.state.tx = startTX + dx;
						app.state.ty = startTY + dy;
						App.UI.applyTransform();
					}
				}

				App.UI.updateCenterCTA();
			}

			function onPointerUp(e) {
				if (!pointers.has(e.pointerId)) return;

				pointers.delete(e.pointerId);

				try { e.target.releasePointerCapture(e.pointerId); } catch (_) {}

				if (pointers.size === 0) {
					if (isTap && !app.state.lockInput) {
						const moved = Math.hypot(e.clientX - downX, e.clientY - downY) > 6;
						const hexHit = !moved && downTarget && downTarget.closest ? downTarget.closest('.hex__hit') : null;
						const hexEl = hexHit ? hexHit.closest('.hex') : null;
						const id = hexEl?.getAttribute('data-id');

						if (id) {
							if (app.state.focusedId === id) App.Flow.deactivate('activeHexClick');
							else App.Flow.activate(id);
						} else {
							App.Flow.deactivate('emptyTap');
						}
					}

					app.state.isDragging = false;
					app.state.isPinching = false;

					isTap = false;
					downTarget = null;

					document.body.classList.remove('is-dragging');
					if (Config.lightenDuringMotion) document.body.classList.remove('is-moving');
				} else if (pointers.size === 1) {
					app.state.isPinching = false;

					const p = [...pointers.values()][0];
					startX = p.x;
					startY = p.y;
					startTX = app.state.tx;
					startTY = app.state.ty;
				}

				App.UI.updateCenterCTA();
			}

			function onKeydown(e) {
				if (app.state.lockInput) return;

				if ((e.key === 'Enter' || e.key === ' ') && document.activeElement?.classList?.contains('hex__hit')) {
					e.preventDefault();
					const hex = document.activeElement.closest('.hex');
					const id = hex?.getAttribute('data-id');
					if (!id) return;

					if (app.state.focusedId === id) App.Flow.deactivate('keyboardToggleOff');
					else App.Flow.activate(id);
				}

				if (e.key === 'Escape') {
					if (app.state.focusedId) App.Flow.deactivate('esc');
				}
			}

			function bindFiltersDelegated() {
				app.el.themeGroup.addEventListener('change', async (e) => {
					const target = e.target;
					if (!(target instanceof HTMLInputElement)) return;
					if (target.type !== 'radio' || target.name !== 'theme') return;
					if (!target.checked) return;
					
					// CRITICAL: Skip hiddenIds reset if this is a programmatic theme change from course deselection
					const skipHiddenReset = e.detail?.skipHiddenReset;
					if (skipHiddenReset) {
						const v = (target.value || '').trim() || null;
						app.state.selection.theme = v;
						await App.Flow.deactivate('themeChange');
						applyFilter();
						App.UI.updateLegend(app.state.selection);
						return;
					}
										
					if (target.id === 'theme-custom') {
						app.state.selection.theme = 'Custom';
						// Do not touch hiddenIds here; Custom mode is managed by course checkbox events.
						await App.Flow.deactivate('themeChange');
						applyFilter();
						App.UI.updateLegend(app.state.selection);
						return;
					}

					const v = (target.value || '').trim();

					// Keep selected theme in app state ('' → null for "No theme / show all")
					app.state.selection.theme = v || null;
					App.UI.updateLegend(app.state.selection);

					if (v) {
						const newHidden = new Set();
						for (const c of App.Domain.all()) {
							const hasTheme = (c.themes || []).map(String).includes(v);
							if (!hasTheme) newHidden.add(c.id);
						}
						app.state.selection.hiddenIds = newHidden;
					} else {
						/* No theme → select them all */
						app.state.selection.hiddenIds.clear();
					}
					
					/* Reflect in the checkbox list */
					try { syncCourseCheckboxesToHiddenSet(); } catch(_) {}

					await App.Flow.deactivate('themeChange');
					applyFilter();

					if (v) App.Tips.tipOnFilter();
				});

				/* Helper: any manual course selection should override/clear an active theme filter */
				function forceNoThemeAndReflectUI(){
					const customRadio = document.getElementById('theme-custom');
					if (customRadio && customRadio.checked) {
						return;
					}
					if (String(app.state.selection.theme || '') === 'Custom') {
						app.state.selection.theme = null;
						return;
					}
					if (app.state.selection.theme) {
						app.state.selection.theme = null;
						const noneRadio = document.querySelector('#themeGroup input[name="theme"][value=""]');
						if (noneRadio) noneRadio.checked = true;
						App.UI.updateLegend(app.state.selection);
					}
				}

				app.el.courseGroup.addEventListener('change', async (e) => {
					const target = e.target;
					if (!(target instanceof HTMLInputElement)) return;
					if (target.type !== 'checkbox') return;

					const wrap = target.closest('.check');
					const id = wrap?.getAttribute('data-id');
					if (!id) return;

					if (target.checked) app.state.selection.hiddenIds.delete(id);
					else app.state.selection.hiddenIds.add(id);

					forceNoThemeAndReflectUI();

					if (!target.checked && app.state.focusedId === id) {
						await App.Flow.deactivate('courseHidden');
					}

					applyFilter();
					try { updateCourseCount(); } catch(_) {}
				});
			}

			function bindCourseBulkActions() {
				const selectAllBtn = document.getElementById('coursesAllBtn');
				const selectNoneBtn = document.getElementById('coursesNoneBtn');

				function setAll(checked) {
					const noneRadio = document.getElementById('theme-none');
					const customRadio = document.getElementById('theme-custom');
					
					if (checked) {
						// Select all -> No theme / show all
						app.state.selection.theme = null;
						if (noneRadio) noneRadio.checked = true;
					} else {
						// Deselect all -> Custom / start blank
						app.state.selection.theme = 'Custom';
						if (customRadio) customRadio.checked = true;
					}
					
					const boxes = [...app.el.courseGroup.querySelectorAll('input[type="checkbox"]')];
					for (const b of boxes) {
						const wrap = b.closest('.check');
						const id = wrap?.getAttribute('data-id');
						if (!id) continue;

						b.checked = checked;
						if (checked) app.state.selection.hiddenIds.delete(id);
						else app.state.selection.hiddenIds.add(id);
					}
					applyFilter();
					App.UI.updateLegend(app.state.selection);
					try { updateCourseCount(); } catch(_) {}
				}

				selectAllBtn?.addEventListener('click', () => setAll(true));
				selectNoneBtn?.addEventListener('click', () => setAll(false));
			}

			function attach() {
				app.el.layer.addEventListener('wheel', onWheel, { passive: false });

				app.el.layer.addEventListener('pointerdown', onPointerDown);
				document.addEventListener('pointermove', onPointerMove, { passive: true });
				document.addEventListener('pointerup', onPointerUp, { passive: true });
				document.addEventListener('pointercancel', onPointerUp, { passive: true });

				app.el.layer.addEventListener('gesturestart', (e) => e.preventDefault());
				document.addEventListener('keydown', onKeydown);

				app.el.centerBtn.addEventListener('click', async () => {
					if (app.state.focusedId) await App.Flow.deactivate('centerBtn');
					else recenter();
				});

				app.el.downloadBtn.addEventListener('click', (e) => {
					e.preventDefault();
					App.Export.run();
				});

				bindFiltersDelegated();
				bindCourseBulkActions();
			}

			/* (x / total) counter helpers */
			function updateCourseCount() {
				const total = App.Domain.all().length;
				const checked = [...app.el.courseGroup.querySelectorAll('input[type="checkbox"]')].filter(cb => cb.checked).length;
				const el = document.getElementById('courseCount');
				if (el) el.textContent = `(${checked} / ${total})`;
			}
			
			function syncCourseCheckboxesToHiddenSet() {
				const boxes = [...app.el.courseGroup.querySelectorAll('input[type="checkbox"]')];
				for (const b of boxes) {
					const id = b.closest('.check')?.getAttribute('data-id');
					if (!id) continue;
					b.checked = !App.state.selection.hiddenIds.has(id);
				}
				updateCourseCount();
			}

			let _resizeTimer = null;
			function onResize() {
				clearTimeout(_resizeTimer);
				_resizeTimer = setTimeout(() => {
					adoptNewBasePreservingView();

					try {
						App.UI.sizeThemeList();
						App.UI.sizeCourseList();
						App.UI.updateWorkspaceReserve();
					} catch (_) {}

					if (app.state.focusedId) {
						const id = app.state.focusedId;
						requestAnimationFrame(() => focusById(id));
					} else {
						App.UI.updateCenterCTA();
					}
				}, 120);
			}

			return {
				attach,
				applyFilter,
				fitAll,
				onResize,
				clearFocus,
				recenter,
				focusById,
				adoptNewBasePreservingView
			};
		})(App);

		/* =============================================================================
			9) Flow (sequenced activate/deactivate)
		============================================================================= */
		App.Flow = (function (app) {
			const q = [];
			let running = false;

			function lockInput(v) {
				app.state.lockInput = !!v;
			}

			/**
			 * Wait for the dock AND the workspace padding transition to finish,
			 * so stage size is final before we measure/zoom to a hex.
			 */
			async function waitDockAndWorkspace() {
				const waits = [];
				// Dock slide
				waits.push(waitTransition(app.el.dock, Config.dockTransitionMs + 80));
				// Workspace padding animates when the dock opens/closes
				if (app.el.workspace) {
					waits.push(waitTransition(app.el.workspace, Config.dockTransitionMs + 120));
				}
				await Promise.all(waits);
				await Util.nextFrame(2); // ensure layout has settled
			}

			async function ensureStableStageForFocus() {
				// Always go through the same flow so both cases behave identically.
				const wasVisible = !App.UI.isDockCollapsed();
				if (wasVisible) App.UI.collapseDock('auto');

				// Wait for dock & workspace to fully settle (even if it was already hidden,
				// this ensures we don’t race any in-flight transitions).
				await waitDockAndWorkspace();

				// Recompute baseScale/min/max against the *final* stage rect.
				app.Interaction.adoptNewBasePreservingView();

				// Give ResizeObserver/visualViewport a moment to flush and the DOM to settle.
				await Util.nextFrame(2);
			}

			function waitTransition(el, maxMs = 350) {
				return new Promise((resolve) => {
					let done = false;

					const timer = setTimeout(() => {
						if (done) return;
						done = true;
						resolve();
					}, Math.max(0, maxMs));

					const onEnd = (e) => {
						if (e.target !== el) return;
						el.removeEventListener('transitionend', onEnd);

						if (done) return;
						done = true;
						clearTimeout(timer);
						resolve();
					};

					el.addEventListener('transitionend', onEnd, { once: true });
				});
			}

			function enqueue(fn) {
				return new Promise((resolve, reject) => {
					q.push({ fn, resolve, reject });
					drain();
				});
			}

			async function drain() {
				if (running) return;
				const item = q.shift();
				if (!item) return;

				running = true;
				lockInput(true);

				try {
					const r = await item.fn();
					item.resolve(r);
				} catch (e) {
					console.error(e);
					item.reject(e);
				} finally {
					lockInput(false);
					running = false;
					if (q.length) drain();
				}
			}

			async function initialFit() {
				app.Interaction?.applyFilter?.();
				app.Interaction?.fitAll?.();
				await Util.nextFrame(2);
			}

			async function activate(id) {
				return enqueue(async () => {
					await ensureStableStageForFocus();
					app.Interaction.focusById(id);
					await waitTransition(app.el.layer, Config.layerTransitionMs + 60);
				});
			}


			async function deactivate(reason = '') {
				return enqueue(async () => {
					const menuVisible = !App.UI.isDockCollapsed();
					const wasAutoCollapsed = !!app.state.menu.autoCollapsed;

					App.UI.hideInfo();
					app.Interaction.clearFocus();

					app.Interaction.recenter({ withInfoBias: false });
					await waitTransition(app.el.layer, Config.layerTransitionMs + 60);
					await Util.wait(Config.menuHexDelayMs);

					if (!menuVisible && wasAutoCollapsed && !app.state.menu.userCollapsed) {
						App.UI.revealDock('auto');
						await waitTransition(app.el.dock, Config.dockTransitionMs + 80);
					}
				});
			}

			return {
				initialFit,
				activate,
				deactivate,
				isBusy: () => running
			};
		})(App);

		/* =============================================================================
			10) Export — as PNG (html-to-image external tool)
		============================================================================= */
		App.Export = (function (app) {
		async function run() {
			const stage = app?.el?.stage || document.querySelector('.stage');
			const grid  = app?.el?.grid  || document.querySelector('.hex-grid');
			if (!stage || !grid) return;

			const restore = hideChrome();
			const prevBlocksActive = new Set(app?.state?.selection?.blocksActive || []);
			const blockInputs = Array.from(document.querySelectorAll('#blockFilterGroup input[name="blocks"]'));
			const prevBlockChecks = new Map(blockInputs.map(el => [String(el.value), !!el.checked]));
			try {
			if (app?.state?.selection) {
				app.state.selection.blocksActive = new Set(['1','2','3','4']);
			}
			for (const el of blockInputs) el.checked = true;
			App.Filters?.applyAll?.();
			
			for (const [, hexEl] of app.cache?.hexById || []) {
				hexEl.classList.remove('hex--dim-block');
			}
			grid.querySelectorAll('.hex--dim-block').forEach(el => el.classList.remove('hex--dim-block'));
			
			for (let i = 0; i < 12; i++) {
				await Util.nextFrame(1);
				const hexes = Array.from(grid.querySelectorAll('.hex'))
					.filter(h => getComputedStyle(h).display !== 'none');
				const anyDimOrHidden = hexes.some(h =>
					h.classList.contains('hex--dim') ||
					h.classList.contains('hex--dim-block') ||
					h.classList.contains('hex--hidden')
				);
				const allOpaque = hexes.every(h => (parseFloat(getComputedStyle(h).opacity || '1') >= 0.985));
				if (!anyDimOrHidden && allOpaque) break;
			}

			// A4 landscape, viewport-independent
			const W = 4800, H = Math.round(W / Math.SQRT2);
			const OUT = createCanvas(W, H), ctx = OUT.ctx;

			// Layout
			const Mx = 72, My = 60;
			const innerW = W - 2 * Mx, innerH = H - 2 * My;
			const titleH = Math.floor(innerH * 0.09);
			const midH   = Math.floor(innerH * 0.76);
			const footH  = innerH - titleH - midH;
			const left   = Mx, top = My, titleY = top, midY = top + titleH, footY = midY + midH;
			const inset = 24;
			const contX = left + inset, contW = innerW - 2 * inset;
			const contY = midY  + inset, contH = (midH + footH) - 2 * inset;
			fill(ctx, 0, 0, W, H, css('--surface', '#fff'));
			fill(ctx, contX, contY, contW, contH, css('--surface-2', '#e3e3e3'));

			// Row 1 in PNG
			const titlePx = Math.floor(titleH * 0.70);
			await drawTitleBar(ctx, left, titleY, innerW, titleH, titlePx);

			const st = stage.getBoundingClientRect();
			const allHex = Array.from(grid.querySelectorAll('.hex'))
				.filter(n => getComputedStyle(n).display !== 'none');
			const rs  = (allHex.length ? allHex : [grid]).map(n => n.getBoundingClientRect());
			let L=+Infinity,T=+Infinity,R=-Infinity,B=-Infinity;
			for (const r of rs) { L=Math.min(L,r.left); T=Math.min(T,r.top); R=Math.max(R,r.right); B=Math.max(B,r.bottom); }

			let cx = L - st.left, cy = T - st.top, cw = Math.max(1, R-L), ch = Math.max(1, B-T);
			const pad = Math.round(Math.max(cw, ch) * 0.08);
			cx = Math.max(0, cx - pad); cy = Math.max(0, cy - pad);
			cw = Math.min(st.width  - cx, cw + pad*2);
			ch = Math.min(st.height - cy, ch + pad*2);

			// Row 2 in PNG
			const row2Top = contY, row2H = Math.floor(midH - inset);
			const sideGap = Math.max(8, Math.floor(contW * 0.02));
			const sideW   = Math.max(260, Math.floor(contW * 0.32));
			const snapW   = Math.max(1, contW - sideW - sideGap);
			
			const fit     = Math.min(snapW / cw, row2H / ch);
			const pr      = Math.max(2, fit * 1.6);

			const snapshot = await htmlToImage.toPng(stage, {
				pixelRatio: pr,
				backgroundColor: css('--surface-2', '#e3e3e3'),
				cacheBust: true
			});

			const sx = Math.round(cx * pr), sy = Math.round(cy * pr);
			const sw = Math.round(cw * pr), sh = Math.round(ch * pr);
			const dw = Math.round(cw * fit), dh = Math.round(ch * fit);
			const leftBias = Math.floor(Math.max(8, snapW * 0.03));
			let dx = contX + Math.floor((snapW - dw) / 2) - leftBias;
			dx = Math.max(contX, dx);
			const dy = row2Top + Math.floor((row2H - dh) / 2);

			const img = await loadImg(snapshot);
			ctx.imageSmoothingEnabled = true; ctx.imageSmoothingQuality = 'high';
			ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);

			// Right-side list: courses per block (always show Block 1-4).
		    {
		    	const listX = contX + snapW + sideGap;
		    	const listY = row2Top;
		    	const listW = sideW;
		    	const listH = row2H;

		    	// Panel
		    	roundRect(
 					ctx,
 					listX, listY, listW, listH,
 					Math.max(12, Math.floor(listH * 0.05))
		    	);

		    	// Active courses = not hidden
		    	const hidden = app?.state?.selection?.hiddenIds || new Set();
		    	const active = (App.Domain.all ? App.Domain.all() : [])
 					.filter(c => c && c.id && !hidden.has(c.id));

		    	const byBlock = { 1: [], 2: [], 3: [], 4: [] };
				let courseNr = 1;
		    	for (const c of active) {
 					const blocks = Array.isArray(c.block) ? c.block.map(v => String(v)) : [];
 					for (const b of [1,2,3,4]) {
 						if (blocks.includes(String(b))) byBlock[b].push(String(c.title || c._label || 'Untitled'));
 					}
		    	}
		    	for (const b of [1,2,3,4]) {
 					byBlock[b].sort((a, z) => a.localeCompare(z, undefined, { sensitivity: 'base' }));
		    	}

		    	// Typography
		    	const padIn = Math.max(16, Math.floor(listW * 0.06));
		    	const fsH = Math.max(14, Math.floor(titlePx * 0.30));
		    	const fsI = Math.max(12, Math.floor(fsH * 0.88));
		    	const gapH = Math.max(8,  Math.floor(fsI * 0.55));
		    	const gapB = Math.max(12, Math.floor(fsI * 0.9));
		    	const lhH = Math.floor(fsH * 1.25);
		    	const lhI = Math.floor(fsI * 1.25);

		    	let x = listX + padIn;
		    	let y = listY + padIn;
		    	const maxLineW = listW - padIn * 2;

		    	ctx.save();
		    	ctx.textAlign = 'start';
		    	ctx.textBaseline = 'top';

		    	for (const b of [1,2,3,4]) {
 					if (y + lhH > listY + listH - padIn) break;

 					// Header
 					ctx.fillStyle = css('--title', '#003366');
 					ctx.font = `800 ${fsH}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
 					ctx.fillText(`Block ${b}`, x, y);
 					y += lhH;

 					// Items
 					ctx.fillStyle = css('--text', '#0d0e0e');
 					ctx.font = `${fsI}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
					if (typeof courseNr !== 'number') courseNr = 1;
					if (!byBlock[b].length) {
						if (y + lhI <= listY + listH - padIn) {
							ctx.fillText('—', x, y);
							y += lhI;
						}
					} else {
						for (const t of byBlock[b]) {
							if (y + lhI > listY + listH - padIn) break;
							const line = `${courseNr}. ${t}`;
							ctx.fillText(ellipsizeText(ctx, line, maxLineW), x, y);
							y += lhI;
							courseNr++;
						}
					}

 					y += gapB;
		    	}

		    	ctx.restore();
		    }

			stroke(ctx, contX, contY, contW, contH, css('--title', '#003366'), 4);

			// Row 3 in PNG
			const legend = collectLegendData(app, grid);
			const basePx = Math.max(14, Math.floor(titlePx * 0.34));
			const cardMarginSides = Math.max(28, Math.floor(footH * 0.10));
			const cardX = contX + cardMarginSides;
			const cardY = footY;
			const cardW = contW - cardMarginSides * 2;
			const cardH = contY + contH - cardY - cardMarginSides;
			drawLegendCardCentered(ctx, cardX, cardY, cardW, cardH, legend, basePx);

			// Download
			triggerDownload(OUT.canvas.toDataURL('image/png'), 'CIS-overview.png');
			} finally {
				try {
					if (app?.state?.selection) app.state.selection.blocksActive = prevBlocksActive;
					for (const el of blockInputs) {
						if (prevBlockChecks.has(String(el.value))) el.checked = prevBlockChecks.get(String(el.value));
					}
					App.Filters?.applyAll?.();
					await Util.nextFrame(1);
				} catch (_) {}
				restore();
			}
		}

		// ---------- Legend data rules ----------
		function collectLegendData(app, grid) {
			const rawTheme = (app.state.selection.theme || '').toString().trim();
			const theme = rawTheme && rawTheme.toLowerCase() !== 'all' ? rawTheme : '—';
			const tiles = Array.from(grid.querySelectorAll('.hex'));
			const total = tiles.length;
			const visible = tiles.filter(el => !el.classList.contains('hex--dim')).length || total;
			return {
			heading: 'Tracks', theme, visible, total,
			chips: [
				{ label: 'BDM', color: css('--track-bdm', '#008fc7') },
				{ label: 'CC',  color: css('--track-cc',  '#3c7a47') },
				{ label: 'NMD', color: css('--track-nmd', '#ab833f') }
			]
			};
		}

		// ---------- Title bar with Tilburg University logo & stamp ----------
		async function drawTitleBar(ctx, x, y, w, h, px) {
			const inset = Math.floor(h * .20);
			const centerY = y + Math.floor(h / 2);

			// Logo
			const logoSize = Math.floor(h * 0.75);
			await drawSvgById(ctx, 'Tiu-logo', x + inset, centerY - Math.floor(logoSize/2), logoSize, logoSize);

			// Title
			ctx.fillStyle = css('--title', '#003366');
			ctx.textBaseline = 'middle';
			ctx.font = `900 ${Math.floor(px * 0.9)}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			const titleX = x + inset + logoSize + Math.floor(logoSize * 0.4);
			ctx.fillText('Personal Course Overview (CIS)', titleX, centerY);

			// Stamp
			ctx.font = `500 ${Math.floor(px * .34)}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			ctx.fillStyle = css('--text-weak','rgba(0,0,0,.72)');
			ctx.textAlign = 'right';
			ctx.fillText(`Exported at: ${new Date().toLocaleString()}`, x + w - inset, y + Math.floor(h * .35));
			ctx.textAlign = 'start';
		}

		async function drawSvgById(ctx, id, x, y, w, h) {
			const src = document.getElementById(id);
			if (!src) return;
			const clone = src.cloneNode(true);
			inlineSvgPaint(src, clone);
			if (!clone.getAttribute('xmlns')) clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
			clone.setAttribute('width', String(w));
			clone.setAttribute('height', String(h));
			const svgText = new XMLSerializer().serializeToString(clone);
			const blob = new Blob([svgText], { type: 'image/svg+xml' });
			const url = URL.createObjectURL(blob);
			try {
				const img = await loadImg(url);
				ctx.drawImage(img, x, y, w, h);
			} finally {
				URL.revokeObjectURL(url);
			}
		}
		
		function inlineSvgPaint(srcRoot, dstRoot) {
			const sWalker = document.createTreeWalker(srcRoot, NodeFilter.SHOW_ELEMENT);
			const dWalker = document.createTreeWalker(dstRoot, NodeFilter.SHOW_ELEMENT);
			while (sWalker.nextNode() && dWalker.nextNode()) {
				const sEl = sWalker.currentNode;
				const dEl = dWalker.currentNode;
				const cs = getComputedStyle(sEl);
				const fill = cs.fill;
				const stroke = cs.stroke;
				if (fill && fill !== 'none') dEl.setAttribute('fill', fill);
				if (stroke && stroke !== 'none') dEl.setAttribute('stroke', stroke);
			}
		}

		// ---------- Legend card ----------
		function drawLegendCardCentered(ctx, x, y, w, h, data, basePx) {
			// Card
			roundRect(ctx, x, y, w, h, Math.max(12, Math.floor(h*.08)), css('--surface','#fff'), css('--border-strong','rgba(0,0,0,.14)'));

			// Base metrics
			const pad = Math.max(24, Math.floor(basePx * 1.2));
			const colGap = Math.max(pad, Math.floor(w * .04));
			const colW = Math.floor((w - 2*pad - colGap) / 2);
			const fsHead = Math.floor(basePx * 1.2);
			const fsLbl  = Math.floor(basePx * 1.2);
			const chipSz = Math.floor(basePx * .95);
			const gapA   = Math.floor(basePx * 1.4);  // heading->chips
			const gapB   = Math.floor(basePx * 0.6);  // theme->courses

			const leftBlockH  = fsHead + gapA + chipSz;
			const rightBlockH = fsLbl + gapB + fsLbl;
			const blockH = Math.max(leftBlockH, rightBlockH);
			const vy = y + Math.floor((h - blockH) / 2);

			let cx = x + pad, cy = vy;
			ctx.fillStyle = css('--title', '#003366');
			ctx.font = `800 ${fsHead}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			ctx.fillText(data.heading, cx, cy + fsHead);        // baseline draw
			const chipsTop = cy + fsHead + gapA + Math.floor(chipSz * 0.75);
			drawChipsRow(ctx, cx, chipsTop, data.chips, chipSz);

			cx = x + pad + colW + colGap; cy = vy;
			const txt = css('--text', '#0d0e0e');
			const titleC = css('--title', '#003366');
			ctx.fillStyle = titleC;
			ctx.font = `800 ${fsLbl}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			ctx.fillText('Theme', cx, cy + fsLbl);
			ctx.fillStyle = txt;
			ctx.font = `${fsLbl}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			ctx.fillText(String(data.theme), cx + Math.floor(colW * 0.35), cy + fsLbl);

			ctx.fillStyle = titleC;
			ctx.font = `800 ${fsLbl}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			const cy2 = cy + fsLbl + gapB;
			ctx.fillText('Courses', cx, cy2 + fsLbl);
			ctx.fillStyle = txt;
			ctx.font = `${fsLbl}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			ctx.fillText(`${data.visible} / ${data.total}`, cx + Math.floor(colW * 0.35), cy2 + fsLbl);
		}

		function drawChipsRow(ctx, x, yBaseline, chips, size) {
			const sq = Math.max(10, Math.floor(size));
			const sp1 = ctx.measureText(' ').width;
			const sp4 = ctx.measureText('    ').width;
			let cx = x;
			for (const c of chips) {
			const top = yBaseline - Math.floor(sq * 0.75);
			fill(ctx, cx, top, sq, sq, c.color);
			cx += sq + sp1;

			ctx.fillStyle = css('--text', '#0d0e0e');
			ctx.font = `${size}px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif`;
			ctx.textBaseline = 'alphabetic';
			ctx.fillText(c.label, cx, yBaseline);
			cx += ctx.measureText(c.label).width + sp4;
			}
		}

		// ----- micro-utils -----
		function hideChrome() {
			const undo = [];
			for (const s of ['.dock','.tour','.toast','.btn--center','.info','#osirisOverviewBtn','.app-title']) {
			const el = document.querySelector(s); if (!el) continue;
			const d = el.style.display; el.style.display='none'; undo.push(()=>el.style.display=d);
			}
			return () => undo.reverse().forEach(f=>f());
		}
		function createCanvas(w,h){ const c=document.createElement('canvas'); c.width=w; c.height=h; return {canvas:c,ctx:c.getContext('2d')}; }
		function fill(ctx,x,y,w,h,color){ ctx.save(); ctx.fillStyle=color; ctx.fillRect(x,y,w,h); ctx.restore(); }
		function stroke(ctx,x,y,w,h,color,px){ ctx.save(); ctx.strokeStyle=color; ctx.lineWidth=px||1; ctx.strokeRect(x,y,w,h); ctx.restore(); }
		function roundRect(ctx,x,y,w,h,r,fillCol,strokeCol){
			const rr=Math.max(0,Math.min(r,Math.min(w,h)/2)); ctx.beginPath();
			ctx.moveTo(x+rr,y); ctx.arcTo(x+w,y,x+w,y+h,rr); ctx.arcTo(x+w,y+h,x,y+h,rr);
			ctx.arcTo(x,y+h,x,y,rr); ctx.arcTo(x,y,x+w,y,rr); ctx.closePath();
			if(fillCol){ctx.fillStyle=fillCol;ctx.fill();} if(strokeCol){ctx.strokeStyle=strokeCol;ctx.lineWidth=1;ctx.stroke();}
		}
		function css(name,fallback){ return getComputedStyle(document.body).getPropertyValue(name).trim() || fallback; }
		function loadImg(url){ return new Promise((res,rej)=>{ const i=new Image(); i.onload=()=>res(i); i.onerror=rej; i.src=url; }); }
		function triggerDownload(dataUrl, filename){ const a=document.createElement('a'); a.href=dataUrl; a.download=filename; document.body.appendChild(a); a.click(); a.remove(); }
		function ellipsizeText(ctx, text, maxW) {
			const s = String(text ?? '');
			if (ctx.measureText(s).width <= maxW) return s;
			const ell = '…';
			let lo = 0, hi = s.length;
			while (lo < hi) {
				const mid = Math.floor((lo + hi) / 2);
				const cand = s.slice(0, mid).trimEnd() + ell;
				if (ctx.measureText(cand).width <= maxW) lo = mid + 1;
				else hi = mid;
			}
			const n = Math.max(0, lo - 1);
			return (s.slice(0, n).trimEnd() || '').trimEnd() + ell;
		}

		return { run };
		})(App);

		/* =============================================================================
			11) Tips (driven by tipsData JSON; step count x/total; preserves order)
		============================================================================= */
		App.Tips = (function (app) {
			const LS_HIDE = 'cis.tips.hidden';
			const LS_SEEN_FOCUS = 'cis.tips.seen.focus';
			const LS_SEEN_FILTER = 'cis.tips.seen.filter';

			function loadTips() {
				try {
					const raw = document.getElementById('tipsData')?.textContent || '[]';
					const parsed = JSON.parse(raw);
					const arr = Array.isArray(parsed) ? parsed : [];
					return arr.map((it) => {
						if (typeof it === 'string') return { t: it };
						if (it && typeof it === 'object') {
							if (typeof it.t === 'string') return { t: it.t };
							if (typeof it.text === 'string') return { t: it.text };
						}
						return null;
					}).filter(Boolean);
				} catch (_) {
					return [];
				}
			}
			let STEPS = null;
			function getSteps() {
				if (!STEPS || !STEPS.length) STEPS = loadTips();
				return STEPS;
			}

			let cur = 0;

			function applyStep() {
				const steps = getSteps();
				const total = steps.length;
				if (!app.el.tour) return;
				if (!total) { close(); return; }

				app.el.tourStep.textContent = `${cur + 1}/${total}`;
				app.el.tourText.textContent = steps[cur].t;
				app.el.tour.classList.add('is-open');

				// Button enable/disable
				app.el.tourPrevBtn.disabled = (cur === 0);
				app.el.tourNextBtn.disabled = (cur === total - 1);
				
				// Button styles per step:
				// 1/3: Back=btn, Next=btn--ghost, Close=btn
				// 2/3: Back=btn--ghost, Next=btn--ghost, Close=btn
				// 3/3: Back=btn--ghost, Next=btn, Close=btn--ghost
				const backBtn  = app.el.tourPrevBtn;
				const nextBtn  = app.el.tourNextBtn;
				const closeBtn = app.el.tourCloseBtn;
				
				// reset to base
				backBtn.className  = 'btn';
				nextBtn.className  = 'btn';
				
				if (cur === 0) {
					nextBtn.classList.add('btn--ghost');
				} else if (cur === 1) {
					backBtn.classList.add('btn--ghost');
					nextBtn.classList.add('btn--ghost');
				} else {
					backBtn.classList.add('btn--ghost');
				}
			}

			function close() {
				if (!app.el.tour) return;
				app.el.tour.classList.remove('is-open');
			}

			function showIfAllowed() {
				try {
					if (localStorage.getItem(LS_HIDE) === '1') return;
				} catch (_) {}

				const steps = getSteps();
				if (!steps.length) return;
				cur = 0;
				applyStep();
			}

			function toast(msg, ttl = 3800) {
				const t = app.el.toast;
				if (!t) return;

				t.textContent = msg;
				t.classList.add('is-open');
				setTimeout(() => t.classList.remove('is-open'), ttl);
			}

			function tipOnFocus() {
				try {
					if (localStorage.getItem(LS_SEEN_FOCUS) === '1') return;
					localStorage.setItem(LS_SEEN_FOCUS, '1');
				} catch (_) {}

				toast('Details appear in the panel at the bottom.', 4200);
			}

			function tipOnFilter() {
				try {
					if (localStorage.getItem(LS_SEEN_FILTER) === '1') return;
					localStorage.setItem(LS_SEEN_FILTER, '1');
				} catch (_) {}

				toast('Tip: click “No theme” to show all courses again.', 4200);
			}

			function bind() {
				if (!app.el.tour) return;

				app.el.tourPrevBtn.addEventListener('click', () => { if (cur > 0) { cur--; applyStep(); } });
				app.el.tourNextBtn.addEventListener('click', () => {
					const total = STEPS.length;
					if (cur < total - 1) { cur++; applyStep(); }
				});
				app.el.tourCloseBtn.addEventListener('click', close);

				app.el.tourHideBtn.addEventListener('click', () => {
					try { localStorage.setItem(LS_HIDE, '1'); } catch (_) {}
					close();
				});

				// Keep current step but refresh DOM if viewport changes
				window.addEventListener('resize', () => { if (app.el.tour.classList.contains('is-open')) applyStep(); }, { passive: true });
			}

			return { bind, showIfAllowed, tipOnFocus, tipOnFilter };
		})(App);

		/* =============================================================================
			12) Bootstrap
		============================================================================= */

		async function start() {
			App.Osiris.loadConfig();
			App.Domain.load();
			App.Themes.load();

			App.UI.bind();

			App.Osiris.applyOverviewLink();

			App.UI.renderThemeFilters(App.Themes.all());
			App.UI.renderCourseSelector(App.Domain.all());
			App.UI.renderHexGrid(App.Domain.all());
			try { document.getElementById('courseCount').textContent = `(${App.Domain.all().length} / ${App.Domain.all().length})`; } catch(_) {}

			App.UI.initCollapsiblesInitialState();

			App.Interaction.attach();

			App.Tips.bind();
			App.Tips.showIfAllowed();

			await App.Flow.initialFit();
			App.UI.playIntro();

			window.addEventListener('resize', App.Interaction.onResize, { passive: true });

			if ('visualViewport' in window && window.visualViewport) {
				window.visualViewport.addEventListener('resize', App.Interaction.onResize, { passive: true });
			}

			try {
				const ro = new ResizeObserver(() => App.Interaction.onResize());
				ro.observe(document.getElementById('stage'));
				App._resizeObserver = ro;
			} catch (_) {}

			requestAnimationFrame(() => {
				try {
					App.UI.sizeThemeList();
					App.UI.sizeCourseList();
					App.UI.updateWorkspaceReserve();
				} catch (_) {}
			});
		}

		window.addEventListener('DOMContentLoaded', start, { once: true });
	</script>

	<!-- ============================================================================
	 	CONFIG DATA
	 	============================================================================ -->
	<script id="configData" type="application/json">
		{ "start_AY": "2025" }
	</script>

	<!-- ============================================================================
		DATA
		============================================================================ -->
	<script id="themesData" type="application/json">
	[
		{ "id": "Persuasion", "label": "Communication and persuasion",             "order": 1 },
		{ "id": "Business",   "label": "Business communication",                   "order": 2 },
		{ "id": "Design",     "label": "Creative media & design",                  "order": 3 },
		{ "id": "Tech",       "label": "Communication and technology",             "order": 4 },
		{ "id": "Psychology", "label": "Psychology of language and communication", "order": 5 },
		{ "id": "Health",     "label": "Communication for health and wellbeing",   "order": 6 }
	]
	</script>

	<!-- ============================================================================
		OVERVIEW DATA (client-editable)
		----------------------------------------------------------------------------
		See inline documentation in the JS above for syntax and behavior.
		============================================================================ -->
	<script id="overviewData" type="application/json">
	{
		"19": "3-4-{5}-4-3",
		"20": "3-2-3-[4]-3-2-3",
		"21": "2-3-4-{3}-4-3-2",
		"22": "3-4-3-[2]-3-4-3",
		"23": "2-3-4-{5}-4-3-2",
		"24": "3-4-3-[4]-3-4-3",
		"25": "4-3-4-{3}-4-3-4",
		"26": "3-4-5^b-[4]-5^b-4-3",
		"27": "4-3-4-{5}-4-3-4",
		"28": "3-4-5-[4]-5-4-3",
		"29": "4-5-4-{3}-4-5-4",
		"30": "5^b-4-5-[4]-5-4-5^t",
		"31": "4-5-4-{5}-4-5-4"
	}
	</script>

	<!-- ============================================================================
		TIPS DATA (order defines steps; step counter uses list length)
		============================================================================ -->
	<script id="tipsData" type="application/json">
	[
		"At CIS, you can build your own profile. Our tracks and themes can help you out. Check out which courses fall under each theme. Click on each course to find out more.",
		"Controls: use “Select a theme” to highlight courses within a theme. Use “Select courses” to show or hide individual courses. The legend shows which track(s) each course belongs to.",
		"Pan & zoom: drag to pan and use mouse wheel/trackpad or pinch to zoom. Click or tap a course to open details; click/tap it again (or press Esc / tap empty space) to close."
	]
	</script>

	<script id="coursesData" type="application/json">
	[
		{
			"title": "Negotiation Strategies",
			"tracks": ["BDM", "CC"],
			"themes": ["Persuasion", "Business"],
			"code": "880460-M-6",
			"block": ["2"],
			"description": "The course will discuss the fundamentals of conflict management, negotiations, the concepts of interdependence, conflict and the creation of value, which will be viewed from the communication angle. Different strategies of negotiation, e.g. distributive and integrative bargaining, will be dealt with first. Next, the impact of cognitive, perceptual and relational variables, as well as the role of justice and ethics will be discussed within the framework of the main strategies. Social psychological factors, such as power differences, gender and culture will be studied. We will additionally focus on how mediated communication might affect the success of negotiations. Details for each of these aspects will be analyzed in the context of relevant empirical studies, discussed in the scientific articles that will be read and analyzed in addition to the book."
		},
		{
			"title": "Roles in Networked Organizations",
			"tracks": ["BDM"],
			"themes": ["Business"],
			"code": "880100-M-6",
			"block": ["3"],
			"description": "According to Shakespeare “All the world's a stage, and all the men and women merely players”. This may be particularly true for workplaces in which employees play their own roles and thereby contribute to organizational performance, group cohesion, and their own well-being. The dramaturgical metaphor is very appropriate to study organizations and organizational communication. In fact, work is often characterized as a performance, in which employees do their best to uphold certain images through their behavior and communication. Employee communication is often aimed at making a good impression on supervisors, clients, and co-workers. At the same time, employees are brand ambassadors and do their best to uphold certain corporate images, or defend corporate reputations in times of crises. Organizational communication enables role-playing, but communication is also constrained by roles. In this course, we will explore theories and empirical studies about role-playing at work that help us understand which (communication-) roles employees play, why they do so, how they do so, and how it affects their well-being, their performance, and the everyday performance of their organization. On the one hand, role-playing makes behavior predictable, and it smoothens collaboration, but on the other hand, roles cause problems in organizations (e.g., confusion, stress, and burnout) as role expectations are often ambiguous or elevated to unrealistic levels."
		},
		{
			"title": "Interpersonal Communication",
			"tracks": ["BDM", "CC"],
			"themes": ["Business", "Psychology"],
			"code": "880104-M-6",
			"block": ["2"],
			"description": "In this course you will gain knowledge about what makes interpersonal communication successful. We will focus on different communicative contexts, such as relationship formation and maintenance, leadership, health communication, negotiation, and parenting. A major focus will be on the effects of (unconscious, cognitive) psychological biases and the role of different types of media on whether and how people communicate successfully."
		},
		{
			"title": "Resistance and Persuasion",
			"tracks": ["BDM", "CC"],
			"themes": ["Persuasion", "Business", "Psychology"],
			"code": "880080-M-6",
			"block": ["3"],
			"description": "During this course you are provided with an in-depth overview of academic research in the fields of marketing communication and advertising, health communication, consumer behavior, social psychology, and media psychology studying the process of resistance to persuasion and become acquainted with the relevant concepts in those fields. Specifically, we discuss several theories on the different psychological processes that may explain a resistance response (i.e., psychological reactance, self-threat, and the activation of persuasion knowledge or advertising literacy), different strategies that people adopt to guard themselves against persuasive influences (e.g., counter arguing, source derogation, attitude bolstering), and strategies that influence professionals may use to overcome resistance (e.g., narrative persuasion, self-persuasion, and emotional appeals). In addition, we discuss tools that are specifically designed to help message receivers recognize persuasion attempts, which may foster resistance: sponsorship disclosures and inoculation against misinformation."
		},
		{
			"title": "Social Media Marketing",
			"tracks": ["BDM"],
			"themes": ["Persuasion", "Business"],
			"code": "880478-M-6",
			"block": ["4"],
			"description": "During this course, we will seek the answer to this question. We will examine the current state of affairs in scientific research regarding social media marketing. What scientific knowledge is available? Of course, we will also look at the many research questions that remain. Some of these research questions will be investigated by the students themselves in this course. This way, we can expand the scientific knowledge in the field of SMM. Finally, there will also be one or more guest speakers who currently work in social media marketing and who will share their practical knowledge with the students."
		},
		{
			"title": "Non-Verbal Communication",
			"tracks": ["CC"],
			"themes": ["Psychology"],
			"code": "880206-M-6",
			"block": ["4"],
			"description": "In the course, we discuss the different forms of non-verbal communication and how these can be analyzed. Furthermore, we focus on the possible functions (both intended and unintended) of these behaviors, for instance to express emotions, whether someone is truthful or not, to partition a sentence or regulate turn taking. We will also show how people can exploit such features, for instance to compensate for language difficulties, but also for showing dominance."
		},
		{
			"title": "Webcare & Conversational AI",
			"tracks": ["BDM", "CC"],
			"themes": ["Business", "Tech"],
			"code": "880085-M-6",
			"block": ["1"],
			"description": "The course consists of video lectures and seminars. In the video lectures, we will dive deeper into the main topics related to webcare and (conversational) AI – related to the readings of that week. To stimulate elaboration on that week’s topic, per video lecture students will hand in their answers to weekly questions (formative assessment). These weekly questions also prepare them for the exam at the end of the elective. The on-campus seminars are highly interactive and engaging. Each week, a student team will prepare an in-class activity that matches that week’s topic. Next to that, the weekly questions will be discussed as well as relevant theories and cases from practice. The seminars also allow students to work in teams on their group assignment."
		},
		{
			"title": "Topics in Communication & Digit. Science",
			"tracks": ["BDM", "CC", "NMD"],
			"themes": ["Persuasion", "Business", "Design", "Tech", "Psychology", "Health"],
			"code": "880101-M-6",
			"block": ["4"],
			"description": "Topics in Communication and Digital Science is a small-scale course (max. 16 students per theme) in which students are assigned an active role and have a say in what is discussed during the lectures. This course is therefore particularly suitable for CIS students who enjoy active, in-depth engagement with the materials, and Research Master's students. In Topics, students build scientific expertise and skills related to one specific societally relevant theme. Students will develop their oral presentation skills by creating a student-led seminar, and practice writing for a non-scientific audience. When you enroll in the Topics course via Osiris, you will be asked to select one of the four themes below. The theme you select, will be the overarching topic you will focus on for the full period of 7 weeks; you can thus not switch between the three topics during the course."
		},
		{
			"title": "Social Media: Risks & Opportunities",
			"tracks": ["BDM", "NMD"],
			"themes": ["Health"],
			"code": "880646-M-6",
			"block": ["2"],
			"description": "In this course we will discuss our daily social media use from two perspectives: the opportunities social media offer, but also the risks that are related to social media use for individual users. Especially the risks often receive large news coverage in (inter)national press, whereas the opportunities receive less to no media attention. This can lead to feelings of concerns about the use of social media among, for instance, individual users, parents, teachers, practitioners and policy makers. Communication scholars can play a crucial role in our society by providing their expert opinion. They can guide individual users, parents, teachers, practitioners, policy makers and journalists in forming a nuanced opinion about the potential risks and opportunities of social media."
		},
		{
			"title": "Multimodality & Visual Language",
			"tracks": ["CC"],
			"themes": ["Psychology"],
			"code": "880107-M-6",
			"block": ["2"],
			"description": "This course will primarily focus on theoretical and applied research on multimodal messages. We analyze and design various types of multimodal messages and expressions according to models and theories of language, graphics, and multimodality. As many of these theories are still in development, students will be challenged to both learn and contribute to theory-building and application."
		},
		{
			"title": "Data & (Mis)information",
			"tracks": ["BDM", "CC", "NMD"],
			"themes": ["Tech", "Psychology", "Health"],
			"code": "880003-M-6",
			"block": ["1"],
			"description": ""
		},
		{
			"title": "Risk Communication",
			"tracks": ["BDM", "CC", "NMD"],
			"themes": ["Persuasion", "Business", "Psychology", "Health"],
			"code": "880666-M-6",
			"block": ["4"],
			"description": "In this course, you will explore key theories and concepts in the field of risk and uncertainty communication. Topics include the psychology of risk perception, strategic and media risk communication, formats for communicating probability, the impact of uncertainty on trust and decision-making, and the role of individual differences such as numeracy, graph literacy, and cultural orientation. You will also learn to critically assess real-world risk communication efforts in areas like health, the environment, and technology, and apply practical, evidence-based strategies to avoid common pitfalls and enhance the effectiveness of risk communications."
		},
		{
			"title": "Digital Health Communication",
			"tracks": ["BDM", "CC", "NMD"],
			"themes": ["Persuasion", "Design", "Tech", "Health"],
			"code": "800872-M-6",
			"block": ["3"],
			"description": "In this course, you will learn about the main theories, technologies, and methods that are relevant for design, adoption, and effects of (persuasive) digital health communication. Topics that will be discussed include characteristics of users, affordances and design of technology, and the effects of digital technologies on (health) outcomes. Topics will be illustrated with recent examples of implementations of health communication technology, such as games, mobile health apps, and virtual reality applications. In the assignments of this course, you will apply the knowledge to design and evaluate a theory- and evidence-based digital health application."
		},
		{
			"title": "Digital Inequality",
			"tracks": ["BDM", "NMD"],
			"themes": ["Tech", "Health"],
			"code": "880103-M-6",
			"block": ["3"],
			"description": "There is a lot of hope placed in digital technologies to democratize participation in the economy, politics, education, and culture. But how equal is our digital society? What shapes who is seen and who benefits, and who is left out or penalized? In this course, we examine the differences that have emerged between groups in terms of who benefits (and who does not) from the rise of smartphones, social media, big data, and other digital innovations in the 21st century. We discuss the historical context for digital inequality and some theoretical frameworks, before turning to recent research on topics such as health, education, politics, AI, gig work, and political participation. Note: We may adapt these topics to stay relevant to social and technological changes. We will look at how inequalities emerge around broad differences in society such as gender, age, and income, and explore case studies of particular populations who are experiencing and adapting to digital changes. We will also look at macro/structural issues related to digital inequalities at a global scale, such as data colonialism and dominance over internet/platform governance."
		},
		{
			"title": "Taalkennis",
			"tracks": ["CC"],
			"themes": ["Psychology"],
			"code": "880004-M-6",
			"block": ["3"],
			"description": ""
		},
		{
			"title": "Understanding Large Language Models",
			"tracks": ["CC", "NMD"],
			"themes": ["Tech", "Psychology"],
			"code": "880643-M-6",
			"block": ["1"],
			"description": "Throughout the course, students will explore the architecture behind LLMs and compare them to cognitive models of human language processing. On the one hand, understanding human cognition is essential for making usable language technology. One the other hand, LLMs also provide new tools, methods, and frameworks that human cognition could not offer. In addition, LLMs may by seeming human, while working in a non-human way, posit new risks to human society."
		},
		{
			"title": "Climate Communication",
			"tracks": ["BDM", "CC", "NMD"],
			"themes": ["Health"],
			"code": "880102-M-6",
			"block": ["2"],
			"description": "Climate change is one of the most pressing issues of our time. In this course, we critically examine the dominant and persisting narratives that currently shape climate communication, such as the anthropocene perspective (‘humans are central’), the capitalist perspective, and the apocalyptic perspective. While challenging, students taking this course are invited to break out of existing structures and develop well-informed, new narratives and perspectives: if audiences can imagine better what a sustainable future may look like, it could make climate change communication more successful."
		},
		{
			"title": "Digital Food Marketing",
			"tracks": ["BDM", "NMD"],
			"themes": ["Persuasion", "Business", "Psychology", "Health"],
			"code": "880099-M-6",
			"block": ["1"],
			"description": "The course consists of two main parts; (1) a theoretical part with lectures and a written exam, and (2) an empirical part with working groups, final report and presentation of the results. During the lectures, different forms of food marketing techniques and their effectiveness will be discussed, theoretical models explaining the psychology of food marketing and consumption and eating behavior will be presented, and methodologies to test and analyze food marketing techniques will be explained. During most lectures, there will also be room to bring the theory into practice, as students will conduct an empirical study in close collaboration with a company/organization, supervised by one of the teachers."
		},
		{
			"title": "Emerging Technologies for Learning",
			"tracks": ["CC", "NMD"],
			"themes": ["Design", "Tech", "Psychology"],
			"code": "880016-M-6",
			"block": ["3"],
			"description": "The goal of the course is to provide you with a thorough understanding of the main concepts involved in learning, and how emerging technologies can be leveraged to support these concepts. We will explore how we could potentially benefit from these technologies in education, but also examine potential barriers or pitfalls that could stand in the way of a successful implementation. The content covered in this course is relevant for students who are interested in learning processes and how emerging technologies can support these, in the field of formal education as well as other domains where learning is important."
		},
		{
			"title": "The Human Mind in the Digital World",
			"tracks": ["CC", "NMD"],
			"themes": ["Tech", "Psychology"],
			"code": "880672-M-6",
			"block": ["1"],
			"description": "The main goal of this course on ‘the human mind in the digital world’ is to explore and understand a) how insights about the workings of the human mind are (and can be) exploited in the design of the digital world, and b) how operating in the digital world affects – in both immediate and a more sustained manner – the workings of the human mind. We will be drawing from the fields of cognitive psychology, cognitive neuroscience, media psychology, and communication science, in order to learn about the interplay between human cognition and digital technology."
		},
		{
			"title": "Responsible UX Design",
			"tracks": ["NMD"],
			"themes": ["Design", "Tech", "Health"],
			"code": "880671-M-6",
			"block": ["2"],
			"description": "In this course, you will learn how to integrate core ethical principles and theories in the responsible design of new media products, while exploring what happens when such concerns are neglected, or even flouted. You will discuss and interrogate ethical concerns and value clashes as they relate to topical issues in society and specific design practices, all the while developing and reifying your own ethical positions. You will also design and critique your own speculative new media product as a way of exposing and reflecting on problematic creations and designs that cause harm. The goal of this course is not to dictate what you should think or believe with respect to the design of responsible interactive systems, but rather to help you define your own ethical positions and processes for making responsible design decisions."
		},
		{
			"title": "Interactive Storytelling",
			"tracks": ["CC", "NMD"],
			"themes": ["Persuasion", "Design", "Tech", "Health"],
			"code": "822034-M-6",
			"block": ["4"],
			"description": "In this course, you become acquainted with (interactive) narratives, stories and storytelling and with the experience and effects of (interactive) narratives. You explore interactive storytelling in, for example, journalism, health communication and education and discuss how interactivity can be used in storytelling in a meaningful, responsible way. You do so through exploring scientific literature but also through analyzing a professional strategic interactive narrative and creating and publishing your own interactive digital narrative about a societally relevant topic."
		},
		{
			"title": "Psychology of Creativity",
			"tracks": ["NMD"],
			"themes": ["Design", "Psychology"],
			"code": "880013-M-6",
			"block": ["4"],
			"description": "Creativity is essential in today’s fast-paced and innovation-driven world, whether in designing products, solving complex problems, or developing persuasive campaigns. But what psychological processes underlie the generation of truly original and effective ideas? In this course, we explore the psychology of creativity: how people generate ideas, solutions, and products that are novel yet also appropriate. Drawing on current research in cognitive, motivation, emotion, and social psychology, we will examine the mechanisms that support, hinder, or enhance creative thinking. The course also engages with the \"third wave\" of creativity research, which investigates how digital technologies affect human creativity."
		}
	]
	</script>
	</body>
</html>